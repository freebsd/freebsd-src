.\" Derived from (1) /usr/doc/troff/*, Unix 7th edition,
.\" and (2) /sys/doc/troff.ms, Plan 9 version 4:
.\"
.\" (1)
.\" Copyright(C) Caldera International Inc. 2001-2002. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"   Redistributions of source code and documentation must retain the
.\"    above copyright notice, this list of conditions and the following
.\"    disclaimer.
.\"   Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"   All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed or owned by Caldera
.\"      International, Inc.
.\"   Neither the name of Caldera International, Inc. nor the names of
.\"    other contributors may be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
.\"
.\" USE OF THE SOFTWARE PROVIDED FOR UNDER THIS LICENSE BY CALDERA
.\" INTERNATIONAL, INC. AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED. IN NO EVENT SHALL CALDERA INTERNATIONAL, INC. BE
.\" LIABLE FOR ANY DIRECT, INDIRECT INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
.\" BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
.\" WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
.\" OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
.\" EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\"
.\" (2)
.\" Copyright (C) 2003, Lucent Technologies Inc. and others.
.\" All Rights Reserved.
.\"
.\" Distributed under the terms of the Lucent Public License Version 1.02.
.\"
.\"
.\" Changes by Gunnar Ritter, Freiburg i. Br., Germany, February 2006.
.\" Sccsid @(#)doc.tr	1.186 (gritter) 10/23/09
.\"
.\" from file m.mac
.do xflag 3
.warn
.mediasize letter
.lc_ctype en_US.utf8
.\".fp 1 R LinLibertine_R otf
.ig
.fps math,greek 1 R texgyretermes-regular otf
.fp 2 I texgyretermes-italic otf
.fp 3 B texgyretermes-bold otf
.fp 4 BI texgyretermes-bolditalic otf
.flig CW 0
.kernpair R f R i 55
.kernpair B f B l 100
.kernpair B f B i 50
.kernpair B f R ) 60
.kernpair I f R ) 190
.kernpair I T R ) 125
.kernpair I W R ) 125
.kernpair I H R ) 125
.kernpair I M R ) 110
.kernpair I S R ) 70
.kernpair I N B \' 90
.kernpair R [ I f 200
.kernpair R [ I \(fi 200
.kernpair R , B p 80
.kernpair R \[longs] R ' 110
.kernpair B f I F 50
.kernpair B \\ B / 40
.kernpair I f R \  60
.kernpair BI f B \  80
..
.ig
.fps math,greek 1 R times ttf
.fp 2 I timesi ttf
.fp 3 B timesbd ttf
.fp 4 BI timesbi ttf
.fp 5 CW cour ttf
.flig R fi \[fi] fl \[fl]
.flig I fi \[fi] fl \[fl]
.flig B fi \[fi] fl \[fl]
.flig BI fi \[fi] fl \[fl]
.kernpair R 0123456789 R · -150
.kernpair R · I Z 80
..
.ig
.fps math 1 R tim_____ pfb
.fp 2 I timi____ pfb
.fp 3 B timb____ pfb
.fp 4 BI timbi___ pfb
.fp 0 RE tiy_____ pfb
.fp 0 IE tiyi____ pfb
.fp 0 BE tiyb____ pfb
.fp 0 BIE tiybi___ pfb
.fallback R RE
.flig R 31
.fallback I IE
.flig I 31
.fallback B BE
.flig B 31
.fallback BI BIE
.flig BI 31
..
.\" mo/dy/yr
.ds Sccsdate 02/10/16
.ds Str \*[Sccsdate]
.substring Str 0 0
.if '\*[Str]'%' \{\
.	ds Yr \n[year]
.	substring Yr 2 3
.	ds Sccsdate \n(mo/\n(dy/\*(Yr
.\}
.ds Str \*[Sccsdate]
.substring Str 1 1
.ie '\*[Str]'/' .nr S1 0
.el .nr S1 1
.ds Str \*[Sccsdate]
.substring Str \n(S1+3 \n(S1+3
.ie '\*[Str]'/' .nr S2 \n(S1+2
.el .nr S2 \n(S1+3
.ds Mo \*[Sccsdate]
.substring Mo 0 \n(S1
.ds Dy \*[Sccsdate]
.substring Dy \n(S1+2 \n(S2
.ds Yr \*[Sccsdate]
.substring Yr \n(S2+2 \n(S2+3
.if \*(Mo=1 .ds mo January
.if \*(Mo=2 .ds mo February
.if \*(Mo=3 .ds mo March
.if \*(Mo=4 .ds mo April
.if \*(Mo=5 .ds mo May
.if \*(Mo=6 .ds mo June
.if \*(Mo=7 .ds mo July
.if \*(Mo=8 .ds mo August
.if \*(Mo=9 .ds mo September
.if \*(Mo=10 .ds mo October
.if \*(Mo=11 .ds mo November
.if \*(Mo=12 .ds mo December
.if \n(dw=1 .ds dw Sunday
.if \n(dw=2 .ds dw Monday
.if \n(dw=3 .ds dw Tuesday
.if \n(dw=4 .ds dw Wednesday
.if \n(dw=5 .ds dw Thursday
.if \n(dw=6 .ds dw Friday
.if \n(dw=7 .ds dw Saturday
.ds Date "\*(mo \*(Dy, 20\*(Yr
.\"
.de ii
.ds NR "\fInroff\fR
.ds TR "\fItroff\fR
.ds NR. "\fInroff.\fR
.ds TR. "\fItroff.\fR
.ds NR, "\fInroff,\fR
.ds TR, "\fItroff,\fR
.ds NR; "\fInroff;\fR
.ds TR; "\fItroff;\fR
.ds NR: "\fInroff:\fR
.ds TR: "\fItroff:\fR
.ds GR "\fIgroff\fR
.ds GR. "\fIgroff.\fR
.ds GR, "\fIgroff,\fR
.ds GR; "\fIgroff;\fR
.ds GR: "\fIgroff:\fR
.ds PS "\fRPostScript\fR
.ds PDF "\s-1PDF\s+1
.ds TEX T\h'-.13m'\v'.165m'E\v'-.165m'\h'-.17m'X
.ds LaTeX L\h'-.2m'\v'-.165m'\s'-3'A\s0\v'.165m'\h'-.1m'\\*[TEX]
.ds UTF \s-1UTF\s+1-8
.ds H
.nr PS 10
.nr PO 1i
.hy 14
.ds u \^\v'-0.3m'\s-2
.ds d \s0\v'0.3m'
.nr a .8i
.nr b 1.6i
.nr c 2.4i
.nr d 2.9i
.nr e 0.25i
.nr p 0 1
.nr s 0 1
.af p 1
.af s 1
..
.nr m -1i
.nr x 0 1
.nr y 0+\nmu
.ad p
.ii
.ev 1
.ps \n(PS-2
.vs \n(PS
.ll 6.5i
'in 0
.ad p
.ev
.tr &.
.de xx
.sp 0.4
..
.ev ht
.evc 0
.ev
.de ht
.ev ht
.tl `\*(NR/\*(TR \fRUser's Manual``Heirloom Documentation Tools`
.tl '\*[Date]'''\".tl 'Version \n(mo/\n(dy/\n[year]'''
.ev
..
.de hd
.\".tl '\(rn'''
.if \\n%>1 \{'sp |.33i
.ht
.ps \\n(S2
.ps \\n(S1
'sp |1i\}
.nr x 0 1
.nr y 0+\\nmu
.chfo \\nmu
.if \\n(dn .fz
.ns
.if dmx .mx
.nr cl 0 1
.mk
.put-table-header
..
.rn bp barebp
.de bp
.nr nosave 1
.barebp
..
.de fz
.fn
.nf
.fy
.fi
.ef
..
.de fx
.if \\nx .di fy
..
.nr fopos 0
.de chfo
.rr fopos
.nr fopos \\$1
.ch fo \\n[fopos]u
..
.de dl
.ie \\n[fopos]>=0 .chfo \\n[fopos]u+1v
.el .chfo \\n[fopos]u-1v
..
.nr savedline 0
.de fo
.ie 0&(\\n[nosave]=0)&(\\n(2C=0) \{\. \" FIXME
.nr savedline 1
.di savedline
.dt 1v barefo
.\}
.el .barefo
..
.nr nosave 0
.de restore
.if \\n[savedline] \{\
.mk curpos
.ev restore
.sp |\\n[curpos]u
.nf
.cc 
savedline
cc .
.fi
.ev
.nr savedline 0
.\}
..
.de barefo
.if \\n[savedline] \{\
.di
.if (\\n(dl<(\\n(.l))&(\\n[nosave]=0) .restore \" widow detected
.\}
.if dcx .cx
.nr dn 0
.if \\nx .xf
.nr x 0 \"disable fx
.ie \\n(2C&(\\n+(cl<2) \{\
.po +3.4i
.rt
.nr y 0+\\nmu
.chfo \\nmu
.if \\n(dn .fz
.ns \}
.el \{\
.tblbox
.po \\n(POu
.nr S1 \\n(.s
.ps
.nr S2 \\n(.s
.ps 10
'barebp \}
.restore
..
.nr 2C 0
.de 2C
.br
.mk
.nr 2C 1
.ll 3.1i
.ev 1
.ll 3.1i
.ev
..
.de 1C
.br
.nr 2C 0
.ll 6.5i
.ev 1
.ll 6.5i
.ev
..
.de co
.de cx
.br
\fI(Continued next page.)\fP
.br
.rm cx
\\..
..
.de pp
.ev pp
'ps \\n(PS
.ft R
'tl ''- % -''
.ev
'barebp
..
.wh 0 hd
.wh 12i fo
.wh \nmu fx
.chfo \nmu
.de fn
.da FN
.ev 1
.if \\n+x=1 .fs
.fi
.ti 0
..
.de xf
.ev 1
.nf
.FN
.rm FN
.if !'\\n(.z'' .di
.ev
..
.de fs
.ti 0
\l'1i'
.br
..
.de ef
.br
.ev
.di
.nr y -\\n(dn
.if \\nx=1 .nr y -2p
.chfo \\nyu
.if \\n(nl+\\n(.v-\\n(.p-\\ny .chfo \\n(nlu+\\n(.vu
..
.wh -.6i pp
.de h1
.xx
.ne 5
.nr nosave 1
.nf
.ta \\nau \\nbu \\ncu \\ndu +\\neu
.ft BI
Request	Initial	If No
Form	Value\\$2	Argument	Notes\\$1	Explanation
.ft R
.ft
.fi
.in \\ndu
..
.de bt
.ft R
.xx
.nr nosave 1
.ne 1.1
.ti 0
.nr nosave 0
..
.de bta
.bt
\A'\\$1'\c
..
.de b1
.br
.ti 0
.ie '\\$1'' .nr nosave 1
.el .nr nosave \\$1
..
.de pg
.ft R
.fi
.in 0
.xx
.ne 1.1
.nr nosave 0
..
.de sc
.pg
.ne 1
.nr nosave 1
\fI\\*H\\np.\\n+s.\|\\c
.ft R
.ul
.it 1 sc-end
.di head
.ds pre-head
.ds post-head
..
.de sc-end
.end 2
.wh \\n(nlu+1v sc-post
..
.de sc-post
.nr nosave 0
.ch sc-post
..
.de mha
.mh
.ds pre-head \A'\\$1'
..
.de mht
.mh
.ds pre-head \T'\\$1'
.ds post-head \T
..
.de mh
.nr s 0
.in 0
.xx
.ne 2.5
.ft B
\\*H\\n+p.
.nr nosave 1
.it 1 mh-end
.di head
.ds pre-head
.ds post-head
..
.de mh-end
.end \\n[mh-level]
..
.de end
.br
.nr eol \\n(.n
.di
\\*[pre-head]\c
.head
\\*[post-head]\c
.nr Evpt \\n[.vpt]
.vpt 0
.mk Epos
.br
.Bookmark \\$1 \\*[head]
.sp |\\n[Epos]u
.vpt \\n[Evpt]
\h'|\\n[eol]u'
..
.de x1
.xx
.in .5i
.nf
.nr nosave 1
..
.de x2
.xx
.in 0
.fi
.nr nosave 0
..
.de EM
.br
\&\c
'barebp
.pl 2i
..
.em EM
.de TS
.br
.nr nosave 1
.sp
.ie '\\$1'H' \{\
.di table-header
.\}
.el .ds table-header
..
.de TH
.nr T. 0
.T#
.di
.put-table-header
..
.de put-table-header
.if d table-header \{\
.lnr save-in \\n(.i
.in 0
.table-header
.in \\n[save-in]u
.mk #T
.\}
..
.de T&
..
.ds T#
.de tblbox
.chfo 0
.nr T. 1
.T#
.nr #T 1i+2p
..
.de TE
.rm table-header
.nr nosave 0
.ds T#
.sp
.ce 0
.ft R
.ps \n(PS
.ta \\nau \\nbu \\ncu \\ndu +\\neu
..
.de I
\fI\\$*\fP
..
.de B
\fB\\$*\fP
..
.de BI
\f(BI\\$*\fP
..
.de Bookmark
.	mk Btmp
.	nr Bvpt \\n[.vpt]
.	vpt 0
.	ev bookmarks
.		ie \\$1=0 \{\
\v'|0'
.			nr bmove 1v+4p
.		\}
.		el .nr bmove 2v
\v'-\\n[bmove]u'\\X'PDFMark: BookmarkClosed \\$1 \\$2'
.		sp |\\n[Btmp]u
.	ev
.	vpt \\n[Bvpt]
..
.\" from file m0
\X'SetBorderStyle: /S/U/W 0.1'
\X'SetUBorderStyle: /S/U/W 0.1'
\X'PDFMark: Author Gunnar Ritter'
\X,PDFMark: Title Nroff/Troff User's Manual,
\X'PS: [ {Catalog} << /ViewerPreferences << /DisplayDocTitle true >> >> /PUT pdfmark'
\X'PS: [ /PageMode /UseOutlines /DOCVIEW pdfmark'
.br
.ii
.Bookmark 0 Title
.br
.rs
.sp |1.50i
.ce 1000
.ps 12
.ft B
Heirloom Documentation Tools
.sp 16p-\n(.vu
Nroff/Troff User's Manual
.sp .2i
.ft I
.ps 10
Joseph F. Ossanna
.br
Brian W. Kernighan
.br
Gunnar Ritter
.br
and others
.ft R
.ce 0
.sp 2
.ps \n(PS
.fi
.Bookmark 0 Introduction
.ft B
Introduction
.pg
\*(NR and \*(TR are text processors under
the \s-1UNIX\s+1 Time-Sharing System\T'ref_1'\*u1\*d\T
that format text for typewriter-like terminals and
for a typesetter/raster devices, respectively.
They accept lines of text interspersed with lines of
format control information and
format the text into a printable, paginated document
having a user-designed style.
\*(NR and \*(TR offer
unusual freedom in document styling,
including:
arbitrary style headers and footers;
arbitrary style footnotes;
multiple automatic sequence numbering for paragraphs, sections, etc;
multiple column output;
dynamic font and point-size control;
arbitrary horizontal and vertical local motions at any point;
and
a family of automatic overstriking, bracket construction, and
line drawing functions.
.pg
\*(TR produces its output in a device-independent form,
although parameterized for a specific device;
\*(TR output must be processed by a driver for that
device to produce printed output.
.pg
\*(NR and \*(TR are highly compatible with each other and it is almost always
possible to prepare input acceptable to both.
Conditional input is provided that enables
the user to embed input expressly destined for either program.
\*(NR can prepare output directly for a variety of terminal types and
is capable of utilizing the full resolution of each terminal.
.pg
.ft B
On the Heirloom Documentation Tools Edition
.pg
In Summer 2005, Sun Microsystems, Inc. released
the source code to the Solaris system,\|\T'ref_6'\*u6\*d\T
including the System\ V Release\ 4 version of \*[TR,]
a derivative of AT\[ampersand]T
\fIDocumenter's Workbench\fR \*[TR,] version 2.
It had undergone few changes since the end of the 1980's,
so it could serve as a clean starting point
for a new version of \*(TR
which is intended to be highly compatible
with \s-1UNIX\s+1 \*[TR,]
but which also provides additional features
desirable for a high-quality typesetting application
at the beginning of the 21st century.
.pg
As with the other components of the \fIHeirloom Project,\fR
the original code,
once it had been released under an Open Source license,
has been made portable such that it compiles and runs
on the contemporary \s-1UNIX\s+1-style systems, including Linux.
It continues to be freely available under the same license
as originally released, including its complete source code.
.pg
\*(PS and its close relative \*[PDF]
are now the only device languages
which are relevant to high-quality printing;
actually, \*(PS itself is more and more becoming
an intermediate language for the generation of \*[PDF] documents.
The \fIHeirloom\fR version of \*(TR is thus primarily directed
towards generating \*(PS output
for further processing by a \*[PDF] creator,
such as Ghostscript or Adobe Distiller;
it can generate \*[PDF]-specific instructions
for prepress usage
as well as for online navigation in \*[PDF] documents.
.pg
The principal output device independence of \*(TR
has nevertheless been retained,
and changes to the intermediate language have been minor.
Many \*(TR post-processors will thus continue to be usable
with no or little adaptions.
.pg
\*(PS Type\ 1, OpenType, and TrueType
have become device-independent font formats;
virtually all commercial and free fonts
are available in one of them.
There is thus no need for a \*(TR-specific device-independent font format
anymore;
instead, \fIHeirloom\fR \*(TR can read font metrics directly
from Type\ 1, OpenType, and TrueType font files.
This has greatly relieved the task of installing fonts\(emit
suffices to copy the original files to a user-selectable font directory\(em,
and makes it possible to access advanced typographic data,
such as kerning tables or substitution instructions for old-style numerals.
.pg
\*(TR provides convenient access to
any character in a font file
either by its \*(PS name,
by its Unicode position
as specified in a font-specific or a generic table,
or by conversion from \s-1POSIX\s+1-style locale-specific characters
to Unicode positions.
The last form allows direct input of international language texts
in almost any character encoding,
including \*[UTF].
.pg
Improvements to the line adjusting mechanism
can be activated to achieve more aesthetically pleasant output:
\*(TR can compute line breaks for a whole paragraph at once,
using a variant of an algorithm
originally developed by Donald Knuth and Michael Plass
for the \*[TEX] system\|\T'ref_7'\*u7\*d\T.
Interword spaces can be shrunk
as an alternative to being expanded.
Inter-letter spaces and letter shapes
can be dynamically varied
both for computing break points
and for adjusting output lines;
this is sometimes called ``micro-typography'',
.ds U+1EBF \o'e\s-1^\s0'\\k(aX\h'-.8n'\s-1\v'-.15m'´\v'+.15m'\s0\h'|\\n(aXu'
cf. e.g. the thesis by Hàn Th\*[U+1EBF] Thành\|\T'ref_8'\*u8\*d\T.
All paragraph formatting options can be arbitrarily combined.
.pg
A variety of international paper formats
and hyphenation languages are supported by \*[TR.]
The algorithm for the latter is derived
from the respective one developed for \*[TEX]
by Franklin Liang\|\T'ref_9'\*u9\*d\T;
\*(TR uses the implementation of \fILibHnj\fR by Raph Levien.
\*[TEX] hyphenation patterns can be converted
to the format accepted by \*[TR.]
.pg
Many internal limitations of \*(TR have been removed;
most notably, \*(TR can now set characters in fractional point sizes.
.pg
The \*(TR language has been extended
similarly as in the \s-1GNU\s+1 version of \*[TR,] \*(GR\|\T'ref_10'\*u10\*d\T;
for example,
names of requests, macros, strings, number registers, and fonts
can consist of more than two characters.
Although \fIHeirloom\fR \*(TR is not completely compatible with \*[GR,]
a special \T's_groff'compatibility mode\T is provided,
and documents prepared for \*(GR
can usually be processed without alteration.
.pg
As even the most basic printing devices
are now capable of rastering \*(PS documents
(at least using conversion tools),
and as \*(PS and \*[PDF] viewer programs allow
an accurate on-screen display of \*(TR documents,
there is only one area where \*(NR is still useful:
the formatting of \s-1UNIX\s+1 manual pages.
The \fIHeirloom\fR version of \*(NR
is thus specifically aimed at this task;
it remains a separate program,
is much smaller than \*[TR,]
and is optionally able to run without external device description files.
This makes it possible to use it to view manual pages
even on small system distributions
where the size of programs is an issue.
.pg
The Solaris version of \*(NR had already been updated
to support input characters in arbitrary locales.
The \fIHeirloom\fR version adds the ability to generate
\*[UTF] output.
This extends the \*(NR character set
by many mathematical and typographical characters
on terminals capable of displaying them.
.pg
Although \fIHeirloom\fR \*(NR does of course
not provide the typographical extensions made for \*[TR,]
it includes the same language extensions.
It is thus well able to cope with the
tangle of manual page code
which has been produced by application writers
who have unfortunately become increasingly unaware
of how to write well-styled \*(NR documents.
.pg
This manual as well as some of the pre- and post-processor commands
have been derived from \s-1UNIX\s+1 code
re\%leased by Caldera\T'ref_11'\*u11\*d\T,
and from materials released by Lucent as parts
of the \fIPlan\ 9\fR system\T'ref_12'\*u12\*d\T.
.pg
.ft B
Background to the Second Edition
.pg
\*(TR
was originally written by the late Joe Ossanna
in about 1973, in assembly language for the \s-1PDP\s+1-11,
to drive the Graphic Systems CAT typesetter.
It was rewritten in C around 1975,
and underwent slow but steady evolution until
Ossanna's death late in 1977.
.pg
In 1979, Brian Kernighan
modified
\*(TR
so that it would produce output for a variety of typesetters,
while retaining its input specifications.
Over the decade from 1979 to 1989,
the internals
have been modestly revised,
though much of the code remains as it was when Ossanna wrote it.
.pg
\*(TR
reads parameter files
each time it is invoked, to
set values for machine resolution,
legal type sizes and fonts, and character names,
character widths
and the like.
\*(TR
output is \s-1ASCII\s+1 characters
in a simple language
that describes where each character is to be placed
and in what size and font.
A post-processor must be written for each device
to convert this typesetter-independent language
into specific instructions for that device.
.pg
The output language contains information that was not readily
identifiable in the older output.
In the newer language, the beginning of each page, line, and word
is marked,
so post-processors can do device-specific optimizations
such as sorting the data vertically or printing it boustrophedonically,
independent of
\*[TR.]
.pg
Capabilities for graphics have been added:
\*(TR
recognizes commands for drawing diagonal lines,
circles, ellipses, circular arcs,
and quadratic B-splines.
There are also ways to pass arbitrary information to the output,
unprocessed by
\*[TR.]
.pg
A number of limitations have been eased or eliminated.
A document may have an arbitrary number of fonts on any page
(if the output device permits it, of course).
Fonts may be accessed merely by naming them;
``mounting'' is no longer necessary.
There are no limits on the number of characters.
\H'8'Character height\H'10' and \S'-1'sl\S'0'a\S'1'nt\S'0' may be set
independently of width.
.pg
The remainder of this document contains
\T'part_usage'a description of usage and command-line options\T;
\T'part_summary'a summary of requests, escape sequences,
and pre-defined number registers\T;
\T'part_reference'a reference manual\T;
\T'part_tutorial'tutorial examples\T;
and \T'Table I'a list of commonly-available characters\T.
.pg
.nr nosave 1
.ft B
Acknowledgements (for the Second Edition, by Brian Kernighan)
.pg
Joe Ossanna's
\*(TR
remains a remarkable accomplishment.
For more than twenty years, it has proven a robust tool,
taking unbelievable abuse from a variety of preprocessors
and being forced into uses that were never conceived of
in the original design,
all with considerable grace under fire.
.pg
Recent versions of \*(TR have profited from
significant code improvements by
Jaap Akkerhuis, Dennis Ritchie, Ken Thompson, and Molly Wagner.
Andrew Hume, Doug McIlroy, Peter Nelson, and
Ravi Sethi made valuable suggestions on the manual.
I fear that the remaining bugs are my fault.
.pg
.ft B
Acknowledgements (for the Heirloom Edition, by Gunnar Ritter)
.pg
The \*(TR program as written by Joseph Ossanna and Brian Kernighan
turned out to be an excellent base
for a typesetting system containing
approximately twice as many lines of code.
As with the second edition,
the design and the principal parts of \*(TR have remained the same,
despite of additions and modifications.
This is particularly remarkable since
much of it is now more than 40 years old,
but serves its purpose as well as on day one.
.pg
I am grateful to Sun, Caldera, and Lucent
for releasing the source code
without which this project would not have been possible.
.pg
I wish to thank Brian Kernighan for the permission
to adapt this manual.
.pg
.ft B
Availability and Contact Information
.pg
The source code of the \fIHeirloom Documentation Tools\fR
and accompanying materials
are freely available from
<\W'http://n-t-roff.github.io/heirloom/doctools.html'http://n-t-roff.github.io/heirloom/\:doctools.html\W>.
Comments and bug reports should be added at
<\W'https://github.com/n-t-roff/heirloom-doctools/issues'https://github.com/n-t-roff/heirloom-doctools/issues\W>
or send to <troff@arcor.de>.
.pg
.sp .4
.ft B
References
.pg
.ta .2iR .3i
.in .3i
.de ref
.ti 0
.sp .4
	\A'ref_\\$1'[\\$1]	\c
..
.ns
.ref 1
M. D. McIlroy, B. W. Kernighan (Eds.),
.ul
Unix Programmer's Manual,
Vol.\|2,
AT\[ampersand]T Bell Laboratories,
Murray Hill,
\s-1NJ\s+1 07974, 1979;
<\W'http://plan9.bell-labs.com/7thEdMan/index.html'http://plan9.bell-labs.com/7thEdMan/index.html\W>.
.ref 2
B. W. Kernighan, L. L. Cherry,
``Typesetting Mathematics \(em User's Guide (Second Edition)'',
in [1].
.ref 3
M. E. Lesk,
``Tbl \(em A Program to Format Tables'',
in [1].
.ref 4
B. W. Kernighan, ``A TROFF Tutorial'',
in [1].
.ref 5
J. F. Ossanna, ``Nroff/Troff User's Manual'',
in [1].
.ref 6
<\W'http://www.opensolaris.org'http://www.opensolaris.org\W>
.ref 7
D. E. Knuth, M. F. Plass,
``Breaking paragraphs into lines'',
\fISoftware\(emPractice and Experience\fR,
Vol. 11, Issue 12 (1981), pp.\ 1119\(en1184;
also in D. E. Knuth, \fIDigital Typography\fR,
Stanford, 1999 (\s-1CSLI\s0 lecture notes no. 78),
pp.\ 67\(en155.
.ref 8
Hàn Th\*[U+1EBF] Thành, \fIMicro-typographic extensions to the \*[TEX]\fI
typesetting system\fR,
Masaryk University Brno, 2000.
.ref 9
F. M. Liang, \fIWord Hy-phen-a-tion by Com-put-er\fR,
Stanford University, \s-1CA\s0 94305,
Report No. \s-1STAN\s0-\s-1CS\s0-83-977,
1983.
.ref 10
<\W'http://www.gnu.org/software/groff'http://www.gnu.org/software/groff\W>
.ref 11
<\W'http://www.tuhs.org/Archive/Caldera-license.pdf'http://www.tuhs.org/Archive/Caldera-license.pdf\W>
.ref 12
<\W'http://plan9.bell-labs.com/plan9'http://plan9.bell-labs.com/plan9\W>
.in 0
.pg
.nr nosave 1
.bp
.Bookmark 0 Usage
.ft B
\A'part_usage'Usage
.pg
The general form of invoking \*(NR (or \*(TR) at \s-1UNIX\s+1 command level is
.x1
\fBnroff  \fIoptions  files\fR\
\h'|2i'(or  \fBtroff  \fIoptions  files\fR)
.x2
where \fIoptions\fR represents any of a number of option arguments
and \fIfiles\fR represents the list of files containing the document
to be formatted.
An argument consisting of a single minus (\fB\-\fR) is taken to be
a file name corresponding to the standard input.
If no file names are given input is taken from the standard input.
The options, which may appear in any order so long as they appear
before the files, are:
.sp
.ta .2i 1.0i
.ft BI
	Option	Effect
.br
.ft R
.ta .3i 1.0i
.in 1.0i
.ll -.3i
.bt
	\fB\-o\fIlist\fR	\
Print only pages whose page numbers appear in \fIlist\fR,
which consists of comma-separated numbers and number ranges.
A number range has the form \fIN\-M\fR
and means pages \fIN\fR through \fIM;\fR
a initial \fI\-N\fR means
from the beginning to page \fIN;\fR and a final \fIN\-\fR means
from \fIN\fR to the end.
.bt
	\fB\-n\fIN\fR	Number first generated page \fIN\fR.
.bt
	\fB\-s\fIN\fR	Stop every \fIN\fR pages.
\*(NR will halt prior to every \fIN\fR pages (default \fIN\fR=1)
to allow paper loading or
changing, and will resume upon receipt of a newline.
\*(TR will include a ``pause'' code every \fIN\fR pages;
its meaning, if any, depends on the output device.
.bt
	\fB\-m\fIname\fR	Prepend the macro file
\fB/usr/ucblib/doctools/tmac/\fIname\fR
to the input \fIfiles\fR,
or, if that file would not be accessible,
\fB/usr/ucblib/doctools/tmac/tmac.\fIname\fR.
If the environment variable \%\fB\s-1TROFFMACS\s+1\fR is set,
its value is used instead of the default macro directory string,
and no attempt is made to open \fIname\fR with the ``tmac.'' prefix.
The value is prepended to \fIname\fR
without inserting an additional slash as a directory separator,
so it must either end with a slash itself
or can be used to specify a file name prefix (as e.g. ``tmac.'').
.bt
	\fB\-r\fIaN\fR	Register \fIa\fR (one-character) is set to \fIN\fR.
.bt
	\fB\-r\fIa\fB=\fRN\fR	Register \fIa\fR (may be more than one character) is set to \fIN\fR.
.bt
	\fB\-d\fIaS\fR	String \fIa\fR (one-character) is set to \fIS\fR.
.bt
	\fB\-d\fIa\fB=\fIS\fR	String \fIa\fR (may be more than one character) is set to \fIS\fR.
.bt
	\fB\-i\fP	Read standard input after the input files are exhausted.
.bt
	\fB\-q\fR	\
Invoke the simultaneous input-output mode of the \T'rd'\fBrd\fR\T request.
.bt
	\fB\-x\fIN\fR	Set the extension level to \fIN\fR \T'c_extension'(cf. \(sc1.1).\T
.bt
	\fB\-z\fR	Check syntax only; do not generate any output except for error messages.
.sp
.ne 3
.ft BI
		\*(NR Only
.br
.ft
.bt
	\fB\-e\fR	\
Produce equally-spaced words in adjusted
lines, using full terminal resolution.
.bt
	\fB\-h\fR	\
Use output tabs during horizontal spacing
to speed output and reduce output character count.
Tab settings are assumed to be every
8 nominal character widths.
.bt
	\fB\-T\fIname\fR	Specify
the name of the output terminal type.
Currently defined names are \fB37\fR for the (default) Model 37 Teletype\(rg,
\fBlp\fR for any line printer or terminal without half-line capability,
\fBtn300\fR for the GE TermiNet\ 300,
\fB300S\fR for the \s-1DASI\s+1-300S,
\fB300\fR for the \s-1DASI\s+1-300,
and
\fB450\fR for the \s-1DASI\s+1-450 (Diablo Hyterm).
A special name, \fBlocale\fR, is also supported.
It generates \*[UTF] output if permitted
by the current \s-1LC_CTYPE\s+1 locale,
and has the same effect as \fBlp\fR otherwise.
.sp
.nr nosave 1
.ne 5
.nr nosave 0
.ft BI
		\*(TR Only
.br
.ft
.bt
	\fB\-f\fP	Refrain from feeding out paper and stopping
the output device at the end of the run.
.bt
	\fB\-a\fP	Send a printable \s-1(ASCII)\s+1 approximation
of the results to the standard output.
.bt
	\fB\-F\fIpath\fR	Look in directory \fIpath\fP
for font information;
the default is \fB/usr/ucblib/doctools/font/devps\fP.
.bt
	\fB\-T\fIname\fR	Specifies the output device.
Currently defined names are
\fBps\fR for (default) \*(PS output at 72\|000 dpi,
\fBpsmed\fR for \*(PS output at 3600 dpi,
\fBpslow\fR for \*(PS output at 432 dpi,
\fBpost\fR for \*(PS output at 720 dpi with legacy fonts,
and
\fBhtml\fR for producing HTML output with the \fBdhtml\fR postprocessor.
.bt
	\fB\-u\fIN\fR	Set the emboldening amount,
i.e. the number of times a character is printed to simulate bold output,
to \fIN\fR.
.ll
.in 0
.xx
.ne 3
.pg
Each option is invoked as a separate argument;
for example,
.x1
\fBnroff  \-o\fI4,8\-10  \fB\-T\fI300S  \fB\-m\fIabc  file1  file2\fR
.x2
requests formatting of pages 4, 8, 9, and 10 of a document contained in the files
named \fIfile1\fR and \fIfile2\fR,
specifies the output terminal as a \s-1DASI\s+1-300S,
and invokes the macro package \fIabc\fR.
.pg
Various pre- and post-processors are available for use with \*(NR and \*[TR.]
These include
the equation preprocessors \fIneqn\fP and \fIeqn\fP\T'ref_2'\*u2\*d\T
(for \*(NR and \*(TR respectively),
the table-construction preprocessor \fItbl\fP\T'ref_3'\*u3\*d\T,
and \fIpic\fP and \fIgrap\fP
for various forms of graphics.
A reverse-line postprocessor \fIcol\fP
is available for multiple-column \*(NR output on terminals without reverse-line ability;
\fIcol\fP expects the Model 37 Teletype
escape sequences that \*(NR produces by default.
\fIcol\fR can optionally also filter the backspace sequences
which \*(NR emits for \T'c_nrofful'underlining\T and
\T'bd'emboldening\T in order to produce a plain text file.
Another option is the \fIul\fR postprocessor
which converts backspace sequences to underline
and reverse video escape sequences
for \s-1CRT\s0 terminals.
.pg
The \fBdpost\fR postprocessor has a special role
as it translates \*(TR intermediate output to \*(PS,
which is currently the only relevant target device format.
.pg
For example, in
.x1
\fBtbl  \fIfiles  \fB|  eqn  |  troff  \fIoptions  \fB|  dpost\fR  >\fIoutput.ps\fR
.x2
the first \|\fB|\fR\| indicates the piping of \fItbl's\fP
output to \fIeqn's\fP input;
the second the piping of \fIeqn's\fP output to \*(TR's input;
and the third indicates the piping of \*(TR's output to \fIdpost,\fP
which then writes \*(PS code to \fIoutput.ps\fR.
.xx
The following options are currently supported with \fIdpost:\fR
.sp
.ta .3i 1.2i
.ft BI
	Option	Effect
.br
.ft R
.ta .3i 1.2i 1.4i
.in 1.2i
.ll -.3i
.bt
	\fB\-e\ \fIencoding\fR	\
Set the \*(PS encoding scheme.
Possible values of \fIencoding\fR are:
.in 1.4i
.ti 0
.xx
		\fB0\fR	using the \*(PS \fBashow\fR operator,
with the same representation as previous
versions of \fIdpost\fR
.ti 0
		\fB1\fR	using \fBashow\fR,
integrating motion commands with text commands
.ti 0
		\fB2\fR	using the \*(PS \fBawidthshow\fR operator,
computing space widths in \*(PS
.ti 0
		\fB3\fR	using \fBawidthshow\fR,
computing space widths in \fIdpost\fR
.ti 0
		\fB4\fR	using \fBashow\fR,
storing text positions as differences
.ti 0
		\fB5\fR	like \fB4\fR but using a binary
\*(PS Level\~2 representation
.in 1.2i
.ti 0
.xx
		The default is device-specific.
\fB3\fR is the default with the
high-resolution \fBps\fR device;
it usually produces the most efficient \*(PS output
and leads to the most compact \*[PDF] documents.
With lower-resolution devices, \fB2\fR is preferred over \fB3\fR
since the latter may produce incorrect alignment
because of accumulated rounding errors.
\fB0\fR, \fB1\fR, or \fB4\fR may be preferable
if the text font contains many kerning pairs
since \fB2\fR or \fB3\fR can result
in less efficient or less compact output
under these circumstances.
.ta .3i 1.2i
.in 1.2i
.ne 4 \" 160210
.bt
	\fB\-M\ \fImarks\fR	\
Print marks (in combination with the \T'trimat'\fBtrimat\fR\T \*(TR request).
Valid types of \fImarks\fR are:
\fBcutmarks\fR,
\fBregistrationmarks\fR,
\fBstartargets\fR,
\fBcolorbars\fR,
and
\fBall\fR.
Mark names can be abbreviated and combined by colons,
e.g. \fB\-Mcut:reg\fR will print cut marks and registration marks.
.\" from file m0a
.ii
.ll 6.5i
.in 0
.bp
.nr nosave 1
.ps \n(PS
.tr |
.ce
.Bookmark 0 "Summary and Index"
.nr mh-level 2
.ft B
\A'part_summary'Request Summary
.ft R
.br
.Bookmark 1 "Request Summary"
.pg
In the following table,
the notation \(+-\fIN\fP in the
\fIRequest Form\fR
column means that the forms \fIN\fR, +\fIN\fR, or \-\fIN\fR are permitted,
to set the parameter to \fIN\fR,
increment it by \fIN\fR,
or decrement it by \fIN\fR,
respectively.
Plain \fIN\fP means that the value is used to set the parameter.
\fIInitial Values\fP separated by \fB;\fP
are for
\*(NR
and
\*(TR
respectively.
In the \fINotes\fP column,
.ft R
.TS
cw(.3i) lw(4i).
B	T{
Request normally causes a break.
The use of \fB\'\fR as control character (instead of \fB.\fR)
suppresses the break function.
T}
D	Mode or relevant parameters associated with current \T'c_diversion'diversion\T level.
E	Relevant parameters are a part of the current environment.
O	Must stay in effect until logical output.
P	Mode must be still or again in effect at the time of physical output.
T	\*(TR only; no effect in \*[NR.]
\fBv\fR,\fBp\fR,\fBm\fR,\fBu\fR	Default scale indicator; if not specified, scale indicators are \fIignored\fR.
.TE
.de mx
.ev 2
.nf
.h1
.in
.sp
.fi
.ev
.ns
..
.xx
.h1
.mht s_general
General Explanation
.bt
\T'do'\fB&do\T\fI|name\fR		ignored	\(en	Execute \fIname\fR in extension level 3.
.b1
.lg 0
\T'xflag'\fB&xflag\T\fI|N\fR	1	ignored	\(en	Set the extension level permanently to \fIN\fP.
.lg
.mht s_font
Font and Character Size Control
.bt
\T'lc_ctype'\fB&lc_ctype\T\fI|name\fR	ignored	\(en	Set the \s-1LC_CTYPE\s+1 locale.
.b1
\T'ps'\fB&ps\T\fI\|\(+-N\fR	10\|point	previous	E,T,\fBp\fR	Point size; also\T \T'e_s'\fB\es\fI\(+-N\fR.
.b1
\T'fzoom'\fB&fzoom\T\fI|F|Z\fR	1	ignored	P,T	Zoom font \fIF\fR by factor \fIZ\fR.
.b1
\T'ss'\fB&ss\T\fI|N\fR|[\fIM\fR]	12/36\|m	ignored	E,T	Space-character size
set to \fIN\fR/36\|em;
sentence space \fIM\fR/36\|em.
.b1
\T'cs'\fB&cs\T\fI\|F\|N\|M\fR	off	\(en	P,T	Constant character
space (width)
mode (font \fIF\^\fR\^).
.b1
\T'bd'\fB&bd\T\fI|F|N\fR	off	\(en	P,T	Embolden font \fIF\fR by \fIN\fR\(mi1 units.
.b1
\T'bd'\fB&bd\T|S|\fIF|N\fR	off	\(en	P,T	Embolden Special Font when current font is \fIF\fR.
.b1
\T'ft'\fB&ft\T\fI|F\fR	Roman	previous	E	Change to font
\fIF\fR|= \fIx\fR, \fIxx\fR, or 1-4.
Also \T's_f'\fB\ef\fIx\fR,\|\fB\ef(\fIxx\fR,\|\fB\ef\fIN\fR\T.
.b1
\T'fp'\fB&fp\T|\fIN|F|\fR[\fIfile|\fR[\fIsupply\fR]]	ignored	P	Font position; mounts the font \fIfile\fR.
.b1
\T'fps'\fB&fps\T\fI|map|...\fR		ignored	P,T	Mount a font with a special character map.
.b1
\T'feature'\fB&feature\T\fI|F|\(+-name|...\fR	ignored	P,T	Control OpenType features.
.b1
\T'fallback'\fB&fallback\T\fI|F|A|B|...\fR	ignored	P,T	Select the fallback sequence for font \fIF\fR.
.b1
\T'hidechar'\fB&hidechar\T\fI|F|c|d|...\fR	ignored	P,T	Hide the characters \fIc\fR, \fId\fR, etc. from font F.
.b1 0
\T'spacewidth'\fB&spacewidth\T\fI|\fIN\fR	on	O,T	If \fIN\fR\(!=0, use the space width from the font metrics file.
.b1 0
\T'fspacewidth'\fB&fspacewidth\T\fI|F|\fR[\fIN\fR]	ignored	O,T	Set the width
of the space character in font \fIF\fR to \fIN\fR.
.mht s_page
Page Control
.bt
\T'pl'\fB&pl\T\fI\|\(+-N\fR	11i	11i	\fBv\fR	Page length.
.b1
\T'papersize'\fB&papersize\T\fI|media\fR	ignored	T,\fBu\fR	Set the paper size.
.b1
\T'mediasize'\fB&mediasize\T\fI|media\fR	ignored	T,\fBu\fR	Set the device media size.
.b1
\T'cropat'\fB&cropat\T\fI|L|T|W|H\fR	ignored	T,\fBp\fR	Set the ``CropBox'' page parameter for \*[PDF] generation.
.b1
\T'trimat'\fB&trimat\T\fI|L|T|W|H\fR	ignored	T,\fBp\fR	Set the ``TrimBox'' page parameter for \*[PDF] generation.
.b1
\T'bleedat'\fB&bleedat\T\fI|L|T|W|H\fR	ignored	T,\fBp\fR	Set the ``BleedBox'' page parameter for \*[PDF] generation.
.b1
\T'bp'\fB&bp\T|\fI\(+-N\fR	\fIN\(eq\fR1	\(en	B	\
Eject current page; next page number \fIN\fR.
.b1
\T'pn'\fB&pn\T\fI|\(+-N	N\(eq\fR1	ignored	\(en	Next page number \fIN\fR.
.b1
\T'po'\fB&po\T\fI|\(+-N\fR	0;1i	previous	\fBm\fR	Page offset.
.b1
\T'ne'\fB&ne\T\fI|N\fR	\(en	\fIN\(eq\fR1v	D,\fBv\fR	Need \fIN\fR vertical space (\fIV\fR = vertical spacing).
.b1 0
\T'mk'\fB&mk\T|\fIR\fR	none	internal	D	Mark current vertical place in register \fIR\fR.
.b1 0
\T'rt'\fB&rt\T\fI|\(+-N\fR	none	internal	D,\fBv\fR	Return \fI(upward only)\fR to marked vertical place.
.mht s_fill
Text Filling, Adjusting, and Centering
.bt
\T'br'\fB&br\T\fR	\(en	\(en	B	Break.
.b1
\T'lsm'\fB&lsm\T\fI|xx\fR	none	none	\(en	Leading space macro is \fIxx\fR.
.b1
\T'brp'\fB&brp\T\fR	\(en	\(en	B	Break and spread.
.b1
.lg 0
\T'fi'\fB&fi\T\fR	\(fill	\(en	B,E	Fill output lines.
.lg
.b1
\T'nf'\fB&nf\T\fR	fill	\(en	B,E	No filling or adjusting of output lines.
.b1
\T'ad'\fB&ad\T\fI|c\fR	adj,both	adjust	E	Adjust output lines with mode \fIc\fR; \fIc\fP\^=\^l,\^r,\^c,\^b,\^p,\^\fInone\fP
.b1
\T'na'\fB&na\T\fR	adjust	\(en	E	No output line adjusting.
.b1
\T'padj'\fB&padj\T\fI|N\fR	off	on	\(en	Control paragraph-at-once adjustment globally.
.b1
\T'ce'\fB&ce\T\fI|N\fR	off	\fIN\(eq\fR1	B,E	Center following \fIN\fR input text lines.
.b1
\T'rj'\fB&rj\T\fI|N\fR	off	\fIN\(eq\fR1	B,E	Right-align following \fIN\fR input text lines.
.b1
\T'brnl'\fB&brnl\T\fI|N\fR	off	\fIN\(eq\fR\(if	B,E	Break at end of next \fIN\fR input text lines.
.b1
\T'brpnl'\fB&brpnl\T\fI|N\fR	off	\fIN\(eq\fR\(if	B,E	Break and spread at end of next \fIN\fR input text lines.
.b1
\T'minss'\fB&minss\T\fI|N\fR	off	off	E,T	Minimum word space when adjusting lines.
.b1
\T'letadj'\fB&letadj\T\fI|X|U|S|Y|V\fR	off	E,T	Dynamic letter spacing and reshaping when adjusting lines.
.b1
\T'sentchar'\fB&sentchar\T\fI|c...\fR	\fB.?!:\fR	off	E	Sentence-ending characters.
.b1
\T'transchar'\fB&transchar\T\fI|c..\fR	\fB"')]*\(dg\fR	off	E	Transparent characters for sentence-ending.
.b1
\T'track'\fB&track\T\fI|F|S|N|T|M\fR	ignored	P,T,\fBp\fR	Static letter space tracking.
.b1
\T'kern'\fB&kern\T\fI|N\fR	1	1	P,T	Control pairwise kerning.
.b1
\T'fkern'\fB&fkern\T\fI|F|N\fR	1	1	P,T	Control the use of kerning tables from font \fIF\fR.
.b1
\T'kernpair'\fB&kernpair\T\fI|F|c...|G|d...|N\fR	ignored	P,T	Define a kerning pair.
.b1
\T'kernafter'\fB&kernafter\T\fI|F|c...|N|d...|M|...\fR	P,T	Add a constant amount of space after a character.
.b1
\T'kernbefore'\fB&kernbefore\T\fI|F|c...|N|d...|M|...\fR	P,T	Add a constant amount of space before a character.
.b1 0
\T'lhang'\fB&lhang\T\fI|F|c...|N|d...|M|...\fR	ignored	T	Hanging characters at left margin.
.b1 0
\T'rhang'\fB&rhang\T\fI|F|c...|N|d...|M|...\fR	ignored	T	Hanging characters at right margin.
.mht s_vert
Vertical Spacing
.bt
\T'vs'\fB&vs\T\fI|N\fR	1/6in;12pts	previous	E,\fBp\fR	Vertical base line spacing (\fIV\fR\^).
.b1
\T'ls'\fB&ls\T\fI|N	N\(eq\fR1	previous	E	Output \fIN\(mi\fR1 \fIV\^\fRs after each text output line.
.b1
\T'sp'\fB&sp\T\fI|N\fR	\(en	\fIN\(eq\fR1\fIV\fR	B,\fBv\fR	Space \
vertical distance \fIN\fR \fIin either direction\fR.
.b1
\T'sv'\fB&sv\T\fI|N\fR	\(en	\fIN\(eq\fR1\fIV\fR	\fBv\fR	Save vertical distance \fIN\fR.
.b1
\T'os'\fB&os\T\fR	\(en	\(en	\(en	Output saved vertical distance.
.b1 0
\T'ns'\fB&ns\T\fR	space	\(en	D	Turn no-space mode on.
.b1 0
\T'rs'\fB&rs\T\fR	\(en	\(en	D	Restore spacing; turn no-space mode off.
.mht s_line
Line Length and Indenting
.bt
\T'll'\fB&ll\T\fI|\(+-N\fR	6.5\|i	previous	E,\fBm\fR	Line length.
.b1
\T'in'\fB&in\T\fI|\(+-N\fR	\fIN\(eq\fR\^0	previous	B,E,\fBm\fR	Indent.
.b1 0
\T'ti'\fB&ti\T\fI|\(+-N\fR	\(en	ignored	B,E,\fBm\fR	Temporary indent.
.b1 0
\T'pshape'\fB&pshape\T\fI|\(+-I1|\(+-L1|\(+-I2|\(+-L2|\fR...|off	E,\fBm\fR	Define the shape of the current paragraph in \fBad p\fR mode.
.mht s_mac
Macros, Strings, Diversion, and Position Traps
.bt
\T'de'\fB&de\T\fI|xx|yy\fR	\(en	\fI.yy=\fB..\fR	\(en	Define or redefine macro \fIxx;\fR end at call of \fIyy\fR.
.b1
\T'am'\fB&am\T\fI|xx|yy\fR	\(en	\fI.yy=\fB..\fR	\(en	Append to a macro.
.b1
\T'ds'\fB&ds\T\fI|xx|string\fR	\(en	ignored	\(en	Define a string \fIxx\fR containing \fIstring\fR.
.b1
\T'as'\fB&as\T\fI|xx|string\fR	\(en	ignored	\(en	Append \fIstring\fR to string \fIxx\fR.
.b1
\T'lds'\fB&lds\T\fI|xx|string\fR	\(en	ignored	\(en	Define local string \fIxx\fR containing \fIstring\fR.
.b1
\T'substring'\fB&substring\T\fI|xx|N|\fR[\fIM\fR]	\fIM\fR\(eq\|\(mi1	\(en	Replace string \fIxx\fR by its substring between \fIN\fR and \fIM\fR.
.b1
\T'length'\fB&length\T\fI|R|string\fR	\fIR\fR|set|to|0	\(en	Store the length of \fIstring\fR in register \fIR\fR.
.b1
\T'index'\fB&index\T\fI|R|xx|string\fR	ignored	\(en	Store position where \fIstring\fR occurs in \fIxx\fR in register \fIR\fR.
.b1
\T'chop'\fB&chop\T\fI|xx\fR	\(en	ignored	\(en	Remove the last character of \fIxx\fR.
.b1
\T'rm'\fB&rm\T\fI|xx\fR	\(en	ignored	\(en	Remove request, macro, or string.
.b1
\T'rn'\fB&rn\T\fI|xx|yy\fR	\(en	ignored	\(en	Rename request, macro, or string \fIxx\fR to \fIyy\fR.
.b1
\T'di'\fB&di\T\fI|xx\fR	\(en	end	D	Divert output to macro \fIxx\fR.
.b1
\T'da'\fB&da\T\fI|xx\fR	\(en	end	D	Divert and append to \fIxx\fR.
.b1
\T'box'\fB&box\T\fI|xx\fR	\(en	end	D	Divert output to macro \fIxx\fR, excluding a partially filled line.
.b1
\T'boxa'\fB&boxa\T\fI|xx\fR	\(en	end	D	Divert and append to \fIxx\fR, excluding a partially filled line.
.b1
\T'unformat'\fB&unformat\T\fI|xx\fR	\(en	ignored	\(en	Strip line break information from diversion \fIxx\fR.
.b1
\T'asciify'\fB&asciify\T\fI|xx\fR	\(en	ignored	\(en	All characters in diversion \fIxx\fR changed to plain text.
.b1
\T'wh'\fB&wh\T\fI|N|xx\fR	\(en	\(en	\fBv\fR	Set location trap; negative is w.r.t. page bottom.
.b1
\T'ch'\fB&ch\T\fI|xx|N\fR	\(en	\(en	\fBv\fR	Change trap location.
.b1
\T'dwh'\fB&dwh\T\fI|N|xx\fR	\(en	\(en	D,\fBv\fR	Set location trap in current diversion.
.b1
\T'dch'\fB&dch\T\fI|xx|N\fR	\(en	\(en	D,\fBv\fR	Change trap location in current diversion.
.b1
\T'dt'\fB&dt\T\fI|N|xx\fR	\(en	off	D,\fBv\fR	Set a diversion trap.
.b1
\T'vpt'\fB&vpt\T\fI|N\fR	1	ignored	\(en	Enable or disable vertical position traps.
.b1
\T'it'\fB&it\T\fI|N|xx\fR	\(en	off	E	Set an input-line count trap.
.b1
\T'itc'\fB&itc\T\fI|N|xx\fR	\(en	off	E	Input-line count trap ignoring \fB\ec\fR.
.b1
\T'return'\fB&return\T\fR	\(en	\(en	\(en	Return from the current macro.
.b1
\T'shift'\fB&shift\T\fI|N\fR	\(en	1	\(en	Shift the arguments to the current macro.
.b1
\T'als'\fB&als\T\fI|yy|xx\fR	\(en	\(en	\(en	\fIyy\fR is created as an alias for \fIxx\fR.
.b1
\T'blm'\fB&blm\T\fI|xx\fR	none	none	\(en	Blank line macro is \fIxx\fR.
.b1 0
\T'em'\fB&em\T\fI|xx\fR	none	none	\(en	End macro is \fIxx\fI.
.b1 0
\T'recursionlimit'\fB&recursionlimit\T\fI|N|M\fR	\(en	\(en	Set the maximum stack depth.
.mht s_reg
Number Registers
.bt
\T'nr'\fB&nr\T\fI|R|\(+-N|M\fR		\(en	\fBu\fR	Define and set number register \fIR\fR; auto-increment by \fIM\fR.
.b1
\T'nrf'\fB&nrf\T\fI|R|\(+-F|G\fR		\(en	\fBu\fR	Define and set floating-point register \fIR\fR; auto-increment by \fIG\fR.
.b1
\T'lnr'\fB&lnr\T\fI|R|\(+-N|M\fR		\(en	\fBu\fR	Define and set local number register \fIR\fR.
.b1
\T'lnrf'\fB&lnrf\T\fI|R|\(+-F|G\fR		\(en	\fBu\fR	Define and set local floating-point register \fIR\fR.
.b1
\T'af'\fB&af\T\fI|R|c\fR	arabic	\(en	\(en	Assign format to register \fIR\fR (\fIc=\fB1\fR, \fBi\fR, \fBI\fR, \fBa\fR, \fBA\fR).
.b1
\T'rr'\fB&rr\T\fI|R\fR	\(en	\(en	\(en	Remove register \fIR\fR.
.b1 0
\T'rnn'\fB&rnn\T\fI|R|S\fR	\(en	\(en	\(en	Rename register \fIR\fR to \fIS\fR.
.b1 0
\T'aln'\fB&aln\T\fI|S|R\fR	\(en	\(en	\(en	Register \fIS\fR is created as an alias for \fIR\fR.
.mht s_tabs
Tabs, Leaders, and Fields
.bt
\T'ta'\fB&ta\T\fI|Nt|...\fR	8\|n;|0.5\|i	none	E,\fBm\fR	Tab settings; \fIleft\fR type, unless \fIt=\fBR\fR(right), \fBC\fR(centered).
.b1
\T'tc'\fB&tc\T\fI|c\fR	none	none	E	Tab repetition character.
.b1 0
\T'lc'\fB&lc\T\fI|c\fR	\fB.\fR	none	E	Leader repetition character.
.b1 0
\T'fc'\fB&fc\T\fI|a|b\fR	off	off	\(en	Set field delimiter \fIa\fR and pad character \fIb\fR.
.mht s_trans
Input and Output Conventions and Character Translations
.bt
\T'ec'\fB&ec\T\fI|c\fR	\e	\e	\(en	Set escape character.
.b1
\T'eo'\fB&eo\T\fR	on	\(en	\(en	Turn off escape character mechanism.
.b1
\T'ecs'\fB&ecs\T\fR	\e	\(en	\(en	Save escape character.
.b1
\T'ecr'\fB&ecr\T\fR	\e	\(en	\(en	Restore saved escape character.
.b1
\T'escoff'\fB&escoff\T \fIesc ...\fR	on	ignored	\(en	\
Disable escapes \fIesc \&...\|\fR.
.b1
\T'escon'\fB&escon\T \fIesc ...\fR	on	ignored	\(en	\
Enable escapes \fIesc \&...\|\fR.
.b1
\T'lg'\fB&lg\T\fI|N\fR	\(en;\|on	on	T	Ligature mode
on if \fIN\fR>0.
.b1
.lg 0
\T'flig'\fB&flig\T\fI|F|string|c|...\fR	ignored	T	De\(fine the ligatures in font \fIF\fR.
.lg
.b1
\T'fdeferlig'\fB&fdeferlig\T\fI|F|string|...\fR	ignored	T	Defer ligature building for the first character of \fIstring\fR.
.b1
\T'ul'\fB&ul\T\fI|N\fR	off	\fIN\(eq\fR1	E	Underline (italicize in \*(TR) \fIN\fR input lines.
.b1
\T'cu'\fB&cu\T\fI|N\fR	off	\fIN\(eq\fR1	E	Continuous underline in \*[NR;] like \fBul\fR in \*[TR.]
.b1
\T'uf'\fB&uf\T\fI|F\fR	Italic	Italic	\(en	Underline font set to \fIF\fR (to be switched to by \fBul\fR).
.b1
\T'cc'\fB&cc\T\fI|c\fR	\fB.	.\fR	E	Set control character to \fIc\fR.
.b1
\T'c2'\fB&c2\T\fI|c\fR	\fB\'	\'\fR	E	Set nobreak control character to \fIc\fR.
.b1
\T'tr'\fB&tr\T\fI|abcd....\fR	none	\(en	O	Translate \fIa\fR to \fIb\fR, etc. on output.
.b1
\T'trin'\fB&trin\T\fI|abcd....\fR	none	\(en	O	Translate but retranslate with \fBasciify\fR.
.b1
\T'trnt'\fB&trnt\T\fI|abcd....\fR	none	\(en	O	Translate but not on transparent lines.
.b1
\T'ftr'\fB&ftr\T\fI|F|abcd....\fR	none	\(en	P,T	Font-specific \fBtr\fR.
.b1
\T'char'\fB&char\T\fI|c|string\fR		ignored	\(en	Define character \fIc\fR to \fIstring\fR.
.b1
\T'fchar'\fB&fchar\T\fI|c|string\fR	ignored	T	Define fallback for character \fIc\fR to \fIstring\fR.
.b1 0
\T'rchar'\fB&rchar\T\fI|c...\fR		ignored	\(en	Remove character definitions for \fIc...\fR.
.b1 0
\T'utf8conv'\fB&utf8conv\T\fI|c1|c2\fR	ignored	\(en	\*(NR \*[UTF] locale character translation.
.b1 0
\T'output'\fB&output\T\fI|string\fR		ignored	\(en	Write \fIstring\fR directly to intermediate output.
.br
.nr nosave 1
.ne 4
.nr nosave 0
.mht s_mot
Local Horizontal and Vertical Motions, and the Width Function
.mht s_draw
Overstrike, Bracket, Line-drawing, Graphics, and Zero-width Functions
.bt
\T'connectchar'\fB&connectchar\T\fI|c..\fR	\fB"\e(ru\e(ul\e(rn\fR	off	E	Connected characters for line drawing.
.mht s_hyphen
Hyphenation.
.bt
\T'nh'\fB&nh\T\fR	hyphenate	\(en	E	No hyphenation.
.b1
\T'hy'\fB&hy\T\fI|N\fR	hyphenate	hyphenate	E	Hyphenate; \fIN =\fR mode.
.b1
\T'hylang'\fB&hylang\T\fI|name\fR	off	off	E	Set the hyphenation language.
.b1
\T'shc'\fB&shc\T\fI|c\fR	\(hy	\(hy	E	Set the soft hyphenation character.
.b1
\T'hcode'\fB&hcode\T\fI|abcd...\fR	\(en	E	Hyphenation code of \fIa\fR is \fIb\fR, etc.
.b1
\T'hylen'\fB&hylen\T\fI|N\fR	5	5	E	Hyphenate only words of at least \fIN\fR characters in length.
.b1
\T'hlm'\fB&hlm\T\fI|N\fR	off	off	E	Maximum number of consecutive hyphenated lines.
.b1
\T'hypp'\fB&hypp\T\fI|N|M|L\fR	0|0|0	0|0|0	E	Define hyphenation penalties for \fBad p\fR mode.
.b1
\T'breakchar'\fB&breakchar\T\fI|c.\fR	\fB\(hy\(em\fR	off	E	Optional line break characters.
.b1
\T'nhychar'\fB&nhychar\T\fI|c...\fR	\fB\(hy\(em\fR	off	E	Hyphenation-inhibiting characters.
.b1 0
\T'hc'\fB&hc\T\fI|c\fR	\fB\e%	\e%\fR	E	Hyphenation indicator character \fIc\fR.
.b1 0
\T'hw'\fB&hw\T\fI|word|...\fR	\(en	ignored	\(en	Add words to hyphenation dictionary.
.mht s_titles
Three-Part Titles.
.bt
\T'tl'\fB&tl\T\fI|\'left\'center\'right\'\fR	\(en	\(en	Three part title; delimiter may be any character.
.b1 0
\T'pc'\fB&pc\T\fI|c\fR	\fB%\fR	off	\(en	Page number character.
.b1 0
\T'lt'\fB&lt\T\fI|\(+-N\fR	6.5\|in	previous	E,\fBm\fR	Length of title.
.mht s_onl
Output Line Numbering.
.bt
\T'nm'\fB&nm\T\fI|\(+-N|M|S|I\fR	off	E	Number mode on or off, set parameters.
.b1 0
\T'nn'\fB&nn\T\fI|N\fR	\(en	\fIN\(eq\fR1	E	Do not number next \fIN\fR lines.
.mht s_cond
Conditional Acceptance of Input
.bt
\T'if'\fB&if\T\fI|c|anything\fR		\(en	\(en	If condition \fIc\fR true, accept \fIanything\fR as input,
.b1
				for multi-line use \fI\e{anything\|\e}\fR.
.b1
\T'if'\fB&if\T|!\fIc|anything\fR	\(en	\(en	If condition \fIc\fR false, accept \fIanything\fR.
.b1
\T'if'\fB&if\T\fI|N|anything\fR		\(en	\fBu\fR	If expression \fIN\fR > 0, accept \fIanything\fR.
.b1
\T'if'\fB&if\T|!\fIN|anything\fR	\(en	\fBu\fR	If expression \fIN\fR \(<= 0 [sic], accept \fIanything\fR.
.b1
\T'if'\fB&if\T|f\fIF|anything\fR	\(en	\fBu\fR	If floating-point expression \fIF\fR > 0, accept \fIanything\fR.
.b1
\T'if'\fB&if\T|!f\fIF|anything\fR	\(en	\fBu\fR	If floating-point expression \fIF\fR \(<= 0 [sic], accept \fIanything\fR.
.b1
\T'if'\fB&if\T\fI|\'string1\'string2\'|anything\fR	\(en	If \fIstring1\fR identical to \fIstring2\fR,
accept \fIanything\fR.
.b1
\T'if'\fB&if\T|!\fI\|\'string1\'string2\'|anything\fR	\(en	If \fIstring1\fR not identical to \fIstring2\fR,
accept \fIanything\fR.
.b1
\T'ie'\fB&ie\T\fI|c|anything\fR		\(en	\fBu\fR	If portion of if-else; all above forms (like \fBif\fR).
.b1
\T'el'\fB&el\T\fI|anything\fR		\(en	\(en	Else portion of if-else.
.b1
\T'while'\fB&while\T\fI|c|anything\fR	\(en	\(en	Execute \fIanything\fR while \fIc\fR (like \fBif\fR) is true.
.b1 0
\T'break'\fB&break\T\fI|n\fR	\(en	1	\(en	Break out of \fIn\fR nested \fBwhile\fR loops.
.b1 0
\T'continue'\fB&continue\T\fI|n\fR	\(en	1	\(en	Continue at the \fIn\fR-th nested \fBwhile\fR loop.
.mht s_env
Environment Switching.
.bt
\T'ev'\fB&ev\T\fI|name\fR	\fIname\(eq\fR0	previous	\(en	Environment switched (\fIpush down\fR).
.b1 0
\T'evc'\fB&evc\T\fI|name\fR		\(en	\(en	Copy environment \fIname\fR to the current environment.
.mht s_stdin
Insertions from the Standard Input
.bt
\T'rd'\fB&rd\T\fI|prompt\fR\fR	\(en	\fIprompt=\s-1\fRBEL\s+1	\(en	Read insertion.
.b1 0
\T'ex'\fB&ex\T\fR	\(en	\(en	\(en	\
Exit from \*(NR/\*[TR.]
.mht s_io
Input/Output File Switching
.bt
\T'so'\fB&so\T\fI|filename\fR		\(en	\(en	Switch source file \fI(push down)\fR.
.b1
\T'pso'\fB&pso\T\fI|string\fR		\(en	\(en	Execute \fIstring\fR and read its output.
.b1
\T'nx'\fB&nx\T\fI|filename\fR		end-of-file	\(en	Next file.
.br
\T'sy'\fB&sy\T\fI|string\fR		\(en	\(en	Execute program \fIstring\fP. Output not interpolated.
.b1
\T'pi'\fB&pi\T\fI|string\fR		\(en	\(en	Pipe output to program \fIstring\fP.
.b1
\T'cf'\fB&cf\T\fI|filename\fR		\(en	\(en	Copy file contents to \*(TR output.
.b1
\T'open'\fB&open\T\fI|stream|filename\fR	ignored	\(en	Open \fIfilename\fR as \fIstream\fR, truncating.
.b1
\T'opena'\fB&opena\T\fI|stream|filename\fR	ignored	\(en	Open \fIfilename\fR as \fIstream\fR, appending.
.b1
\T'write'\fB&write\T\fI|stream|text\fR	ignored	\(en	Write \fItext\fR to file \fIstream\fR.
.b1
\T'writec'\fB&writec\T\fI|stream|text\fR	ignored	\(en	Write \fItext\fR without terminating newline.
.b1 0
\T'writem'\fB&writem\T\fI|stream|xx\fR	ignored	\(en	Write contents of string, macro, or diversion \fIxx\fR.
.b1 0
\T'close'\fB&close\T\fI|stream\fR		\(en	\(en	Close the file \fIstream\fR.
.mht s_misc
Miscellaneous
.bt
\T'mc'\fB&mc\T\fI|c|N\fR	\(en	off	E,\fBm\fR	Set margin character \fIc\fR and separation \fIN\fR.
.b1
\T'lpfx'\fB&lpfx\T\fI|string\fR	off	off	E	Set line prefix to \fIstring\fR.
.b1
\T'tm'\fB&tm\T\fI|string\fR	\(en	newline	\(en	Print \fIstring\fR on terminal (standard error).
.b1
\T'tmc'\fB&tmc\T\fI|string\fR	\(en	newline	\(en	Print \fIstring\fR without newline on terminal.
.b1
\T'nop'\fB&nop\T\fI|remainder of line\fR	\(en	\(en	Use \
\fIremainder of line\fR as input.
.b1
\T'chomp'\fB&chomp\T\fI|remainder of line\fR	\(en	\(en	Use \
\fIremainder of line without newline\fR as input.
.b1
\T'ab'\fB&ab\T\fI|string\fR	\(en	newline	\(en	Print \fIstring\fR on standard error, exit program.
.b1
\T'ig'\fB&ig\T\fI|yy\fR	\(en	\fI.yy=\fB..\fR	\(en	Ignore till call of \fIyy\fR.
.b1
\T'lf'\fB&lf\T\fI|N|f\fR		\(en	\(en	Set input line number to \fIN\fP and filename to \fIf\fP.
.b1
\T'pm'\fB&pm\T\fI|t\fR	\(en	all	\(en	Print macro names and sizes;
.b1
				if \fIt\fR present, print only total of sizes.
.b1 0
.lg 0
\T'fl'\fB&fl\T\fR	\(en	\(en	B	Flush output buffer.
.lg
.mht s_err
Output and Error Messages, Debugging
.bt
\T'warn'\fB&warn\T\fI|\(+-bits\(or\^name\fR	\fIw\fR	\(en	Control warning messages.
.b1
\T'spreadwarn'\fB&spreadwarn\T\fI|N\fR	toggle	\fBm\fR	Spread limit warning.
.b1
\T'errprint'\fB&errprint\T\fI|string\fR	newline	\(en	Print \fIstring\fR like an error message.
.b1
\T'watch'\fB&watch\T\fI|xx\fR	off	ignore	\(en	Notify on change of string or macro \fIxx\fR.
.b1
\T'unwatch'\fB&unwatch\T\fI|xx\fR	off	ignore	\(en	Disable notification for string or macro \fIxx\fR.
.b1
\T'watchlength'\fB&watchlength\T\fI|N\fR	ignore	\(en	On change, report contents up to length \fIN\fR.
.b1 0
\T'watchn'\fB&watchn\T\fI|R\fR	off	ignore	\(en	Notify on change of register \fIR\fR.
.b1 0
\T'unwatchn'\fB&unwatchn\T\fI|R\fR	off	ignore	\(en	Disable notification for register \fIR\fR.
.mht s_color
Color Support
.bt
\T'CL'\fB&CL\T\fI|color|text\fR	\s-1RGB\s+1|black	\(en	Print \fItext\fR in \fIcolor\fR.*
.mht s_pics
Picture Inclusion
.bt
\T'psbb'\fB&psbb\T\fI|filename\fR	\(en	\(en	Read the \*(PS bounding box from \fIfilename\fR.
.b1
\T'BP'\fB&BP\T\fI|source|height|width|position|offset|flags|label\fR	Define a frame and place a picture in it.*
.b1 0
\T'EP'\fB&EP\T\fR	\(en	\(en	\(en	End a picture started by \fB&BP\fR.*
.b1 0
\T'PI'\fB&PI\T\fI|source|height\fB,\fIwidth\fB,\fIyoffset\fB,\fIxoffset|flags\fR	Low-level picture inclusion.*
.br
.ne 8
.mht s_pdf
Special Features for \*[PDF] Documents
.mht s_groff
\f(BIgroff\fP Compatibility
.bt 0
\T'cp'\fB&cp\T\fI|N\fR	off	\(en	\(en	Enable \*(GR compatibility mode.
.b1 0
\T'mso'\fB&mso\T\fI|name\fR	\(en	ignored	\(en	Include the macro package \fIname\fR.*
.mht s_output
Output Language
.mht s_device
Device and Font Description Files
.br
.fn
.sp .3
\(**\|Defined as a macro in an external package;
refer to the detailed description on how to include it.
.ef
.rm mx
.bp
.nf
.ft R
.di zz
.ta 12nR
.nf
.ps 8
.vs 10
.tc .
\T'ab'ab\T	20
\T'ad'ad\T	4
\T'af'af\T	8
\T'aln'aln\T	8
\T'als'als\T	7
\T'am'am\T	7
\T'as'as\T	7
\T'asciify'asciify\T	7
\T'bd'bd\T	2
\T'bleedat'bleedat\T	3
\T'blm'blm\T	7
\T'box'box\T	7
\T'boxa'boxa\T	7
\T'bp'bp\T	3
\T'BP'BP\T	23
\T'br'br\T	4
\T'break'break\T	16
\T'breakchar'breakchar\T	13
\T'brnl'brnl\T	4
\T'brp'brp\T	4
\T'brpnl'brpnl\T	4
\T'c2'c2\T	10
\T'cc'cc\T	10
\T'ce'ce\T	4
\T'cf'cf\T	19
\T'ch'ch\T	7
\T'char'char\T	10
\T'chomp'chomp\T	20
\T'chop'chop\T	7
\T'close'close\T	19
\T'CL'CL\T	22
\T'connectchar'connectchar\T	12
\T'continue'continue\T	16
\T'cp'cp\T	25
\T'cropat'cropat\T	3
\T'cs'cs\T	2
\T'cu'cu\T	10
\T'da'da\T	7
\T'dch'dch\T	7
\T'de'de\T	7
\T'di'di\T	7
\T'do'do\T	1
\T'ds'ds\T	7
\T'dwh'dwh\T	7
\T'dt'dt\T	7
\T'ec'ec\T	10
\T'ecs'ecs\T	10
\T'ecr'ecr\T	10
\T'el'el\T	16
\T'em'em\T	7
\T'eo'eo\T	10
\T'EP'EP\T	23
\T'errprint'errprint\T	21
\T'escoff'escoff\T	10
\T'escon'escon\T	10
\T'ev'ev\T	17
\T'evc'evc\T	17
\T'ex'ex\T	18
\T'fallback'fallback\T	2
\T'fc'fc\T	9
\T'fchar'fchar\T	10
\T'fdeferlig'fdeferlig\T	10
\T'feature'feature\T	2
\T'fi'fi\T	4
\T'fkern'fkern\T	4
\T'fl'fl\T	20
\T'flig'flig\T	10
\T'fp'fp\T	2
\T'fps'fps\T	2
\T'fspacewidth'fspacewidth\T	2
\T'ft'ft\T	2
\T'fzoom'fzoom\T	2
\T'hc'hc\T	13
\T'hcode'hcode\T	13
\T'hidechar'hidechar\T	2
\T'hlm'hlm\T	13
\T'hw'hw\T	13
\T'hy'hy\T	13
\T'hylang'hylang\T	13
\T'hylen'hylen\T	13
\T'hypp'hypp\T	13
\T'ie'ie\T	16
\T'if'if\T	16
\T'ig'ig\T	20
\T'in'in\T	6
\T'index'index\T	7
\T'it'it\T	7
\T'itc'itc\T	7
\T'kern'kern\T	4
\T'kernafter'kernafter\T	4
\T'kernbefore'kernbefore\T	4
\T'kernpair'kernpair\T	4
\T'lc'lc\T	9
\T'lc_ctype'lc_ctype\T	2
\T'lds'lds\T	7
\T'length'length\T	7
\T'letadj'letadj\T	4
\T'lf'lf\T	20
\T'lg'lg\T	10
\T'lhang'lhang\T	4
\T'li'li\T	10
\T'll'll\T	6
\T'lnr'lnr\T	8
\T'lnrf'lnrf\T	8
\T'lpfx'lpfx\T	20
\T'ls'ls\T	5
\T'lsm'lsm\T	4
\T'lt'lt\T	14
\T'mc'mc\T	20
\T'mediasize'mediasize\T	3
\T'minss'minss\T	4
\T'mk'mk\T	3
\T'mso'mso\T	25
\T'na'na\T	4
\T'ne'ne\T	3
\T'nf'nf\T	4
\T'nh'nh\T	13
\T'nhychar'nhychar\T	13
\T'nm'nm\T	15
\T'nn'nn\T	15
\T'nop'nop\T	20
\T'nr'nr\T	8
\T'nrf'nrf\T	8
\T'ns'ns\T	5
\T'nx'nx\T	19
\T'open'open\T	19
\T'opena'opena\T	19
\T'os'os\T	5
\T'output'output\T	10
\T'padj'padj\T	4
\T'papersize'papersize\T	3
\T'pc'pc\T	14
\T'pi'pi\T	19
\T'PI'PI\T	23
\T'pl'pl\T	3
\T'pm'pm\T	20
\T'pn'pn\T	3
\T'po'po\T	3
\T'ps'ps\T	2
\T'psbb'psbb\T	23
\T'pshape'pshape\T	6
\T'pso'pso\T	19
\T'rchar'rchar\T	10
\T'rd'rd\T	18
\T'recursionlimit'recursionlimit\T	7
\T'return'return\T	7
\T'rhang'rhang\T	4
\T'rj'rj\T	4
\T'rm'rm\T	7
\T'rn'rn\T	7
\T'rnn'rnn\T	8
\T'rr'rr\T	8
\T'rs'rs\T	5
\T'rt'rt\T	3
\T'sentchar'sentchar\T	4
\T'shc'shc\T	13
\T'shift'shift\T	7
\T'so'so\T	19
\T'sp'sp\T	5
\T'spacewidth'spacewidth\T	2
\T'spreadwarn'spreadwarn\T	21
\T'ss'ss\T	2
\T'substring'substring\T	7
\T'sv'sv\T	5
\T'sy'sy\T	19
\T'ta'ta\T	9
\T'tc'tc\T	9
\T'ti'ti\T	6
\T'tl'tl\T	14
\T'tm'tm\T	20
\T'tr'tr\T	10
\T'track'track\T	4
\T'transchar'transchar\T	4
\T'trimat'trimat\T	3
\T'trin'trin\T	10
\T'trnt'trnt\T	10
\T'uf'uf\T	10
\T'ul'ul\T	10
\T'unformat'unformat\T	7
\T'unwatch'unwatch\T	21
\T'unwatchn'unwatchn\T	21
\T'utf8conv'utf8conv\T	10
\T'vpt'vpt\T	7
\T'vs'vs\T	5
\T'warn'warn\T	21
\T'watch'watch\T	21
\T'watchlength'watchlength\T	21
\T'watchn'watchn\T	21
\T'wh'wh\T	7
\T'while'while\T	16
\T'write'write\T	19
\T'writec'writec\T	19
\T'writem'writem\T	19
\T'xflag'xflag\T	1
.tc
.di
.nr zz 5
.nr zo \n(dl+((\n(.l-(\n(zz*\n(dl))/(\n(zz-1))
.de cl
.ie \\n+(cl<\n(zz \{\
.	po +\\n(zou
.	rt\}
.el \{.po \\n(POu\}
..
.nr cl 0 1
.nr aa \n(dn/\n(zz
.ne \n(aau+10p
.sp
.ft B
Alphabetical Request and Section Number Cross Reference
.ft
.br
.Bookmark 1 "Alphabetical Request and Section Number Cross Reference"
.sp .3
.wh \n(nlu+\n(aau cl
.nr qq \n(nlu+\n(aau
.ps
.vs
.mk
.zz
.rt
.sp \n(.tu
.ch cl 12i
.sp
.bp
.nf
.ft B
Escape Sequences for Characters, Indicators, and Functions
.ft R
.br
.Bookmark 1 "Escape Sequences for Characters, Indicators, and Functions"
.xx
.sp -1
.TS
c2l
c2l2l
n2l2l.
.ft BI
Section	Escape
Reference	Sequence	Meaning
.ft R
.xx
\T'e_esc'10.1\T	\T'e_esc'\fB\e\e\fR\T	\T'e_esc'\e (to prevent or delay the interpretation of \e\|)\T
\T'e_acute'2.1\T	\T'e_acute'\fB\e\'\fR\T	\T'e_acute'\' (acute accent); equivalent to \fB\e(aa\fR\T
\T'e_grave'2.1\T	\T'e_grave'\fB\e\`\fR\T	\T'e_grave'\` (grave accent); equivalent to \fB\e(ga\fR\T
\T'e_-'2.1\T	\T'e_-'\fB\e\-\fR\T	\T'e_-'\- Minus sign in the \fIcurrent\fR font\T
\T'e__'12.4\T	\T'e__'\fB\e_\fR\T	\T'e__'\_ (underrule character); equivalent to \fB\e(ul\fR\T
\T'e_.'7\T	\T'e_.'\fB\e\^.\fR\T	\T'e_.'Period (dot) (see \fBde\fR)\T
\T'e_ '4.1\T	\T'e_ '\fB\e\fR(space)\T	\T'e_ 'Unpaddable space-size space character\T
\T'e_~'4.1\T	\T'e_~'\fB\e\(ap\fR\T	\T'e_~'Paddable no-break space character\T
\T'e_0'11.1\T	\T'e_0'\fB\e0\fR\T	\T'e_0'Digit width space\T
.tr ||
\T'e_|'11.1\T	\T'e_|'\fB\e\||\fR\T	\T'e_|'1/6\|em narrow space character (zero width in \*(NR)\T
.tr |
\T'e_^'11.1\T	\T'e_^'\fB\e^\fR\T	\T'e_^'1/12\|em half-narrow space character (zero width in \*(NR)\T
.tr &&
\T'e_&'4.1\T	\T'e_&'\fB\e&\fR\T	\T'e_&'Non-printing, zero width character\T
.tr &.
\T'e_)'4.1\T	\T'e_)'\fB\e)\fR\T	\T'e_)'Transparent non-printing zero width character\T
\T'e_!'10.6\T	\T'e_!'\fB\e!\fR\T	\T'e_!'Transparent line indicator\T
\T'e_"'10.8\T	\T'e_"'\fB\e"\fR\T	\T'e_"'Beginning of comment\T
\T'e_#'10.8\T	\T'e_#'\fB\e#\fR\T	\T'e_#'Comment including newline\T
\T'e_$'7.3\T	\T'e_$'\fB\e$\fIn\fR,\fB\e$(\fInn\fR,\fB\e$[\fInnn\fB]\fR\T	\T'e_$'Interpolate argument \fIn\fR, \fInn\fR, or \fInnn\fR\T
\T'e_$*'7.3\T	\T'e_$*'\fB\e$\(**\fR\T	\T'e_$*'Interpolate all arguments separated by spaces\T
\T'e_$@'7.3\T	\T'e_$@'\fB\e$@\fR\T	\T'e_$@'Interpolate all arguments in double quotes\T
\T'e_$0'7.3\T	\T'e_$0'\fB\e$0\fR\T	\T'e_$0'Interpolate name of current macro or string\T
\T'e_%'13\T	\T'e_%'\fB\e%\fR\T	\T'e_%'Default optional hyphenation character\T
\T'e_('2.1\T	\T'e_('\fB\e(\fIxx\fR\T	\T'e_('Character named \fIxx\fR\T
\T'e_['2.1\T	\T'e_['\fB\e[\fIxxx\fR]\T	\T'e_['Character named \fIxxx\fP\T
\T'e_*'7.1\T	\T'e_*'\fB\e\(**\fIx\fR,\fB\e\(**(\fIxx\fR,\fB\e\(**[\fIxxx\fB]\fR\T	\T'e_*'Interpolate string \fIx\fR, \fIxx\fR, or \fIxxx\fR\T
\T'e_*'7.1\T	\T'e_*'\fB\e\(**[\fIxxx\ arg\ \fR...\fB]\fR\T	\T'e_*'Interpolate string \fIxxx\fR with arguments \fIarg\ \fR...\T
\T'e_:'13\T	\T'e_:'\fB\e:\fR\T	\T'e_:'Optional line-break character\T
\T'e_;'10.2\T	\T'e_;'\fB\e;\fR\T	\T'e_;'Ligature suppressor\T
\T'e_@'17\T	\T'e_@'\fB\e@{\fR,\fB\e@}\fR\T	\T'e_@'Inline environment push/pop\T
\T'e_a'9.1\T	\T'e_a'\fB\ea\fR\T	\T'e_a'Non-interpreted leader character\T
\T'e_A'24.6\T	\T'e_A'\fB\eA\fI\'string\'\fR\T	\T'e_A'Anchor definition\T
\T'e_b'12.3\T	\T'e_b'\fB\eb\fI\'abc...\'\fR\T	\T'e_b'Bracket building function\T
\T'e_B'1.4\T	\T'e_B'\fB\eB\fI\(aqstring\(aq\fR\T	\T'e_B'Test if\
 \fIstring\fR is a numerical expression\T
\T'e_c'4.2\T	\T'e_c'\fB\ec\fR\T	\T'e_c'Interrupt text processing\T
\T'e_C'2.1\T	\T'e_C'\fB\eC\fI\'xxx\'\fR\T	\T'e_C'Character named \fIxxx\fP\T
\T'e_d'11.1\T	\T'e_d'\fB\ed\fR\T	\T'e_d'Forward (down) 1/2\|em vertical motion (1/2 line in \*(NR)\T
\T'e_D'12.5\T	\T'e_D'\fB\eD\fI\'c...\'\fR\T	\T'e_D'Draw graphics function \fIc\fP with parameters ...; \fIc\fP\^=\^\fBl\fR,\^\fBc\fR,\^\fBe\fR,\^\fBa\fP,\^\fB\(ap\fP\T
\T'e_e'10.1\T	\T'e_e'\fB\ee\fR\T	\T'e_e'Printable version of the \fIcurrent\fR escape character\T
\T'e_E'10.1\T	\T'e_E'\fB\eE\fR\T	\T'e_E'Escape character, not interpreted in \fIcopy mode\fR\T
\T'e_f'2.2\T	\T'e_f'\fB\ef\fIx\fR,\fB\ef(\fIxx\fR,\fB\ef[\fIxxx\fB]\fR,\fB\ef\fIN\fR\T	\T'e_f'Change to font named \fIx\fR, \fIxx\fR, or \fIxxx\fR, or position \fIN\fR\T
\T'e_g'8\T	\T'e_g'\fB\eg\fIx\fR,\fB\eg(\fIxx\fR,\fB\eg[\fIxxx\fB]\fR\T	\T'e_g'Format of number register \fIx\fP, \fIxx\fR, or \fIxxx\fR\T
\T'e_h'11.1\T	\T'e_h'\fB\eh\fI\'N\'\fR\T	\T'e_h'Local horizontal motion; move right \fIN\fR \fI(negative left)\fR\T
\T'e_H'2.3\T	\T'e_H'\fB\eH\fI\'N\'\fR\T	\T'e_H'Height of current font is \fIN\fR\T
\T'e_I'1.1\T	\T'e_I'\fB\eI\fI\(aqstring\(aq\fR\T	\T'e_B'Test if\
 \fIstring\fR is a valid identifier name\T
\T'e_j'4.1\T	\T'e_j'\fB\ej\fI\'\(+-N\'\fR\T	\T'e_j'Penalty for breaking a line after the current word is \fIN\fR\T
\T'e_J'4.1\T	\T'e_J'\fB\eJ\fI\'\(+-N\'\fR\T	\T'e_J'Default line breaking penalty is \fIN\fR\T
\T'e_k'11.3\T	\T'e_k'\fB\ek\fIx\fR,\fB\ek(\fIxx\fR,\fB\ek[\fIxxx\fB]\fR\T	\T'e_k'Mark horizontal \fIinput\fR place in register \fIx,\fR \fIxx\fR, or \fIxxx\fR\T
\T'e_l'12.4\T	\T'e_l'\fB\el\fI\^\'Nc\'\fR\T	\T'e_l'Horizontal line drawing function (optionally with \fIc\fR\|)\T
\T'e_L'12.4\T	\T'e_L'\fB\eL\fI\'Nc\'\fR\T	\T'e_L'Vertical line drawing function (optionally with \fIc\fR\|)\T
\T'e_n'8\T	\T'e_n'\fB\en\fIx\fR,\fB\en(\fIxx\fR,\fB\en[\fIxxx\fB]\fR\T	\T'e_n'Interpolate number register \fIx\fR, \fIxx\fR, or \fIxxx\fR\T
\T'e_N'2.\T	\T'e_N'\fB\eN\fI\'N\'\fR\T	\T'e_N'Character number \fIN\fR on current font\T
\T'e_o'12.1\T	\T'e_o'\fB\eo\fI\'abc...\'\fR\T	\T'e_o'Overstrike characters \fIa, b, c, ...\fR\T
\T'e_p'4.1\T	\T'e_p'\fB\ep\fR\T	\T'e_p'Break and spread output line\T
\T'e_P'7.5\T	\T'e_P'\fB\eP\fIx\fR,\fB\eP(\fIxx\fR,\fB\eP[\fIxxx\fB]\fR\T	\T'e_P'Output-line trap \fIx\fR, \fIxx\fR, or \fIxxx\fR\T
\T'e_r'11.1\T	\T'e_r'\fB\er\fR\T	\T'e_r'Reverse 1\|em vertical motion (reverse line in \*(NR)\T
\T'e_R'8\T	\T'e_R'\fB\eR\fI\'R\ \(+-N\'\fR\T	\T'e_R'Set number register \fIR\fR to \fI\(+-N\fR\T
.ne 3
\T'e_s'2.3\T	T{
\T'e_s'\fB\es\fIN\fR,\fB\es\fI\(+-N\fR,
\fB\es\'\fI\(+-N\fB\'\fR,\fB\es\fI\(+-\fB\'\fIN\fB\'\fR,
\fB\es[\fI\(+-N\fB]\fR,\fB\es\fI\(+-\fB[\fIN\fB]\fR\T
T}	\T'e_s'Point-size change function\T
\T'e_S'2.2\T	\T'e_S'\fB\eS\fI\'N\'\fR\T	\T'e_S'Slant output \fIN\fP degrees\T
\T'e_t'9.1\T	\T'e_t'\fB\et\fR\T	\T'e_t'Non-interpreted horizontal tab\T
\T'e_T'24.6\T	\T'e_T'\fB\eT\fI\'string\'\fR\T	\T'e_T'Intra-document link definition\T
\T'e_u'11.1\T	\T'e_u'\fB\eu\fR\T	\T'e_u'Reverse (up) 1/2\|em vertical motion (1/2 line in \*(NR)\T
\T'e_U'2.1\T	\T'e_U'\fB\eU\fI\'X\'\fR\T	\T'e_U'Character at Unicode position U+\fIX\fR\T
\T'e_v'11.1\T	\T'e_v'\fB\ev\fI\'N\'\fR\T	\T'e_v'Local vertical motion; move down \fIN\fR \fI(negative up)\fR\T
\T'e_V'20\T	\T'e_V'\fB\eV\fIx\fR,\fB\eV(\fIxx\fR,\fB\eV[\fIxxx\fB]\fR\T	\T'e_V'Environment variable \fIx\fP, \fIxx\fR, or \fIxxx\fR\T
\T'e_w'11.2\T	\T'e_w'\fB\ew\fI\'string\'\fR\T	\T'e_w'Interpolate width of \fIstring\fR\T
\T'e_W'24.6\T	\T'e_W'\fB\eW\fI\'string\'\fR\T	\T'e_W'URI link definition\T
\T'e_x'5.2\T	\T'e_x'\fB\ex\fI\'N\'\fR\T	\T'e_x'Extra line-space function \fI(negative before, positive after)\fR\T
\T'e_X'10.7\T	\T'e_X'\fB\eX\fI\'string\'\fR\T	\T'e_X'Output \fIstring\fP as device control function\T
\T'e_Y'10.7\T	\T'e_Y'\fB\eY\fIx\fR,\fB\eY(\fIxx\fR,\fB\eY[\fIxxx\fB]\fR\T	\T'e_Y'Output contents of macro \fIx\fP, \fIxx\fR, or \fIxxx\fR\T as device control function
\T'e_z'12.2\T	\T'e_z'\fB\ez\fIc\fR\T	\T'e_z'Print \fIc\fR with zero width (without spacing)\T
\T'e_Z'12.2\T	\T'e_Z'\fB\eZ\fI\'string\'\fR\T	\T'e_Z'Print \fIstring\fR with zero width and height\T
\T'e_{'16\T	\T'e_{'\fB\e{\fR\T	\T'e_{'Begin conditional input\T
\T'e_}'16\T	\T'e_}'\fB\e}\fR\T	\T'e_}'End conditional input\T
\T'e_newline'10.7\T	\T'e_newline'\fB\e\fR(newline)\T	\T'e_newline'Concealed (ignored) newline\T
\(en	\fB\e\fIc\fR	\fIc\fR, any character \fInot\fR listed above
.TE
.fi
.sp
The escape sequences
\fB\T'e_esc'\e\e\T\fR,
\fB\T'e_.'\e\^.\T\fR,
\fB\T'e_"'\e"\T\fR,
\fB\T'e_#'\e#\T\fR,
\fB\T'e_$'\e$\T\fR,
\fB\T'e_*'\e\(**\T\fR,
\fB\T'e_a'\ea\T\fR,
\fB\T'e_e'\ee\T\fR,
\fB\T'e_g'\eg\T\fR,
\fB\T'e_n'\en\T\fR,
\fB\T'e_t'\et\T\fR,
\fB\T'e_V'\eV\T\fR,
and
\fB\T'e_newline'\e\fR(newline)\T are interpreted
in \T'copy mode'\fIcopy mode\fR (\(sc7.2).\T
.sp
.nr nosave 1
.ne 6
.ft B
Predefined General Number Registers
.br
.Bookmark 1 "Predefined General Number Registers"
.nf
.ft
.TS
c2l
c2l2l
n2l2l.
.ft BI
Section	Register
Reference	Name	Description
.ft R
.xx
\T'n_%'3\T	\T'n_%'\fB%\fR\T	\T'n_%'Current page number.\T
\(en	\fBc.\fR	Number of \fIlines\fR read from current input file.
\T'n_ct'11.2\T	\T'n_ct'\fBct\fR\T	\T'n_ct'Character type (set by \fIwidth\fR function).\T
\T'n_dl'7.4\T	\T'n_dl'\fBdl\fR\T	\T'n_dl'Width (maximum) of last completed diversion.\T
\T'n_dn'7.4\T	\T'n_dn'\fBdn\fR\T	\T'n_dn'Height (vertical size) of last completed diversion.\T
\(en	\fBdw\fR	Current day of the week (1\(en7).
\(en	\fBdy\fR	Current day of the month (1\(en31).
\(en	\fBhours\fR	Hours portion of current local time (0\(en23).
\T'n_hp'11.3\T	\T'n_hp'\fBhp\fR\T	\T'n_hp'Current horizontal place on \fIinput\fR line.\T
\T'n_ln'15\T	\T'n_ln'\fBln\fR\T	\T'n_ln'Output line number.\T
\(en	\fBminutes\fR	Minutes portion of current local time (0\(en59).
\(en	\fBmo\fR	Current month (1\(en12).
\T'n_nl'4.1\T	\T'n_nl'\fBnl\fR\T	\T'n_nl'Vertical position of last printed text base-line.\T
\T'n_rsb'11.2\T	\T'n_rsb'\fBrsb\fR\T	\T'n_rsb'Visual depth of string below base line (generated by \fIwidth\fR function).\T
\T'n_rst'11.2\T	\T'n_rst'\fBrst\fR\T	\T'n_rst'Visual height of string above base line (generated by \fIwidth\fR function).\T
\T'n_sb'11.2\T	\T'n_sb'\fBsb\fR\T	\T'n_sb'Depth of string below base line (generated by \fIwidth\fR function).\T
\(en	\fBseconds\fR	Seconds portion of current local time (0\(en60).
\T'n_st'11.2\T	\T'n_st'\fBst\fR\T	\T'n_st'Height of string above base line (generated by \fIwidth\fR function).\T
\(en	\fByear\fR	Current year.
\(en	\fByr\fR	Current year minus 1900.
\T'n_.g'25.1\T	\T'n_.g'\fB&g\fR\T	\T'n_.g'Current \*(GR compatibility mode (0=off).\T
.TE
.sp
.nr nosave 1
.ne 6
.ft B
Predefined Read-Only Number Registers
.ft R
.br
.Bookmark 1 "Predefined Read-Only Number Registers"
.TS
c2l
c2l2l
n2l2l.
.ft BI
Section	Register
Reference	Name	Description
.ft R
.xx
\T'n_$$'19\T	\T'n_$$'\fB$$\fR\T	\T'n_$$'Process id of \*(NR or \*[TR.]\T
\T'n_.$'7.3\T	\T'n_.$'\fB&$\fR\T	\T'n_.$'Number of arguments available at the current macro level.\T
\(en	\fB&A\fR	Set to 1 in \*[TR,] if \fB\-a\fR option used; always 1 in \*[NR.]
\T'n_.a'5.2\T	\T'n_.a'\fB&a\fR\T	\T'n_.a'Post-line extra line-space most recently utilized \
using \fB\ex\fI\'N\'\fR.\T
\T'n_.ascender'5.4\T	\T'n_.ascender'\fB&ascender\fR\T	\T'n_.ascender'Ascender of current font and point size.\T
\T'n_.b'2.3\T	\T'n_.b'\fB&b\fR\T	\T'n_.b'Emboldening level.\T
\T'n_.breakchar'13\T	\T'n_.breakchar'\fB&breakchar\fR\T	\T'n_.breakchar'Current optional line break characters.\T
\T'n_.brnl'4.1\T	\T'n_.brnl'\fB&brnl\fR\T	\T'n_.brnl'Remaining number of lines with break at newline.\T
\T'n_.brpnl'4.1\T	\T'n_.brpnl'\fB&brpnl\fR\T	\T'n_.brpnl'Remaining number of lines with break and spread at newline.\T
\(en	\fB&c\fR	Number of \fIlines\fR read from current input file.
\T'n_.cdp'11.2\T	\T'n_.cdp'\fB&cdp\fR\T	\T'n_.cdp'Visual depth below base line of previous character.\T
\T'n_.ce'4.1\T	\T'n_.ce'\fB&ce\fR\T	\T'n_.ce'Remaining number of lines to be centered.\T
\T'n_.cht'11.2\T	\T'n_.cht'\fB&cht\fR\T	\T'n_.cht'Visual height above base line of previous character.\T
\T'n_.connectchar'12.4\T	\T'n_.connectchar'\fB&connectchar\fR\T	\T'n_.connectchar'Current characters connected for line drawing [sic].\T
\T'n_.d'7.4\T	\T'n_.d'\fB&d\fR\T	\T'n_.d'Current vertical place in current diversion; equal to \fBnl\fR, if no diversion.\T
\T'n_.defpenalty'4.1\T	\T'n_.defpenalty'\fB&defpenalty\fR\T	\T'n_.defpenalty'Default line breaking penalty.\T
\T'n_.descender'5.4\T	\T'n_.descender'\fB&descender\fR\T	\T'n_.descender'Descender of current font and point size.\T
\T'n_.dilev'7.4\T	\T'n_.dilev'\fB&dilev\fR\T	\T'n_.dilev'Current diversion level.\T
\T'n_.ev'17\T	\T'n_.ev'\fB&ev\fR\T	\T'n_.ev'Name of current environment [sic].\T
\T'n_.f'2.2\T	\T'n_.f'\fB&f\fR\T	\T'n_.f'Current font as physical quadrant (1-255).\T
\T'n_.fp'2.2\T	\T'n_.fp'\fB&fp\fR\T	\T'n_.fp'Next unused physical font quadrant.\T
\T'n_.fzoom'2.3\T	\T'n_.fzoom'\fB&fzoom\fR\T	\T'n_.fzoom'Current font zoom factor (may be a decimal fraction).\T
\T'n_.F'20\T	\T'n_.F'\fB&F\fR\T	\T'n_.F'Current input file name [sic].\T
\T'n_.h'4\T	\T'n_.h'\fB&h\fR\T	\T'n_.h'Text base-line high-water mark on current page or diversion.\T
\T'n_.hlc'13\T	\T'n_.hlc'\fB&hlc\fR\T	\T'n_.hlc'Current number of consecutive hyphenated lines.\T
\T'n_.hlm'13\T	\T'n_.hlm'\fB&hlm\fR\T	\T'n_.hlm'Maximum number of consecutive hyphenated lines.\T
\T'n_.hy'13\T	\T'n_.hy'\fB&hy\fR\T	\T'n_.hy'Current hyphenation flags.\T
\T'n_.hylang'13\T	\T'n_.hylang'\fB&hylang\fR\T	\T'n_.hylang'Current hyphenation language [sic].\T
\T'n._hylen'13\T	\T'n_.hylen'\fB&hylen\fR\T	\T'n_.hylen'Current minimum hyphenation word length.\T
\T'n._hypp'13\T	\T'n_.hypp'\fB&hypp\fR\T	\T'n_.hypp'Penalty for hyphen in \fBad p\fR mode.\T
\T'n._hypp2'13\T	\T'n_.hypp2'\fB&hypp2\fR\T	\T'n_.hypp2'Penalty for consecutive hyphens in \fBad\ p\fR mode.\T
\T'n._hypp3'13\T	\T'n_.hypp3'\fB&hypp3\fR\T	\T'n_.hypp3'Penalty for hyphenating the last word of a paragraph in \fBad\ p\fR mode.\T
\T'n_.H'11.1\T	\T'n_.H'\fB&H\fR\T	\T'n_.H'Available horizontal resolution in basic units.\T
\T'n_.i'6\T	\T'n_.i'\fB&i\fR\T	\T'n_.i'Current indent as set by \fBin\fR.\T
\T'n_.in'6\T	\T'n_.in'\fB&in\fR\T	\T'n_.in'Current indent including temporary indent, if any.\T
\T'n_.int'4.2\T	\T'n_.int'\fB&int\fR\T	\T'n_.int'Non-zero if the previous line was interrupted with \fB\ec\fR.\T
\T'n_.j'4\T	\T'n_.j'\fB&j\fR\T	\T'n_.j'Current \fBad\fP mode.\T
\T'n_.k'4.1\T	\T'n_.k'\fB&k\fR\T	\T'n_.k'Current output horizontal position.\T
\T'n_.kc'4.2\T	\T'n_.kc'\fB&kc\fR\T	\T'n_.kc'Output horizontal length of interrupted word, if any.\T
\T'n_.l'6\T	\T'n_.l'\fB&l\fR\T	\T'n_.l'Current line length.\T
\T'n_.lt'14\T	\T'n_.lt'\fB&lt\fR\T	\T'n_.lt'Current title length.\T
\T'n_.lc_ctype'2.1\T	\T'n_.lc_ctype'\fB&lc_ctype\fR\T	\T'n_.lc_ctype'Current \s-1LC_CTYPE\s0 locale [sic].\T
\T'n_.letss'4.1\T	\T'n_.letss'\fB&letss\fR\T	\T'n_.letss'Current dynamic letter space threshold.\T
\T'n_.lpfx'20\T	\T'n_.lpfx'\fB&lpfx\fR\T	\T'n_.lpfx'Current line prefix [sic].\T
\T'n_.lshmin'4.1\T	\T'n_.lshmin'\fB&lshmin\fR\T	\T'n_.lshmin'Current minimum dynamic letter shape (may be a decimal fraction).\T
\T'n_.lshmax'4.1\T	\T'n_.lshmax'\fB&lshmax\fR\T	\T'n_.lshmax'Current maximum dynamic letter shape (may be a decimal fraction).\T
\T'n_.lspmin'4.1\T	\T'n_.lspmin'\fB&lspmin\fR\T	\T'n_.lspmin'Current minimum dynamic letter space (may be a decimal fraction).\T
\T'n_.lspmax'4.1\T	\T'n_.lspmax'\fB&lspmax\fR\T	\T'n_.lspmax'Current maximum dynamic letter space (may be a decimal fraction).\T
\T'n_.L'5.1\T	\T'n_.L'\fB&L\fR\T	\T'n_.L'Current \fBls\fP value.\T
\T'n_.minss'4.1\T	\T'n_.minss'\fB&minss\fR\T	\T'n_.minss'Current minimum space size.\T
\T'n_.n'4\T	\T'n_.n'\fB&n\fR\T	\T'n_.n'Length of text portion on previous output line.\T
\T'n_.ns'5\T	\T'n_.ns'\fB&ns\fR\T	\T'n_.ns'Non-zero if no-space mode is active.\T
\T'n_.nhychar'13\T	\T'n_.nhychar'\fB&nhychar\fR\T	\T'n_.nhychar'Current hyphenation-inhibiting characters.\T
\T'n_.o'3\T	\T'n_.o'\fB&o\fR\T	\T'n_.o'Current page offset.\T
\T'n_.p'3\T	\T'n_.p'\fB&p\fR\T	\T'n_.p'Current page length.\T
\T'n_.padj'4\T	\T'n_.padj'\fB&padj\fR\T	\T'n_.padj'Current paragraph-at-once global setting.\T
\T'n_.pn'3\T	\T'n_.pn'\fB&pn\fR\T	\T'n_.pn'Number of next page.\T
\T'n_.ps'2.3\T	\T'n_.ps'\fB&ps\fR\T	\T'n_.ps'Current point size in units.\T
\T'n_.psr'2.3\T	\T'n_.psr'\fB&psr\fR\T	\T'n_.psr'Last requested point size in units.\T
\T'n_.rj'4.1\T	\T'n_.rj'\fB&rj\fR\T	\T'n_.rj'Remaining number of lines to be right-aligned.\T
\T'n_.s'2.3\T	\T'n_.s'\fB&s\fR\T	\T'n_.s'Current point size (may be a decimal fraction).\T
\T'n_.shc'13\T	\T'n_.shc'\fB&shc\fR\T	\T'n_.shc'Current soft hyphenation character [sic].\T
\T'n_.sentchar'4.1\T	\T'n_.sentchar'\fB&sentchar\fR\T	\T'n_.sentchar'Current sentence-ending characters [sic].\T
\T'n_.sr'2.3\T	\T'n_.sr'\fB&sr\fR\T	\T'n_.sr'Last requested point size (may be a decimal fraction).\T
\T'n_.ss'2\T	\T'n_.ss'\fB&ss\fR\T	\T'n_.ss'Current space size.\T
\T'n_.sss'2\T	\T'n_.sss'\fB&sss\fR\T	\T'n_.sss'Current sentence space size.\T
\T'n_.S'9.1\T	\T'n_.S'\fB&S\fR\T	\T'n_.S'Current tab stops such that they can be passed back to \fBta\fR.\T
\T'n_.t'7.5\T	\T'n_.t'\fB&t\fR\T	\T'n_.t'Distance to the next trap.\T
\T'n_.tabs'9.1\T	\T'n_.tabs'\fB&tabs\fR\T	\T'n_.tabs'Current tab stops such that they can be passed back to \fBta\fR.\T
\T'n_.transchar'4.1\T	\T'n_.transchar'\fB&transchar\fR\T	\T'n_.transchar'Current characters transparent for sentence-ending [sic].\T
\(en	\fB&T\fR	Set to 1 in \*[NR,] if \fB\-T\fR option used; always 0 in \*[TR.]
\T'n_.u'4.1\T	\T'n_.u'\fB&u\fR\T	\T'n_.u'Equal to 1 in fill mode and 0 in nofill mode.\T
\T'n_.v'5.1\T	\T'n_.v'\fB&v\fR\T	\T'n_.v'Current vertical line spacing.\T
\T'n_.vpt'7.5\T	\T'n_.vpt'\fB&vpt\fR\T	\T'n_.vpt'Vertical position traps enabled (1) or disabled (0).\T
\T'n_.V'11.1\T	\T'n_.V'\fB&V\fR\T	\T'n_.V'Available vertical resolution in basic units.\T
\T'n_.w'11.2\T	\T'n_.w'\fB&w\fR\T	\T'n_.w'Width of previous character.\T
\T'n_.warn'21\T	\T'n_.warn'\fB&warn\fR\T	\T'n_.warn'Currently activated warning categories.\T
\T'n_.x'4.1\T	\T'n_.x'\fB&x\fR\T	\T'n_.x'Remaining horizontal space on current output line.*\T
\T'n_.X'1.1\T	\T'n_.X'\fB&X\fR\T	\T'n_.X'Current extension level.\T
\T'n_.y'6\T	\T'n_.y'\fB&y\fR\T	\T'n_.y'Current indent including temporary indent, if any.*\T
\T'n_.z'7.4\T	\T'n_.z'\fB&z\fR\T	\T'n_.z'Name [sic] of current diversion.\T
\T'n_lsn'4.1\T	\T'n_lsn'\fBlsn\fR\T	\T'n_lsn'Number of leading spaces\
 of a input line in fill mode.\T
\T'n_lss'4.1\T	\T'n_lss'\fBlss\fR\T	\T'n_lss'Horizontal space\
 corresponding to a line with leading spaces in fill mode.\T
.TE
.sp -1
.in 0
.fi
.fn
.sp .3
\(**\|The \fB&x\fR and \fB&y\fR registers had been described
as ``reserved version-dependent registers'' in previous editions.
Their semantics have actually been as described
from 7th Edition \*(TR on.
.ef
.rm EM
.\" from file m1
.bp
.Bookmark 0 "Reference Manual"
.nr mh-level 1
.ii
.ds H
.tr |
.tr ~|
.rm mx
.br
.ce
.ps \n(PS
.ft B
.ps +2
.rs
.sp 1.0i
\A'part_reference'REFERENCE MANUAL
.ft R
.ps -2
.sp
.mha s_general
General Explanation
.sc
Form of input.
Input consists of \fItext lines\fR, which are destined to be printed,
interspersed with \fIcontrol lines\fR,
which set parameters or otherwise control subsequent processing.
Control lines begin with a \fIcontrol character\fR\(em\
normally \fB.\fR (period) or \fB\'\fR (acute accent)\(em\
followed by a name that specifies
a basic \fIrequest\fR or the substitution of
a user-defined \fImacro\fR in place of the control line.
The control character \fB\'\fR suppresses the \fIbreak\fR function\(em\
the forced output of a partially filled line\(em\
caused by certain requests.
The control character may be separated from the request/macro name by
white space (spaces and/or tabs) for esthetic reasons.
Names must be followed by either
space or newline.
Control lines with unrecognized names are ignored.
.pg
Various special functions may be introduced anywhere in the input by
means of an \fIescape\fR character, normally \fB\e\fR.
For example, the function
\T'e_n'\fB\en\fIR\fR\T
causes the interpolation of the contents of the
\fInumber register R\fR
in place of the function;
here \fIR\fR is either a single character name
as in \fB\en\fIx\fR,
a left-parenthesis-introduced, two-character name as in \fB\en(\fIxx\fR,
or a left-bracket-introduced, multiple character name as in
\fB\en[\fIxxx\fR].
.pg
\A'c_extension'In traditional \*[TR,]
only one and two character names were permitted
for request, macro, string, number register, and font names.
Heirloom \*(TR can accept names containing a (nearly) arbitrary
number of \s-1ASCII\s+1 characters.
Escape \A'e_I'\fB\eI\fR\(aq\fIstring\fR\(aq can by used to test if
\fIstring\fR is a valid identifier name.
By default, request and macro names are still required
to contain at most two characters for compatibility reasons.
The \fB\-x\fR command line option,
the \T'do'\fBdo\fR\T request,
.lg 0
or the \T'xflag'\fBxflag\fR\T request
.lg
make the longer names available.
The current extension level is available in the \A'n_.X'\fB.X\fR register.
.pg
Four levels of extension availability are currently defined:
.de lv
.xx
.in \w'0\ 'u
.ti 0
..
.lv
0\ disables all extensions except for locale-dependent input and
Type\ 1/OpenType/TrueType font selection using \T'fp'\fBfp\fR\T.
Since the \T'do'\fBdo\fR\T request
is not available at this level,
it is not possible to change to another extension level again.
It is most useful to print unmaintained documents
for which any adaption would be too tedious.
.lv
1\ enables extensions except for direct access to long names,
i.e., \fB&abcde\fR will be interpreted
as request \T'ab'\fBab\fR\T with argument \fBcde\fR,
and \fB\e*[xyz]\fR refers to the string named \fB[\fR
followed by the text \fBxyz]\fR.
Long names can be accessed using the \T'do'\fBdo\fR request\T,
e.g. \fB&do de abcde\fR, \fB&do if 1 \e*[xyz]\fR.
This level is the default.
.lv
2\ enables direct access to long names
on request lines and escape sequences,
i.e., \fB&abcde\fR will be interpreted as macro \fBabcde\fR,
and \fB\e*[xyz]\fR refers to the string named \fBxyz\fR.
If an undefined long name is read, its first two characters
are interpreted as a short request using the remaining
characters as argument.
So if a macro \fBabcde\fR is defined,
\fB&abcde\fR will execute it, but otherwise, \fB&abcde\fR continues
to execute \fBab\fR.
String and number register references are
only interpreted if they start in the first two characters
of a name, i.e. no string interpretation is performed on
input \fB&ab\e*(xy\fR.
.lv
3\ ignores undefined long requests even if they form a prefix
of a short request, and interprets string and number register
references in any position of a name.
.in 0
.pg
.lg 0
It is recommended to execute \fB&do xflag 3\fR at the beginning of new
.lg
\*(TR programs that need not rely on any existing code.
.sc
Formatter and device resolution.
\*(TR internally stores and processes dimensions in units
that correspond to the particular device
for which output is being prepared;
values from 300 to 72\|000/inch are typical.
\T's_device'See \(sc27.\T
\*(NR internally uses 240 units/inch,
corresponding to the least common multiple of the
horizontal and vertical resolutions of various
typewriter-like output devices.
\*(TR rounds horizontal/vertical numerical parameter input to the actual
horizontal/vertical resolution
of the output device indicated by the \fB\-T\fR option (default \fBps\fP).
\*(NR similarly rounds numerical input to the actual resolution
of the output device indicated by the \fB\(miT\fR option
(default Model 37 Teletype).
.sc
\A'c_units'Numerical parameter input.
Both \*(NR and \*(TR
accept numerical input with the appended scale
indicators
shown in the following table,
where
\fIS\fR is the current type size in points,
\fIV\fR is the current vertical line spacing in
basic units,
and
\fIC\fR is a \fInominal character width\fR in basic units.
.TS
center box;
c|c|ls
c|c|ll
c|l|l|l.
Scale		Number of basic units
Indicator	Meaning	\*(TR \fI\-Tps\fP	\*(NR
_
\fBi\fR	Inch	72000	240
\fBc\fR	Centimeter	72000\(mu50/127	240\(mu50/127
\fBP\fR	Pica = 1/6 inch	12000	240/6
\fBm\fR	Em = \fIS\fR points	\fIS\fR	\fIC\fR
\fBn\fR	En = Em/2	\fIS\fR/2	\fIC, same as Em\fR
\fBM\fR	1/100 Em	\fIS\fR/100	\fIC\fR/100
\fBp\fR,\fBz\fR	Point = 1/72 inch	1000	240/72
\fBu\fR,\fBs\fR	Basic unit	1	1
\fBt\fR	Printer's point	72000\(mu100/7227	240\(mu100/7227
\fBT\fR	Printer's pica	72000\(mu400/2409	240\(mu400/2409
\fBD\fR	Didot point	72000\(mu24/1621	240\(mu24/1621
\fBC\fR	Cicero	72000\(mu288/1621	240\(mu288/1621
\fBv\fR	Vertical line space	\fIV\fR	\fIV\fR
none	Default, see below
.TE
In \*[NR,] \fIboth\fR the em and the en are taken to be equal to the \fIC\fR,
which is output-device dependent;
common values are 1/10 and 1/12 inch.
Actual character widths in \*(NR need not be all the same and constructed characters
such as \(mi> (\(->) are often extra wide.
The default scaling is \fBm\fP for the horizontally-oriented requests
and functions
\fB\T'll'll\T\fR,
\fB\T'in'in\T\fR,
\fB\T'ti'ti\T\fR,
\fB\T'ta'ta\T\fR,
\fB\T'lt'lt\T\fR,
\fB\T'po'po\T\fR,
\fB\T'mc'mc\T\fR,
\fB\T'spreadwarn'spreadwarn\T\fR,
\T'e_h'\fB\eh\fR,\T
\T'e_l'\fB\el\fR,\T
and horizontal coordinates of \T'e_D'\fB\eD\fR;\T
\fBv\fR
for the vertically-oriented requests and functions
\fB\T'pl'pl\T\fR,
\fB\T'wh'wh\T\fR,
\fB\T'ch'ch\T\fR,
\fB\T'dt'dt\T\fR,
\fB\T'sp'sp\T\fR,
\fB\T'sv'sv\T\fR,
\fB\T'ne'ne\T\fR,
\fB\T'rt'rt\T\fR,
\T'e_v'\fB\ev\fR,\T
\T'e_x'\fB\ex\fR,\T
\T'e_L'\fB\eL\fR,\T
and vertical coordinates of \T'e_D'\fB\eD\fR;\T
\fBp\fR for the \T'vs'\fBvs\fR\T,
\fB\T'papersize'papersize\T\fR,
\fB\T'mediasize'mediasize\T\fR,
\fB\T'trimat'trimat\T\fR,
\fB\T'bleedat'bleedat\T\fR,
and
\fB\T'cropat'cropat\T\fR
requests;
and \fBu\fR for the requests
\fB\T'nr'nr\T\fR,
\fB\T'nrf'nrf\T\fR,
\fB\T'if'if\T\fR,
and
\fB\T'ie'ie\T\fR.
\fIAll\fR other requests ignore any scale indicators.
When a number register containing an already appropriately scaled number
is interpolated to provide numerical input,
the unit scale indicator
\fBu\fR may need to be appended to prevent
an additional inappropriate default scaling.
The number, \fIN\fR, may be specified in decimal-fraction form
but the parameter finally stored is rounded to an integer number of basic units,
except for floating-point computations with
\T'nrf'\fBnrf\fR\T and \T'if'\fBif\ f\fR\T.
Exponential notation as in `1\fBe+\fR9' or `1\fBe\-\fR10'
is supported.
.pg
The \fIabsolute position\fR indicator \fB~\fR may be prepended
to a number \fIN\fR
to generate the distance to the vertical or horizontal place \fIN\fR.
For vertically-oriented requests and functions, \fB~\|\fIN\fR
becomes the distance in basic units from the current vertical place on the page or in a \T'c_diversion'\fIdiversion\fR (\(sc7.4)\T
to the the vertical place \fIN\fR.
For \fIall\fR other requests and functions,
\fB~\|\fIN\fR
becomes the distance from
the current horizontal place on the \fIinput\fR line to the horizontal place \fIN\fR.
\A'a_usesp'For example,
.x1
\&\fB.sp  ~\|3.2c\fR
.x2
will space \fIin the required direction\fR to 3.2\|centimeters from the top of the page.
.sc
.tr &&
\A'c_expr'Numerical expressions.
Wherever numerical input is expected an expression involving parentheses,
the arithmetic operators \fB\(pl\fR, \fB\(mi\fR, \fB/\fR, \fB\(**\fR, \fB%\fR (mod),
the logical operators
\fB<\fR,
\fB>\fR,
\fB<=\fR,
\fB>=\fR,
\fB=\fR (or \fB==\fR),
\fB<>\fR (not equal),
\fB&\fR\ (and),
\fB:\fR\ (or),
and the functions
\fIa\fB<?\fIb\fR (minimum of \fIa\fR and \fIb\fR),
\fIa\fB>?\fIb\fR (maximum of \fIa\fR and \fIb\fR),
and \fB(\fIc\fB;\fIe\fB)\fR (evaluate the expression \fIe\fR using
\fIc\fR as default scale indicator,
or ignoring scaling indicators if \fIc\fR is omitted)
may be used.
Except where controlled by parentheses, evaluation of expressions is left-to-right;
there is no operator precedence.
Spaces are ignored if they occur within parentheses;
any other non-numeric character terminates the expression.
In the case of certain requests, an initial \fB\(pl\fR or \fB\(mi\fR is stripped
and interpreted as an increment or decrement indicator respectively.
In the presence of default scaling, the desired scale indicator must be
attached to \fIevery\fR number in an expression
for which the desired and default scaling differ.
For example,
if the number register \fBx\fR contains 2
and the current point size is 10,
then
.br
.tr &.
.x1
.ft B
\&.ll  (4.25i\(pl\enxP\(pl3)/2u
.ft R
.x2
will set the line length to 1/2 the sum of 4.25 inches \(pl 2 picas \(pl 30 points.
.pg
The \A'e_B'\fB\eB\fI'string'\fR escape sequence
checks whether \fIstring\fR is a valid numerical expression
and evaluates to ``1'' if it does and to ``0'' otherwise.
.sc
Notation.
Numerical parameters are indicated in this manual in two ways.
\(+-\fIN\fR means that the argument may take the forms \fIN\fR, \(pl\fIN\fR, or \(mi\fIN\fR and
that the corresponding effect is to set the affected parameter
to \fIN\fR, to increment it by \fIN\fR, or to decrement it by \fIN\fR respectively.
Plain \fIN\fR means that an initial algebraic sign is \fInot\fR
an increment indicator,
but merely the sign of \fIN\fR.
Generally, unreasonable numerical input is either ignored
or truncated to a reasonable value.
For example,
most requests expect to set parameters to non-negative
values;
exceptions are
\fB\T'sp'sp\T\fR,
\fB\T'wh'wh\T\fR,
\fB\T'ch'ch\T\fR,
\fB\T'nr'nr\T\fR,
and
\fB\T'if'if\T\fR.
The requests
\fB\T'ps'ps\T\fR,
\fB\T'ft'ft\T\fR,
\fB\T'po'po\T\fR,
\fB\T'vs'vs\T\fR,
\fB\T'ls'ls\T\fR,
\fB\T'll'll\T\fR,
\fB\T'in'in\T\fR,
and
\fB\T'lt'lt\T\fR
restore the \fIprevious\fR parameter value in the \fIabsence\fR
of an argument.
.pg
Single character arguments are indicated by single lower case letters
and
one/two character arguments are indicated by a pair of lower case letters.
Character string arguments are indicated by multi-character mnemonics.
.h1
.bta do
\fB&do\fI|name\fR		ignored	\(en	\
Execute the request or macro \fIname\fR in extension level 3
and restore the previous level afterwards.
.bta xflag
.lg 0
\fB&xflag\fI|N\fR	1	ignored	\(en	\
Set the extension level permanently to \fIN\fP.
.lg
.mha s_font
Font and Character Size Control
.sc
\A'c_char'Character set.
The basic \*(TR character set
is defined by a description file
specific to each output device \T's_device'(\(sc27).\T
There are normally several regular fonts
and one or more special fonts.
The basic character set is shown in the attached
\T'Table I'Table|I\T.
All \s-1ASCII\s+1 characters are included,
with some on the Special Font.
With three exceptions, the \s-1ASCII\s+1 characters are input as themselves,
and non-\s-1ASCII\s+1 characters are input
in the form \A'e_('\fB\e(\fIxx\fR where
\fIxx\fR is a two-character name given in the attached
\T'Table II'Table|II\T.
The three \s-1ASCII\s+1 exceptions are mapped as follows:
.TS
center box;
cs|cs
cc|cc
cl|cl.
\s-1ASCII\s+1 Input	Printed by \*(TR
Character	Name	Character	Name
_
\A'e_acute'\'	acute accent	'	close quote
\A'e_grave'\`	grave accent	`	open quote
\A'e_-'\(mi	minus	\(en	hyphen
.TE
.tr ~~
The characters
\fB\'\fR,
\fB\`\fR,
and
\fB\-\fR
may be input
by \fB\e\'\fR, \fB\e\`\fR, and \fB\e\-\fR respectively or by their names
\T'Table II'(Table II)\T.
The characters \fB\e\fR and \fB"\fR can also be referred to
as \fB\e(rs\fR and \fB\e(dq\fR, respectively;
this form allows to completely avoid their interpretation
as argument delimiter or escape character.
In traditional \*[TR,],
the \s-1ASCII\s+1 characters \fB@\fR, \fB#\fR, \fB"\fR, \fB\(aa\fR, \fB\(ga\fR, \fB<\fR, \fB>\fR, \fB\e\fR, \fB{\fR, \fB}\fR, \fB~\fR, \fB^\fR, and \fB\(ul\fR existed
only on the Special Font and were printed as a 1-em space if that Font
was not mounted.
With the \fBpslow\fR device,
these characters print in the \fITimes\fR font by default
regardless of the current font
(but see the \T'fps'\fBfps\fR\T request below).
With other devices,
these characters are taken from the current font.
.pg
With Type\ 1, OpenType, and TrueType fonts,
\*(TR allows to access all named \*(PS
characters of the current font and
of those in the \T'fallback'\fBfallback\fR\T sequence
in the forms \A'e_['\fB\e[\fIname\fB]\fR or \A'e_C'\fB\eC\(aq\fIname\fB\(aq\fR.
.pg
\A'p_locale'\*(TR internally converts non-\s-1ASCII\s+1 characters
of the current \s-1LC_CTYPE\s+1 locale
to named \*(PS characters
once they are read in regular (not \T'copy mode'\fIcopy\fR\T) mode.
If the current font is an OpenType or a TrueType font and contains
a custom Unicode mapping table, the input character is looked up in that
table first.
Otherwise, a default table is used.
A character that is not
present in the current font is searched
using the \T'fallback'\fBfallback\fR\T sequence
first, then in the special fonts.
If the character cannot be found, it is discarded.
Characters for which no name is known are replaced by spaces.
.pg
The \A'e_N'\fB\eN\(aq\fIn\fB\(aq\fR escape sequence
has historically been available to refer
to character \fIn\fR of the current font.
It is still accepted,
but its use is discouraged with 
Type\ 1, OpenType, and TrueType fonts
since the arrangement of character in font tables
is performed at run-time
and may change with future versions of \*[TR.]
When register \fB.g\fP is set to \fB1\fP
8-bit character codes can also be accessed with
\fB\e[char\fIn\fB]\fR where 32\|\|\(<=\|\|\fIn\fP\|\|\(<=\|\|255.
.pg
.tr ~|
\*(NR has an analogous, but different, mechanism for defining legal characters
and how to print them.
By default all characters are valid.
There are such
additional characters as may be available on
the output device,
such characters as may be able to be constructed
by overstriking or other combination,
and those that can reasonably be mapped
into other printable characters.
The exact behavior is determined by a driving
table prepared for each device.
In a \*[UTF] locale,
combining characters are processed.
The characters
\fB\'\fR,
\fB\`\fR,
and
\fB\(ul\fR
print
as themselves.
.pg
Both \*(NR and \*(TR allow references to specific
Unicode characters with the \A'e_U'\fB\eU\(aq\fIX\fB\(aq\fR escape sequence;
it causes the character at position U+\fIX\fR to be printed
(\fIX\fR is a hexadecimal number).
For \*[TR,] it is required that this character
is available in one of the fonts mounted at this point.
As an example, \eU\(aq20AC\(aq prints the Euro character \U'20AC'.
When register \fB.g\fP is set to \fB1\fP
Unicode charactes can also be accessed with
\fB\e[u\fIXXXX\fB]\fR where \fIXXXX\fP is a four digit hexadecimal number.
.sc
\A'c_fonts'Fonts.
\*(TR
begins execution by reading information for a set of defaults fonts,
said to be
.I mounted;
conventionally, the first four are
Times Roman (\&\fBR\fR),
Times Italic
(\&\fBI\fR),
Times Bold
(\&\fBB\fR),
and
Times Bold Italic
(\&\fBBI\fR),
and the last is a Special font (\fBS\fR)
containing miscellaneous characters.
The set of fonts and positions is determined by the device description file,
described in \T's_device'\(sc27\T.
.pg
The \fIcurrent\fR font, initially Roman, may be changed
(among the mounted fonts)
by use of the \T'ft'\fBft\fR\T request,
or by imbedding at any desired point
either \A'e_f'\fB\ef\fIx\fR, \fB\ef(\fIxx\fR, \fB\ef[\fIxxx\fB]\fR, or \fB\ef\fIN\fR
where
\fIx\fR, \fIxx\fR, and \fIxxx\fR are the name of a mounted font
and \fIN\fR is a numerical font position.
.pg
It is \fInot\fR necessary to change to the Special font;
characters on that font are automatically handled
as if they were physically part of the current font.
The Special font may actually be several fonts;
the name \fBS\fP
is reserved and is generally used for one of these.
The \T'fallback'\fBfallback\fR\T request sets a font-specific sequence
of additional fonts that are searched for missing characters.
.pg
\*(TR can be informed that any particular font is mounted
by use of the \T'fp'\fBfp\fR\T request.
The list of known fonts is installation dependent.
In the subsequent discussion of font-related requests,
\fIF\fR represents either a one/two-character
font name or the numerical font position.
The current font is available (as numerical position)
in the read-only number register \A'n_.f'\fB.f\fR;
the \A'n_.fp'\fB.fp\fR register holds the next unused position.
.pg
A request for a named but not-mounted font is honored
if the font description information exists.
In this way, there is no limit on the number of fonts that may be printed
in any part of a document.
Mounted fonts may be handled more efficiently,
and they may be referred to by their mount positions,
but there is no other difference.
Mention of an unmounted font loads it temporarily at font position
zero, which serves as a one-font cache.
.pg
The function \A'e_S'\fB\eS\fI'\(+-N'\fR
causes the current font to be slanted by \fI\(+-N\fR degrees.
Not all devices support slanting.
.pg
\*(NR understands font control
and normally underlines Italic characters \T'c_nrofful'(see \(sc10.5).\T
.sc
Character size.
Character point sizes available depend on the specific output device;
a typical (historical) set of values is
6, 7, 8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 28, and 36.
This is a range of 1/12 inch to 1/2 inch.
Modern output devices such as the default \fBdevps\fR
usually allow the point size to be set to arbitrary values,
including fractional points.
The \T'ps'\fBps\fR\T request is used to change or restore the point size.
Alternatively the point size may be changed between any two characters
by imbedding a \A'e_s'\fB\es\fIN\fR
at the desired point
to set the size to \fIN\fR,
or a \fB\es\fI\(+-N\fR (1\(<=\fIN\fR\(<=8)
to increment/decrement the size by \fIN\fR;
\fB\es0\fR restores the \fIprevious\fR size.
On historical output devices,
requested point size values that are between two valid
sizes yielded the larger of the two.
.pg
Note that through an accident of history, a construction like
.B \es39
is parsed as size 39, and thus converted to size 36 (given the sizes above),
while
.B \es40
is parsed as size 4 followed by 
\fB0\fR.
The forms
\fB\es(\fInn\fR, \fB\es\(+-(\fInn\fR,
\fB\es\'\fI\(+-nn\fB\'\fR, \fB\es\fI\(+-\fB\'\fInn\fB\'\fR,
\fB\es[\fI\(+-nn\fB]\fR, and \fB\es\fI\(+-\fB[\fInn\fB]\fR
permit specification of sizes that would otherwise be ambiguous.
.pg
The current size (in points) is available in the \A'n_.s'\fB&s\fR register.
Note that this may be a decimal fraction
if the current point size is not an integer.
The \A'n_.ps'\fB&ps\fR register
stores the current size in units.
The \A'n_.sr'\fB&sr\fR and \A'n_.psr'\fB&psr\fR registers
store the requested point size
in points and units, respectively;
it is identical to the current size on
modern output devices.
\*(NR ignores type size control.
.pg
The function \A'e_H'\fB\eH\fI\'\(+-N'\fR
sets \H'+2'the height of the current font\H'0' to
\fIN\fP, or increments it by +\fIN\fR, or decrements it by \-\fIN\fP;
if \fIN\fR=0, the height is restored to the current point size.
In each case, the width is unchanged.
Not all devices support independent height and width for characters.
.h1
.bta lc_ctype
\fB&lc_ctype\fI|name\fR	ignored	\(en	Set the \s-1LC_CTYPE\s+1 locale
to \fIname\fR.
The default is the value
of the \s-1LC_CTYPE\s+1 environment variable.
This request is
useful to specify an input character set regardless of environment
influences.
The current value is available in the \A'n_.lc_ctype'\fB&lc_ctype\fR
number register.
.bta ps
\fB&ps\fI|\(+-N\fR	10\|point	previous	E,\fBp\fR	Point size
set to \(+-\fIN\fR.
Alternatively imbed \fB\es\fIN\fR, \fB\es\fI\(+-N\fR,
or \fB\es\'\fIN\fB\'\fR.
Any positive size value may be requested on modern devices.
If invalid, the next larger valid size will result on traditional devices,
with a maximum of 36.
A paired sequence
\(pl\fIN\fR,\|\(mi\fIN\fR
will work because the previous requested value is also remembered.
Ignored in \*[NR.]
.bta fzoom
\fB&fzoom\fI|F|Z\fR	1	ignored	P,T	Zoom font \fIF\fR by factor \fIZ\fR,
which is a positive floating point number.
This request is useful for adjusting fonts with different
visual sizes but identical nominal points; the zoom is thus not
applied to characters from another font that have been found by
the \T'fallback'\fBfallback\fR\T sequence or by the special font mechanism.
The current value of the current font is available
in the \A'n_.fzoom'\fB&fzoom\fR number register.
.bta ss
\fB&ss\fI|N\fR|[\fIM\fR]	12/36\|m	ignored	E,T	Space-character size
is set to \fIN\fR/36\|ems.
This size is the minimum word spacing in adjusted text.
The optional second argument
sets the space that is added between sentences
to \fIM\fR/36\|ems.
Ignored in \*[NR.]
The number registers \A'n_.ss'\fB&ss\fR and \A'n_.sss'\fB&sss\fR
contain the current values of \fIN\fR and \fIM\fR, respectively.
.bta cs
\fB&cs\|\fIF\|N\|M\fR	off	\(en	P	Constant character space
(width) mode is
set on for font \fIF\fR (if mounted); the width of every character will be
taken to be \fIN\fR/36 ems.
If \fIM\fR is absent,
the em is that of the character's point size;
if \fIM\fR is given,
the em is \fIM\fR-points.
All affected characters
are centered in this space, including those with an actual width
larger than this space.
Special Font characters occurring while the current font
is \fIF\fR are also so treated.
If \fIN\fR is absent, the mode is turned off.
The mode must be still or again in effect when the characters are physically printed.
Ignored in \*[NR.]
.bta bd
\fB&bd\fI|F|N\fR	off	\(en	P	The characters in font \fIF\fR will be artificially
emboldened by printing each one twice, separated by \fIN\fR\^\(mi1 basic units.
A reasonable value for \fIN\fR is 3 when the character size is in the vicinity
of 10 points.
If \fIN\fR is missing the embolden mode is turned off.
The emboldening value \fIN\fP is in the \A'n_.b'\fB.b\fR register.
.xx
.bd R 3
This paragraph is printed with \fI.bd R 3\fR.
The mode must be still or again in effect when the characters are physically printed.
Ignored in \*[NR.]
.br
.bd R
.bt
\fB&bd|S|\fIF|N\fR	off	\(en	P	The characters in the Special Font
will be emboldened whenever the current font is \fIF\fR.
The mode must be still or again in effect when the characters are physically printed.
.bta ft
\fB&ft|\fIF\fR	Roman	previous	E	Font changed to
\fIF\fR.
Alternatively, imbed \fB\ef\fIF\fR.
The font name \fBP\fR is reserved to mean the previous font,
and the name \fBS\fR for the special font.
.bta fp
\fB&fp|\fIN|F|\fR[\fIfile|\fR[\fIsupply\fR]]	ignored	P	Font position.
This is a statement
that a font named \fIF\fR is mounted on position \fIN\fR.
With two arguments,
it is a fatal error if \fIF\fR is not known
as a legacy \*(TR font file \T'c_fontdescr'(\(sc27.2).\T
.xx
With three or more arguments,
font metrics are read from the given \fIfile\fR,
which must be in Type\ 1, OpenType,
or TrueType format.
If the \fB\s-1TROFFONTS\s+1\fR environment variable is set,
each of the colon-separated directories in it is tested for the files
\fIfile.afm\fR, \fIfile.otf\fR, \fIfile.ttf\fR,
or, if the \fIfile\fR argument
has an \fB.afm\fR, \fB.otf\fR, or \fB.ttf\fR extension itself,
for \fIfile\fR.
Otherwise, the font is loaded from the file
\fB/usr/ucblib/doctools/font/devps/\fIfile\fB.afm\fR.
.xx
The \fIN\fR argument specifies a register on which
the font is to be mounted (1\(<=\fIN\fR\(<=255).
If it is zero, the font is mounted on the next
free position (not on position zero).
At most 255 fonts may be mounted simultaneously;
it is possible to use more than 255 fonts in a document
by reusing font registers.
.xx
The font is then available with \fB&ft F\fR, \fB\efF\fR, etc.
\fBF\fR may be freely chosen,
and may consist of more than two characters.
.xx
\fIF\fR may be the name of a previously mounted font, such
as \fBR\fR.
In this case, the same \fIN\fR register must be reused.
For best
compatibility with conventional \*(TR usage, it is recommended
that the base fonts of a document are mounted as ``1\ R'', ``2\ I'',
``3\ B'', ``4\ BI''.
The initial fonts on positions 9 (\fBS1\fR) and 10 (\fBS\fR) should not be
changed, as they contain special metrics for drawing commands.
.xx
If the optional \fIsupply\fR argument is present, glyph data
is included in the generated \*(PS file.
If \fIsupply\fR
is one of \fBotf\fR, \fBpfb\fR, \fBpfa\fR, \fBttf\fR, or \fBt42\fR, the file
\fIsupply.pfb\fR (or likewise) is searched in the directories
in \fB\s-1TROFFONTS\s+1\fR first as described
for the \s-1AFM\s+1 file above, and if it is not found there, in
\fB/usr/ucblib/doctools/font/devps/\fIsupply\fB.pfb\fR (or
likewise).
\fIsupply\fR may also be the basename of a file like
\fIfile\fR above.
.xx
The \fIfilename\fP may be surrounded by double-quotes to permit imbedded
space characters.
.bta fps
\fB&fps\fI|map|...\fR		ignored	P,T	\
Mount a font with a special character map.
By default, special characters like \fB\e(\(**a\fR
are not assigned when a font is mounted
even if a matching named \*(PS character (like \fB\e[alpha]\fR)
would have been available.
The following special character maps
exist:
.xx
\fBmath\fR	mathematical characters like \(<= \(cu \(-> \(if
.br
\fBgreek\fR	greek characters like \(*a \(*b \(*g \(*A \(*B \(*G
.br
\fBpunct\fR	the characters \e(or \- \e\` \e\' " # < > @ \e ^ ~
.br
\fBlarge\fR	parts of large characters like \(rc \(rk \(lb \(lk
.xx
The \fBpunct\fR map is used by default
for the \fBps\fR and \fBpsmed\fR devices.
.xx
The remaining arguments are handled as described for \T'fp'\fBfp\fR.\T
.bta feature
\fB&feature\fI|F|\(+-name|...\fR	ignored	P,T	\
Enable (+) or disable (\-) the OpenType feature \fIname\fR in font \fIF\fR.
Only OpenType features that result in context-insensitive
single-character substitutions are supported.
Typical features
are \fBonum\fR to enable old-style numerals, or \fBsmcp\fR to enable
small capitals.
.bta fallback
\fB&fallback\fI|F|A|B|...\fR	ignored	P,T	\
Select the fallback sequence for font \fIF\fR.
If the current font is \fIF\fR and a character is not found,
font \fIA\fR is searched first, then font \fIB\fR, etc.
If the character still has not been found,
it is searched for in the Special Font,
then in the fonts mounted at positions 0, 1, and so forth.
.bta hidechar
\fB&hidechar\fI|F|c|d|...\fR	ignored	P,T	Hide the characters \fIc\fR, \fId\fR, etc. from font F.
If the characters appear in input afterwards,
they are searched in other fonts using the fallback sequence.
This is useful e.g. for combining characters from a regular
and a Type\ 1 expert font.
.bta spacewidth
\fB&spacewidth\fI|\fIN\fR	on	O,T	If \fIN\fR\(!=0, use the space width from the font metrics file.
The space width otherwise defaults to 1/3\|em for
variable-width fonts, or to the width of the \fBspace\fR character
for monospaced fonts.
With this request, the space width
is set to the width of the \fBspace\fR character
as obtained from the font metrics file
for variable-width fonts too.
.bta fspacewidth
\fB&fspacewidth\fI|F|\fR[\fIN\fR]	ignored	O,T	Set the width
of the space character in font \fIF\fR to \fIN\fR,
which is given in units of 1/72000 of an inch multiplied by the
current point size or 1/1000 of an em (as in \s-1AFM\s+1 kerning pair
definitions).
If only one argument is present, the space width
is set to the width of the \fBspace\fR character as obtained from the
font metrics file.
.xx
When the width of spaces in output is actually computed,
the space size as set by \T'ss'\fBss\fR\T is also taken into account.
The space width as defined above is used directly with
\fB&ss 12\fR, which is the default.
Otherwise, it is multiplied
by the \fBss\fR setting divided by 12.
.mha s_page
Page control
.pg
Top and bottom margins are \fInot\fR automatically provided;
it is conventional to define two \fImacros\fR and to set \fItraps\fR
for them at vertical positions 0 (top) and \fI\(miN\fR (\fIN\fR from the bottom).
See \T's_mac'\(sc7\T and \T'T2'Tutorial Examples \(scT2.\T
A pseudo-page transition onto the \fIfirst\fR page occurs
either when the first \fIbreak\fR occurs or
when the first \fInon-diverted\fR text processing occurs.
Arrangements
for a trap to occur at the top of the first page
must be completed before this transition.
In the following, references to the \T'c_diversion'\fIcurrent diversion\fR (\(sc7.4)\T
mean that the mechanism being described works during both
ordinary and diverted output (the former considered as the top diversion level).
.pg
The physical limitations on \*(TR and \*(NR output
are device dependent.
.h1
.bta pl
\fB&pl\fI|\(+-N\fR	11\|in	11\|in	\fBv\fR	Page length set to \fI\(+-N\fR.
The current page length is available in the \A'n_.p'\fB.p\fR register.
.bta papersize
\fB&papersize\fI|media\fR	ignored	T,\fBu\fR	Set the paper size.
\fImedia\fR can be one of
\fBexecutive\fR,
\fBletter\fR,
\fBlegal\fR,
\fBledger\fR,
\fBtabloid\fR,
\fBa\fIN\fR,
\fBb\fIN\fR,
\fBc\fIN\fR,
or two numbers giving the width and height directly.
The page length is set from these
parameters, the page offset and line length are adjusted as needed,
and the post-processor is informed about the page metrics for its
internal calculations.
The last action is the real reason why this
request exists; without it, \*(PS printers may displace the
pages of the document.
The default are \fBletter\fR measurements.
This
request should be used early in a document; if it is given multiple
times, the last one will setup the device.
.bta mediasize
\fB&mediasize\fI|media\fR	ignored	T,\fBu\fR	Set the device media size.
\fImedia\fR can be one of
\fBexecutive\fR,
\fBletter\fR,
\fBlegal\fR,
\fBledger\fR,
\fBtabloid\fR,
\fBa\fIN\fR,
\fBb\fIN\fR,
\fBc\fIN\fR,
or two numbers giving the width and height directly.
This request performs the same actions as
\T'papersize'\fBpapersize\fR\T and generates
a device setup command in addition (the \*(PS Level 2 operator
\fBsetpagedevice\fR as well as the DSC comment
\fB%%DocumentMedia:\fR with \fIdpost\fR).
The effect of this command can be the selection of a
matching paper tray on a printer; on the other hand, the document
may not print at all if no such tray is available.
In general, it is recommended to use printer-specific
options from a \s-1PPD\s+1 file
when the file is submitted to the print spooling system instead
of this request.
However, when generating \*(PS as
intermediate format with the intent of \*[PDF] creation, use of this
request is recommended.
.bta cropat
\fB&cropat\fI|L|T|W|H\fR	ignored	T,\fBp\fR	Set the ``CropBox'' page parameter for \*[PDF] generation.
The four arguments give the offset from the left (\fIL\fR)
and top (\fIT\fR) margins of the document
(as set by \T'mediasize'\fBmediasize\fR\T),
and width (\fIW\fR) and height (\fIH\fR) of the box.
The default units are points.
The CropBox restricts the
area of the page that is shown by a \*[PDF] viewer program.
It is
useful to hide cut marks and other printing instructions when
the same \*[PDF] document is intended to be displayed on screen.
.bta trimat
\fB&trimat\fI|L|T|W|H\fR	ignored	T,\fBp\fR	Set the ``TrimBox'' page parameter for \*[PDF] generation
and enables printing of marks when combined with \fIdpost\ \-M\fR.
The four arguments give the offset from the left (\fIL\fR)
and top (\fIT\fR) margins of the document
(as set by \T'mediasize'\fBmediasize\fR\T),
and width (\fIW\fR) and height (\fIH\fR) of the box.
The default units are points.
The TrimBox specifies how
the page is to be cut after it has been printed; it is sort of
an electronic equivalent for cut marks (which should continue to
be printed in addition).
.bta bleedat
\fB&bleedat\fI|L|T|W|H\fR	ignored	T,\fBp\fR	Set the ``BleedBox'' page parameter for \*[PDF] generation.
The four arguments give the offset from the left (\fIL\fR)
and top (\fIT\fR) margins of the document
(as set by \T'mediasize'\fBmediasize\fR\T),
and width (\fIW\fR) and height (\fIH\fR) of the box.
The default units are points.
The BleedBox should be defined
as a a frame around the objects of the actual document including
any bleed areas (i.e. content that should extend to the end of the
trimmed final page but is extended a bit such to work around
possible cutting inaccuracies).
Cut marks, color bars, and other
information for the printing office should be positioned outside
the BleedBox.
.bta bp
\fB&bp\fI|\(+-N\fR	\fIN\(eq\fR1	\(en	B	Begin page.
The current page is ejected and a new page is begun.
If \fI\(+-N\fR is given, the new page number will be \fI\(+-N\fR.
Also see request \T'ns'\fBns\fR\T.
.bta pn
\fB&pn\fI|\(+-N\fR	\fIN\fR\(eq1	ignored	\(en	Page number.
The next page (when it occurs) will have the page number \fI\(+-N\fR.
A \fBpn\fR must occur before the initial pseudo-page transition
to effect the page number of the first page.
The current page number is in the \A'n_%'\fB%\fR register.
The number of the next page is in the \A'n_.pn'\fB&pn\fR register;
this is either the value set by \fBpn\fR
or the current page number plus 1.
.bta po
\fB&po\fI|\(+-N\fR	0;1i	previous	\fBm\fR	Page offset.
The current \fIleft margin\fR is set to \fI\(+-N\fR.
The \*(TR initial value provides about 1|inch of paper margin
on a typical device.
The current page offset is available in the \A'n_.o'\fB.o\fR register.
.bta ne
\fB&ne\fI|N\fR	\(en	\fIN\(eq\fR1\|\fIV\fR	D,\fBv\fR	Need \fIN\fR vertical space.
If the distance, \fID\fR, to the next trap position
\T'c_trap'(see \(sc7.5)\T is less than \fIN\fR,
a forward vertical space of size \fID\fR occurs,
which will spring the trap.
If there are no remaining
traps on the page,
\fID\fR is the distance to the bottom of the page.
If \fID\|<\|V\fR, another line could still be output
and spring the trap.
In a \T'c_diversion'diversion\T,
\fID\fR is the distance to the \fIdiversion trap\fR, if any,
or is very large.
.bta mk
\fB&mk\fI|R\fR	none	internal	D	Mark the \fIcurrent\fR vertical place
in an internal register (both associated with the current
\T'c_diversion'diversion\T level),
or in register \fIR\fR, if given.
See \fBrt\fR request.
.bta rt
\fB&rt\fI|\(+-N\fR	none	internal	D,\fBv\fR	Return \fIupward only\fR to a marked vertical place
in the current \T'c_diversion'diversion\T.
If \fI\(+-N\fR (w.r.t. current place) is given,
the place is \fI\(+-N\fR from the top of the page or \T'c_diversion'diversion\T
or, if \fIN\fR is absent, to a
place marked by a previous \fBmk\fR.
Note that the \T'sp'\fBsp\fR request (\(sc5.3)\T may be used
in all cases instead of \fBrt\fR
by spacing to the absolute place stored in a explicit register;
e.g. using the sequence \fB.mk|\fIR\fR ... \fB.sp|~\|\en\fIR\fBu\fR;
this also works when the motion is downwards.
.mha s_fill
Text Filling, Adjusting, and Centering
.sc
Filling and adjusting.
Normally,
words are collected from input text lines
and assembled into a output text line
until some word does not fit.
An attempt is then made
the hyphenate the word in effort to assemble a part
of it into the output line.
The spaces between the words on the output line
are then increased to spread out the line
to the current \fIline length\fR
minus any current \fIindent\fR.
A \fIword\fR is any string of characters delimited by
the \fIspace\fR character or the beginning/end of the input line.
Any adjacent pair of words that must be kept together
(neither split across output lines nor spread apart
in the adjustment process)
can be tied together by separating them with the
\fIunpaddable space\fR character
\A'e_ '"\fB\e\ \ \fR" (backslash-space).
The paddable no-break space character \A'e_~'\fB\e\(ap\fR
keeps words on the same output line but may be spread during adjustment.
The adjusted word spacings are uniform in \*(TR
and the minimum interword spacing can be controlled
with the \T'ss'\fBss\fR request\T \T's_font'(\(sc2).\T
In \*[NR,] word spacings are normally nonuniform because of
quantization to character-size spaces;
however,
the command line option \fB\-e\fR causes uniform
spacing with full output device resolution.
Filling, adjustment, and hyphenation \T's_hyphen'(\(sc13)\T can all be
prevented or controlled.
The \fItext length\fR on the last line output is available
in the \A'n_.n'\fB.n\fR register,
and text base-line position on the page for this line is
in the \A'n_nl'\fBnl\fR register.
The text base-line high-water mark (lowest place) on the current page is in
the \A'n_.h'\fB.h\fR register.*
.br
.fn
.sp .3
\(**\|Local motions have no effect on register \fB&h\fR.
.ef
The current horizontal output position
is in the \A'n_.k'\fB.k\fR register.
The \A'n_.x'\fB.x\fR register indicates
the remaining horizontal space on the current output line.
.pg
Text lines beginning with space characters
and empty text lines (blank lines) cause a break.
The filling of the line currently
being collected is stopped and
the line is output without adjustment.
The \fB.blm\fR request can be used to redefine the processing
of blank input lines.
With the \fB.lsm\fR request the effect of lines beginning with
spaces is changed.
The read-only number register \A'n_lsn'\fBlsn\fR contains the number of
leading spaces.
The read-only number register \A'n_lss'\fBlss\fR contains the horizontal
space which corresponds to the leading spaces.
Both registers are set also if \fB.lsm\fR is not used.
.pg
\*(TR can optionally decrease word spacings,
change the letter spacing,
and reshape letters
when adjusting lines to fit on both margins.
The interword spacing controlled with the \T'ss'\fBss\fR request\T
is then understood as the optimum setting.
Words are collected from input until the first word
that would require to condense spacing or letter shapings is encountered.
Between the end of the previous word and the end of this word,
hyphenation points are additionally examined
until the two possibilities to end the line
surrounding the optimum are found.
The point closest to the optimum is then chosen.
If the word spacing so determined would fall below
the minimum allowed, letter spacings and shapings are condensed.
If it would exceed the threshold for expanded letter spacing and letter shaping,
it is attempted to compensate until the threshold is reached,
up to the maximum allowed letter spacing
and letter shaping.
Remaining space is distributed among the word spacings.
Distribution among letter spacings and shaping is equal
until one of the respective limits is reached.
Lines that terminate with a \fIbreak\fR
are normally set using the optimum word and line spacings
unless the last word collected is the first word
that falls below the optimum spacing,
which may result in condensed spacing and shaping.
The horizontal positions in the \fB.k\fR and \fB.x\fR registers
are always computed using default character and spacing widths.
.pg
\A'ad_p'As an alternative to adjusting one line at a time as described,
\*(TR also supports adjusting one paragraph at once.
In this mode,
words are collected from input lines
and requests are processed
until a \fIbreak\fR occurs.
The words are then split into lines
such that the interword spaces
are closest to the optimum setting
across the entire paragraph.
Ultimately, the lines so determined
are printed.
\T'c_trap'Traps\T, page breaks,
and any positioning become effective only at this time.
It is thus well possible that the current page number
as read on the input line in the \T'n_%'\fB%\fR\T register
is lower than the number of the page
on which the corresponding text is actually output.
Any reference to the page number or page position
(e.g. writing an index entry)
should thus be handled using
the \T's_olt'output-line trap\T mechanism
instead of in-line macros.
Likewise the \T'n_.k'\fB.k\fR\T and \T'n_.x'\fB.x\fR\T
registers are not meaningful in this mode,
except that \T'n_.k'\fB.k\fR\T is never zero
when text is present in a partial paragraph.
.pg
.tr &&
An input text line ending with \fB.\fR\^, \fB?\fR, \fB!\fR, or \fB:\fR,
optionally followed by any number of \fB"\fR, \fB\'\fR,
\fB)\fR, \fB]\fR, \fB*\fR, or \fB\(dg\fR,
is taken
to be the end of a \fIsentence\fR, and an additional space character is
automatically provided during filling.
To prevent this at individual locations,
add \A'e_&'\fB\e&\fR to the end of the input line;
the second argument to the \T'ss'\fBss\fR request\T \T's_font'(\(sc2)\T
changes the size of this space character and can also disable it globally.
Both the sentence-ending and the transparent characters are configurable.
The \A'e_)'\fB\e)\fR character is always transparent
but behaves like \fB\e&\fR in all other respects.
Multiple inter-word space characters found in the input are retained,
although the second character in a sequence of spaces
following a sentence-ending character
has the width of a sentence space;
if the sentence space has been set to zero,
any sequence of spaces following a sentence-ending character
has the width of a single space.
Trailing spaces are always discarded.
Initial spaces are always retained and also cause a \fIbreak\fR.
.pg
With the \fBbrnl\fR request,
a \fIbreak\fR occurs at the end of each text input line in fill mode,
except for lines \T'c_intr'interrupted\T with \T'e_c'\fB\ec\fR\T.
Contrasting to nofill mode,
text is still adjusted to the line length.
.pg
When filling is in effect, a \A'e_p'\fB\ep\fR may be imbedded or attached to a word to
cause a \fIbreak\fR at the \fIend\fR of the word and have the resulting output
line \fIspread out\fR to fill the current line length.
.pg
When adjusting paragraphs at once,
is possible to specify additional \fIpenalties\fR
for putting a line break after the current word
(or part of a hyphenated word)
by imbedding or attaching a \A'e_j'\fB\ej\fI\'\(+-N\'\fR to it.
A positive value of \fIN\fR discourages a line break,
a negative value encourages it.
Values of 1\^000\^000 and above
are taken as infinitive penalties
and always prevent a line break;
values of \-1\^000\^000 always cause a line break.
A default penalty can be set
with the \A'e_J'\fB\eJ\fI\'\(+-N\'\fR escape sequence;
this is useful to discourage line breaks
within a certain group of words,
e.g. a person's name or a formula.
Relative values in the argument to \fB\ej\fR
refer to the default penalty.
The current default penalty is available
in the \A'n_.defpenalty'\fB.defpenalty\fR number register.
Separate penalties can be specified
for breaking a line after a hyphenated word part
using the \T'hypp'\fBhypp\fR\T request
\T's_hyphen'(\(sc13).\T
.pg
With the \fBbrpnl\fR request,
each end of a text input line in fill mode
causes a \fIbreak\fR and a spread,
except for lines \T'c_intr'interrupted\T with \T'e_c'\fB\ec\fR\T.
The meaning of \fB\ep\fR is then changed
such that a line that it is attached to is \fInot\fR spread;
this is the only method to achieve a regular \fIbreak\fR without a spread then.
Manually adjusted text can thus be typed more comfortably
since only the (fewer) lines that are not spread 
need to be marked.
.pg
A text input line that happens to begin
with a control character can
be made to not look like a control line
by prefacing it with
the non-printing, zero-width filler character \fB\e&\fR.
Still another way is to specify output translation of some
convenient character into the control character
using \T'tr'\fBtr\fR\T \T'c_trans'(\(sc10.5).\T
.sc
.tr &.
\A'c_intr'Interrupted text.
The copying of a input line in \fInofill\f (non-fill) mode can be \fIinterrupted\fR
by terminating
the partial line with a \A'e_c'\fB\ec\fR.
The \fInext\fR encountered input text line will be considered to be a continuation
of the same line of input text.
Similarly,
a word within \fIfilled\fR text may be interrupted by terminating the
word (and line) with \fB\ec\fR;
the next encountered text will be taken as a continuation of the
interrupted word.
If the intervening control lines cause a break,
any partial line will be forced out along with any partial word.
The \A'n_.int'\fB&int\fR number register
is set to a non-zero value if the previous line was interrupted
and to zero otherwise.
The length of a partial word is ignored
for the value of the \T'n_.k'\fB&k\fR\T number register in \fIfill\fR mode;
it is separately available with the \A'n_.kc'\fB&kc\fR register.
.sc
.tr &&
\A'c_kerning'Kerning.
\*(TR reads kerning tables from Type\ 1,
OpenType, and TrueType font files.
These tables contain small horizontal spacing adjustments
for pairs of individual characters,
e.g., the pair ``Vo'' would print as ``V\&o''
without kerning applied.
Placing \fB\e&\fR between two characters
disables kerning at that location;
the \T'kern'\fBkern\fR\T request can disable it globally.
The \T'kernpair'\fBkernpair\fR\T request adds a kerning pair;
in contrast to predefined pairs,
it allows the characters to originate from different fonts.
.pg
.kernafter R \[guillemotleft] 66
.kernbefore R \[guillemotright] 66
It is sometimes useful to add or substact a constant amount of spacing
whenever a specific character appears;
for example, \[guillemotleft]french\[guillemotright]
quotation marks usually require some additional distance
to the words contained in them.
The \T'kernafter'\fBkernafter\fR\T and
\T'kernbefore'\fBkernbefore\fR\T requests allow
to define such adjustments.
Again, a \fB\e&\fR disables them at individual points;
they are generally not applied if the other character is a space.
.tr &.
.sc
Hanging characters.
Characters can hang beyond the left or right margins of adjusted text;
the \T'lhang'\fBlhang\fR\T and
\T'rhang'\fBrhang\fR\T requests specify this.
Left margin adjustments are evaluated before the letters that fit on the
current line are computed, and can thus principally be of any length.
In contrast, right margin adjustments are evaluated after this computation
is finished, and the adjustment is simply added to the word space of the
output line.
Thus a positive right adjustment that is large in relation
to the line length will cause visible holes, and a negative adjustment
will ultimately cause the words on the line to be printed over each
other.
This is not a problem for the typical application of hanging
punctuation for visual alignment, though;
if e.g. a line with eight word
spaces is shifted by .08 em,
each word space is enlarged by only .01 em.
.h1
.bta br
\fB&br\fR	\(en	\(en	B	Break.
The filling of the line currently
being collected is stopped and
the line is output without adjustment.
Text lines beginning with space characters
and empty text lines (blank lines) also cause a break
(This can be changed with the \fB.blm\fR and \fB.lsm\fR
requests.).
.br
.tr &&
.bta lsm
\&\fB.lsm\fI|xx\fR	none	none	\(en	Whenever a line
beginning with spaces is encountered,
the macro \fIxx\fR is invoked
instead of the default behavior to cause a break.
If the spaces are followed by an escape, that may be processed
before the macro is called (e.g. font changes).
To avoid this prepend that escape with \fB\e&\fR.
.br
.tr &.
.bta brp
\fB&brp\fR	\(en	\(en	B	Break and spread;
same effect as the \T'e_p'\fB\ep\fR\T escape sequence
except that it causes the remaining part
of a paragraph shape as set with
\T'pshape'\fBpshape\fR\T to be discarded.
.bta fi
.lg 0
\fB&fi\fR	\(fill|on	\(en	B,E	Fill subsequent output lines.
.lg
The register \A'n_.u'\fB.u\fR is 1 in fill mode and 0 in nofill mode.
.bta nf
\fB&nf\fR	fill|on	\(en	B,E	Nofill.
Subsequent output lines are \fIneither\fR filled \fInor\fR adjusted.
Input text lines are copied directly to output lines
\fIwithout regard\fR for the current line length.
.bta ad
\fB&ad\fI|c\fR	adj,both	adjust	E	\
Line adjustment is begun.
If fill mode is not on, adjustment will be deferred until
fill mode is back on.
If the type indicator \fIc\fR is present,
the adjustment type is changed as shown in the following table.
.TS
center box;
c|c
c|l.
Indicator	Adjust Type
_
\fBl\fR	adjust left margin only
\fBr\fR	adjust right margin only
\fBc\fR	center
\fBb\fR or \fBn\fR	adjust both margins
\fBp\fR or \fBpb\fR	adjust both margins paragraph-wise
\fBpl\fR	adjust left margin paragraph-wise
\fBpr\fR	adjust right margin paragraph-wise
\fBpc\fR	center paragraph-wise
absent	unchanged
.TE
The number register \A'n_.j'\fB.j\fR contains the current value
of the \T'ad'\fBad\fR\T setting;
its value can be recorded and used subsequently
to set adjustment.
.bta na
\fB&na\fR	adjust	\(en	E	Noadjust.
Adjustment is turned off;
the right margin will be ragged.
The adjustment type for \fBad\fR is not changed.
Output line filling still occurs if fill mode is on.
.bta padj
\fB&padj\fI|N\fR	off	on	\(en	Control paragraph-at-once adjustment globally.
If \fIN\fR\(!=0 or missing,
paragraph-at-once adjustment is enabled in all environments,
and \fBad\ \fIx\fR effectively acts like \fBad\ p\fIx\fR.
The current value is available in the \A'n_.padj'\fB&padj\fR register.
.bta ce
\fB&ce\fI|N\fR	off	\fIN\fR\(eq1	B,E	Center the next \fIN\fR input text lines
within the current (line-length minus indent).
If \fIN\fR\(eq\^0, any residual count is cleared.
A break occurs after each of the \fIN\fR input lines.
If the input line is too long,
it will be left adjusted.
The number of lines to be right-aligned, if any,
is set to zero.
The remaining number of lines to be centered
is available in the \A'n_.ce'\fB&ce\fR register.
.bta rj
\fB&rj\fI|N\fR	off	\fIN\fR\(eq1	B,E	Right-align the next \fIN\fR input text lines
within the current (line-length minus indent);
otherwise like \fBce\fR.
The number of lines to be centered, if any,
is set to zero.
The remaining number of lines to be right-justified
is available in the \A'n_.rj'\fB&rj\fR register.
.bta brnl
\fB&brnl\fI|N\fR	off	\fIN\(eq\fR\(if	B,E	Break at end of next \fIN\fR input text lines
when filling is in effect.
The remaining number of lines so treated
is available in the \A'n_.brnl'\fB&brnl\fR register.
.bta brpnl
\fB&brpnl\fI|N\fR	off	\fIN\(eq\fR\(if	B,E	Break and spread at end of next \fIN\fR input text lines
when filling is in effect.
The remaining number of lines so treated
is available in the \A'n_.brpnl'\fB&brpnl\fR register.
\fBbrpnl\fR disables \fBbrnl\fR and vice-versa.
.bta minss
\fB&minss\fI|N\fR	off	off	E,T	Minimum word space.
When adjusting both margins,
\*(TR may decrease the size of the word space
down to \fIN\fR/36\|ems
(rather than to the value set by \T'ss'\fBss\fR\T).
The current value is available in the \A'n_.minss'\fB&minss\fR register.
.bta letadj
\fB&letadj\fI|X|U|S|Y|V\fR	off	E,T	Dynamic letter spacing and reshaping when adjusting lines.
The space between letters can be automatically expanded or condensed
(in addition to the space between words),
and the width of letters can be automatically changed
in \fBad\ b\fR mode.
The \fIX\fR argument gives the minimum percentage
of an en of the current point size by which
adjacent characters may be tightened;
the \fIU\fR argument gives the minimum percentage
of the letter width by which letters may be condensed.
When the computed size of the word space
would have to be larger than \fIS\fR,
additional space will be inserted between letters up to a limit
of \fIY\fR percent of an en of the current point size,
and letters will be expanded by up to \fIV\fR percent of their width
until the word space does not extend beyond \fIS\fR anymore.
\fIS\fR is given in units of 1/36\|ems as with \fBss\fR.
The number registers
\A'n_.lspmin'\fB&lspmin\fR,
\A'n_.lshmin'\fB&lshmin\fR,
\A'n_.letss'\fB&letss\fR,
\A'n_.lspmax'\fB&lspmax\fR,
and \A'n_.lshmax'\fB&lshmax\fR
contain the current values of
\fIX\fR, \fIU\fR, \fIS\fR, \fIY\fR, and \fIV\fR,
respectively.
.bta sentchar
\fB&sentchar\fI|c...\fR	\fB.?!:\fR	off	E	Sentence-ending characters.
When one of the characters \fIc...\fR appears at the end
of an input text line,
an additional space character
of the size defined with the \T'ss'\fBss\fR\T request
is inserted.
The current set of sentence-ending characters is available
in the \A'n_.sentchar'\fB&sentchar\fR number register.
.bta transchar
\fB&transchar\fI|c..\fR	\fB"')]*\(dg\fR	off	E	Transparent characters for sentence-ending.
A sentence-ending character is recognized as such
even if followed by one or more of the characters \fIc...\fR
before the end of an input text line.
The current set of transparent characters for sentence ending is available
in the \A'n_.transchar'\fB&transchar\fR number register.
.bta track
\fB&track\fI|F|S|N|T|M\fR	ignored	P,T,\fBp\fR	Static letter space tracking.
If the current font is \fIF\fR
and the point size is below or equal to \fIS\fR,
white space of width \fIN\fR is added to each character.
If the point size is above or equal to \fIT\fR,
white space of width \fIM\fR is added.
If the point size is between \fIS\fR and \fIT\fR,
the amount of white space added is computed
as a value between \fIN\fR and \fIM\fR using the current point size \fIs\fR:
(\fIs\^M\fR\-\fIs\^N\fR+\fIT\^N\fR\-\fIS\^M\fR)\|/\|(\fIT\fR\-\fIS\fR).
The default unit for all numeric arguments is points.
Negative numbers are accepted and
cause a decrease of letter space.
No adjustment is performed on the last character of an output line.
Tracking also applies to characters
from another font that have been selected
by the \T'fallback'\fBfallback\fP\T sequence.
.bta kern
\fB&kern\fI|N\fR	1	1	P,T	Control pairwise kerning;
disabled if \fIN\fR=0, otherwise enabled.
.bta fkern
\fB&fkern\fI|F|N\fR	1	1	P,T	Control the use of kerning tables from font \fIF\fR;
disabled if \fIN\fR=0,
enabled if \fIN\fR=1 or missing.
For \fIN\fR\(>=2,
only kerning pairs with absolute values greater or equal to \fIN\fR are used.
\*(TR kerning adjustments as defined by the following requests
are not affected.
.bta kernpair
\fB&kernpair\fI|F|c...|G|d...|N\fR	ignored	P,T	Add a kerning pair
to the kerning table for character \fIc\fR
from font \fIF\fR and character \fId\fR from font \fIG\fR.
\fIc\fR and \fId\fR may consist of multiple characters;
in this case, table entries are added
for any pair combination of characters from \fIc\fR and \fId\fR.
The \fIN\fR argument is 1/72\|000 of an inch multiplied by the current point
size or 1/1000 of an em (as in \s-1AFM\s+1 kerning pair definitions);
it may be negative.
To add a kerning pair that includes the space character, use \T'e_ '``\e\ ''.\T
.bta kernafter
\fB&kernafter\fI|F|c...|N|d...|M|...\fR	P,T	Add a constant amount of space after a character
if the current font is \fIF\fR and \fIc\fR
is the first character of a pair of characters subject to kerning.
\fIc\fR may consist of multiple characters;
in this case, the same amount is added
whenever one of the given characters appears.
The \fIN\fR argument is
1/72\|000 of an inch multiplied by the current point size or 1/1000
of an em (as in \s-1AFM\s+1 kerning pair definitions);
it may be negative.
Same for \fId/M\fR etc.
.bta kernbefore
\fB&kernbefore\fI|F|c...|N|d...|M|...\fR	P,T	Add a constant amount of space before a character
if the current font is \fIF\fR and \fIc\fR
is the second character of a pair of characters subject to kerning.
\fIc\fR may consist of multiple characters;
in this case, the same amount is added
whenever one of the given characters appears.
The \fIN\fR argument is
1/72\|000 of an inch multiplied by the current point size or 1/1000
of an em (as in \s-1AFM\s+1 kerning pair definitions);
it may be negative.
Same for \fId/M\fR etc.
.bta lhang
\fB&lhang\fI|F|c...|N|d...|M|...\fR	ignored	T	Hanging characters at left margin.
When the current font is \fIF\fR and \fIc\fR appears at the left margin
of an output line in left-adjusted, both-adjusted, or nofill mode,
the margin is relocated to the right by \fIN\fR, which is
1/72\|000 of an inch multiplied by the current point size or 1/1000
of an em (as in \s-1AFM\s+1 character width definitions);
it may be negative.
\fIc\fR may consist of multiple characters;
in this case, the margin is relocated
whenever one of the given characters appears.
Same for \fId/M\fR etc.
.bta rhang
\fB&rhang\fI|F|c...|N|d...|M|...\fR	ignored	T	Hanging characters at right margin.
When the current font is \fIF\fR and \fIc\fR appears at the right margin
of an output line in right-adjusted, both-adjusted, or nofill mode,
the margin is relocated to the right by \fIN\fR, which is
1/72\|000 of an inch multiplied by the current point size or 1/1000
of an em (as in \s-1AFM\s+1 character width definitions);
it may be negative.
\fIc\fR may consist of multiple characters;
in this case, the margin is relocated
whenever one of the given characters appears.
Same for \fId/M\fR etc.
.mha s_vert
Vertical Spacing
.sc
Base-line spacing.
The vertical spacing \fI(V)\fR between the base-lines of successive
output lines can be set
using the \T'vs'\fBvs\fR\T request.
\fIV\fR should be large enough to accommodate the character sizes
on the affected output lines.
For the common type sizes (9-12 points),
usual typesetting practice is to set \fIV\fR to 2\ points greater than the
point size;
\*(TR default is 10-point type on a 12-point spacing
(as in this document).
The current \fIV\fR is available in the \A'n_.v'\fB.v\fR register.
Multiple-\fIV\|\fR line separation (e.g. double spacing) may be requested
with \T'ls'\fBls\fR,\T
but it is better to use a large \T'vs'\fBvs\fR\T instead;
certain preprocessors assume single spacing.
The current line spacing is available in the \A'n_.L'\fB.L\fR register.
.sc
Extra line-space.
If a word contains a vertically tall construct requiring
the output line containing it to have extra vertical space
before and/or after it,
the \fIextra-line-space\fR function \A'e_x'\fB\ex\fI\'N\'\fR
can be imbedded in or attached to that word.
If \fIN\fR is negative,
the output line containing the word will
be preceded by \fIN\fR extra vertical space;
if \fIN\fR is positive,
the output line containing the word
will be followed by \fIN\fR extra vertical space.
If successive requests for extra space apply to the same line,
the maximum values are used.
The most recently utilized post-line extra line-space is available
in the \A'n_.a'\fB.a\fR register.
.pg
In \fB\ex\fI\'...\'\fR and other functions having a pair of delimiters around
their parameter (here \fB\'\fR\|),
the delimiter choice is arbitrary,
except that it can not look like the continuation
of a \T'c_expr'number expression\T for \fIN\fR.
.sc
Blocks of vertical space.
A block of vertical space is ordinarily requested using \T'sp'\fBsp\fR,\T
which honors the \fIno-space\fR mode and which does
not space \fIpast\fR a trap.
A contiguous block of vertical space may be reserved using \T'sv'\fBsv\fR.\T
.sc
Ascenders and descenders.
Type\ 1, OpenType, and TrueType metrics
supply information about the typical extents
of characters above the base-line (ascender) and below it (descender).
Usually, these correspond to the top of the lowercase ``d''
and the bottom of the lowercase ``p'', respectively.
The \A'n_.ascender'\fB&ascender\fR
and \A'n_.descender'\fB&descender\fR number registers
contain these values in units
with correct scaling for the current point size applied.
If no values are available,
these registers are set to zero.
.h1
.bta vs
\fB&vs\fI\|N\fR	1/6in;12pts	previous	E,\fBp\fR	Set vertical base-line spacing size \fIV\fR.
Transient \fIextra\fR vertical space available with \T'e_x'\fB\ex\fI\'N\'\fR (see above).\T
.bta ls
\fB&ls\fI\|N\fR	\fIN\(eq\^\fR1	previous	E	\fILine\fR spacing
set to \fI\(+-N\fR.
\fIN\(mi\fR1 \fIV\fR\^s \fI(blank lines)\fR are
appended to each output text line.
Appended blank lines are omitted, if the text or previous appended blank line reached a trap position.
.bta sp
\fB&sp\fI|N\fR	\(en	\fIN\fR\(eq1\fIV\fR	B,\fBv\fR	Space vertically in \fIeither\fR direction.
If \fIN\fR is negative, the motion is \fIbackward\fR (upward)
and is limited to the distance to the top of the page.
Forward (downward) motion is truncated to the distance to the
nearest trap.
\T'a_usesp'(Recall the use of \fB.sp\ ~\|\fIN\fR from \(sc1.3.)\T
If the no-space mode is on,
no spacing occurs (see \T'ns'\fBns\fR\T, and \T'rs'\fBrs\fR\T below).
.bta sv
\fB&sv\fI|N\fR	\(en	\fIN\(eq\fR1\fIV\fR	\fBv\fR	Save a contiguous vertical block of size \fIN\fR.
If the distance to the next trap is greater
than \fIN\fR, \fIN\fR vertical space is output.
No-space mode has \fIno\fR effect.
If this distance is less than \fIN\fR,
no vertical space is immediately output,
but \fIN\fR is remembered for later output (see \T'os'\fBos\fR\T).
Subsequent \fBsv\fR requests will overwrite any still remembered \fIN\fR.
.bta os
\fB&os\fR	\(en	\(en	\(en	Output saved vertical space.
No-space mode has \fIno\fR effect.
Used to finally output a block of vertical space requested
by an earlier \fBsv\fR request.
.bta ns
\fB&ns\fR	space	\(en	D	No-space mode turned on.
When on, the no-space mode inhibits \T'sp'\fBsp\fR\T requests and
\T'bp'\fBbp\fR\T requests \fIwithout\fR a next page number.
The no-space mode is turned off when a line of
output occurs, or with \fBrs\fR.
The number register \A'n_.ns'\fB&ns\fR
is set to a non-zero value in no-space mode
and to zero otherwise.
.bta rs
\fB&rs\fR	space	\(en	D	Restore spacing.
The no-space mode is turned off.
.bta blank
Blank|text|line.	\(en	B	Causes a break and
output of a blank line exactly like \fBsp|1\fR
unless a different action has been specified
with the \T'blm'\fBblm\fR request.\T
.\" from file m2
.tr |
.rm mx
.br
.mha s_line
Line Length and Indenting
.pg
The maximum line length for fill mode may be set with \T'll'\fBll\fR.\T
The indent may be set with \T'in'\fBin\fR;\T
an indent applicable to \fIonly\fR the \fInext\fR output line
may be set with \T'ti'\fBti\fR.\T
The line length includes indent space but \fInot\fR
page offset space.
The line-length minus the indent is the basis
for centering with \T'ce'\fBce\fR.\T
The effect of \T'll'\fBll\fR\T, \T'in'\fBin\fR\T, or \T'ti'\fBti\fR\T
is delayed, if a partially collected line exists,
until after that line is output.
In fill mode the length of text on an output line is less than or equal to
the line length minus the indent.
The current line length and indent are available
in registers \A'n_.l'\fB.l\fR and \A'n_.i'\fB.i\fR respectively;
the \A'n_.y'\fB.y\fR and \A'n_.in'\fB.in\fR registers both hold the indent
that actually applies to the current line,
taking a temporary indent into account.
The length of \fIthree-part titles\fR produced by \T'tl'\fBtl\fR\T
\T's_titles'(see \(sc14)\T is \fIindependently\fR set by \T'lt'\fBlt\fR.\T
.xx
In \T'ad_p'\fBad\ p\fR\T mode,
indent, temporary indent, and line length should be predefined
for the entire paragraph
at the time a \fIbreak\fR occurs.
To achieve this with indent and line length varying inside a paragraph,
a shape can be defined with \T'pshape'\fBpshape\fR\T.
The \T'll'\fBll\fR\T and \T'in'\fBin\fR\T requests
are also effective while formatting a paragraph
but may result in less optimal line breaking decisions then.
.h1
.bta ll
\fB&ll\fI|\(+-N\fR	6.5\|in	previous	E,\fBm\fR	Line length is set to \(+-\fIN\fR.
.bta in
\fB&in\fI|\(+-N\fR	\fIN\(eq\^\fR0	previous	B,E,\fBm\fR	Indent is set to \fI\(+-N\fR.
The indent is prepended to each output line.
.bta ti
\fB&ti\fI|\(+-N\fR	\(en	ignored	B,E,\fBm\fR	Temporary indent.
The \fInext\fR output text line will be indented a distance \fI\(+-N\fR
with respect to the current indent.
The resulting total indent may not be negative.
The current indent is not changed.
.bta pshape
.di keep
.hylang en_US
.minss 9
.letadj 95 98 18 105 102
\fB&pshape\fI|\(+-I1|\(+-L1|\(+-I2|\(+-L2|\fR...|off	E,\fBm\fR	Set a special shape for the current paragraph in \T'ad_p'\fBad\ p\fR\T mode.
\#.ds l 4m 6m 8m 10m 12m 14m 16m 18m 20m 22m 24m \
\#22m 20m 18m 16m 14m 12m 10m 8m 6m 4m
\#.ds s
\#.while 1 \{\
\#.	ds c \*l
\#.	index i c " 
\#.	if \ni>=0 \{\
\#.		substring c 0 \ni-1
\#.		substring l \ni+1
\#.	\}
\#.	nr t (\n(.l-\n(.i)-\*c/2
\#.	nr in \n(.iu+\ntu
\#.	nr ll \n(.lu-\ntu
\#.	as s " \n(inu \n(llu
\#.	if \ni<0 .break
\#.\}
\#.pshape \*s
.nr l (\n(.lu-\n(.iu-7.4m)/3
.nr h (\n(.lu-\n(.iu-5m)/2
.nr t \nlu+3.7m
.pshape \
0 \n(.iu+\nlu-1m \
\n(.iu \n(.iu+\nlu-.75m \
\n(.iu \n(.iu+\nlu-.5m \
\n(.iu \n(.iu+\nlu-.25m \
\n(.iu \n(.iu+\nlu \
\n(.iu+\ntu-.5m+1m \n(.iu+\ntu+\nlu-1m+.5m \
\n(.iu+\ntu-.5m+.75m \n(.iu+\ntu+\nlu-.75+.5m \
\n(.iu+\ntu-.5m+.5m \n(.iu+\ntu+\nlu-.5+.5m \
\n(.iu+\ntu-.5m+.25m \n(.iu+\ntu+\nlu-.25+.5m \
\n(.iu+\ntu-.5m \n(.iu+\ntu+\nlu+.5m \
\n(.lu-\nlu+1m \n(.lu \
\n(.lu-\nlu+.75m \n(.lu \
\n(.lu-\nlu+.5m \n(.lu \
\n(.lu-\nlu+.25m \n(.lu \
\n(.lu-\nlu \n(.lu \
\n(.iu \n(.lu \
\n(.iu \n(.lu \
\n(.iu \n(.lu \
\n(.iu \n(.lu \
\n(.iu \n(.iu+\nhu \
\n(.iu \n(.iu+\nhu \
\n(.iu \n(.iu+\nhu \
\n(.iu \n(.iu+\nhu \
\n(.iu \n(.iu+\nhu \
\n(.iu \n(.iu+\nhu \
\n(.iu+\nhu+5m \n(.lu \
\n(.iu+\nhu+5m \n(.lu \
\n(.iu+\nhu+5m \n(.lu \
\n(.iu+\nhu+5m \n(.lu \
\n(.iu+\nhu+5m \n(.lu \
\n(.iu+\nhu+5m \n(.lu \
\n(.iu \n(.lu
.mk T
.nr B \nTu+5v
.nr C \nTu+15v
.dt \nBu T2
.de T2
.ch T2
.sp |\nTu
.dt \nBu T3
..
.de T3
.ch T3
.sp |\nTu
.dt \nCu T4
.
..
.de T4
.ch T4
.sp |\nCu-6v
..
At the next \fIbreak\fR when the paragraph gets formatted,
its first line is indented by \fII1\fR and has length \fIL1\fR,
its second line is indented by \fII2\fR and has length \fIL2\fR,
and so forth.
Relative numbers refer to the previous indent or line length pair,
or to the values set
by \T'in'\fBin\fR\T and \T'll'\fBll\fR\T
for the first pair.
The last of the indent and line length pairs stays effective
if the paragraph has more lines
than pairs are given.
With an odd number of arguments,
the standard line length as set by \T'll'\fBll\fR\T is used at the end.
Once the current paragraph has been printed,
the shape specification is forgotten,
and the standard indent and line length values are in effect again
unless another \fBpshape\fR request occurs.
As an exception, \T'e_p'\fB\ep\fR\T preserves the remaining part
of the shape.
To produce shapes with holes as in this example,
\T'c_trap'diversion traps\T can be used
to move formatted lines in vertical direction.
.br
.di
.ne \n(dnu
.in 0
.nf
.keep
.fi
.hylang
.minss
.letadj
.mha s_mac
Macros, Strings, Diversion, and Position Traps
.sc
Macros and strings.
A \fImacro\fR is a named set of arbitrary \fIlines\fR that may be invoked by name or
with a \fItrap\fR.
A \fIstring\fR is a named string of \fIcharacters\fR,
\fInot\fR including a newline character,
that may be interpolated by name at any point.
Request, macro, and string names share the \fIsame\fR name list.
Macro and string names
may consist of an arbitrary number of \s-1ASCII\s+1 characters
\T'c_char'(\(sc1.1)\T
and may usurp previously defined
request, macro, or string names;
this implies that build-in operators may be (irrevocably) redefined.
Any of these entities may be renamed with \T'rn'\fBrn\fR\T
or removed with \T'rm'\fBrm\fR.\T
Macros are created by \T'de'\fBde\fR\T and \T'di'\fBdi\fR,\T
and appended to by \T'am'\fBam\fR\T and \T'da'\fBda\fR;\T
\T'di'\fBdi\fR\T and \T'da'\fBda\fR\T cause normal output
to be stored in a macro.
Strings are created by \T'ds'\fBds\fR\T and appended to by \T'as'\fBas\fR.\T
A macro is invoked in the same way as a request;
a control line beginning \fB.\fIxx\fR will interpolate the contents of macro \fIxx\fR.
The remainder of the line may contain arbitrarily many \fIarguments\fR.
The strings \fIx\fR, \fIxx\fR, and \fIxxx\fR
are interpolated at any desired point with
\A'e_*'\fB\e\(**\fIx\fR, \fB\e\(**(\fIxx\fR,
and \fB\e\(**[\fIxxx\fB]\fR respectively;
the form \fB\e\(**[\fIxxx\ arg\ \fR...\fB]\fR
allows to specify arguments to a string.
String references and macro invocations may be nested.
.sc
\A'copy mode'Copy mode input interpretation.
During the definition and extension
of strings and macros (not by \T'c_diversion'diversion\T)
the input is read in \fIcopy mode\fR.
The input is copied without interpretation
\fIexcept\fR that:
.x1
.nr nosave 0
.ds + \v'-.1m'\s-4\(bu\s+4\v'+.1m'
\*+ The contents of number registers indicated by \T'e_'\fB\en\fR\T are interpolated.
\*+ Strings indicated by \T'e_*'\fB\e\(**\fR\T are interpolated.
\*+ Arguments indicated by \T'e_$'\fB\e$\fR\T are interpolated.
\*+ Environment variables indicated by \T'e_V'\fB\eV\fR\T are interpolated.
\*+ Concealed newlines indicated by \T'e_newline'\fB\e\fR\T(newline) are eliminated.
\*+ Comments indicated by \T'e_"'\fB\e"\fR\T or \T'e_#'\fB\e#\fR\T are eliminated.
\*+ \T'e_t'\fB\et\fR\T and \T'e_a'\fB\ea\fR\T are interpreted as \s-1ASCII\s+1 horizontal tab and \s-1SOH\s+1 respectively \T's_tabs'(\(sc9).\T
.ne 2
\*+ \T'e_e'\fB\e\e\fR\T is interpreted as \fB\e\fR.
\*+ \T'e_.'\fB\e.\fR\T is interpreted as "\fB.\fR".
.x2
These interpretations can be suppressed by
prepending
a \fB\e\fR.
For example, since \fB\e\e\fR maps into a \fB\e\fR,
\fB\e\en\fR will copy as \T'e_n'\fB\en\fR\T which
will be interpreted as a number register indicator when the
macro or string is reread.
.sc
Arguments.
When a macro is invoked by name, the remainder of the line is
taken to contain arguments.
The argument separator is the space character, and arguments
may be surrounded by double-quotes to permit imbedded space characters.
Pairs of double-quotes may be imbedded in double-quoted arguments to
represent a single double-quote character.
The argument \fB"\^"\fR is explicitly null.
If the desired arguments won't fit on a line,
a concealed newline may be used to continue on the next line.
A trailing double quote may be omitted.
.pg
Similarly, arguments may be passed to strings
with the \fB\e\(**[\fR syntax,
separated by spaces,
until the argument list ends with the \fB]\fR character.
String arguments are otherwise handled exactly like macro arguments.
.pg
When a macro is invoked the \fIinput level\fR is \fIpushed down\fR and
any arguments available at the previous level become unavailable
until the macro is completely read and the previous level is restored.
A macro's own arguments can be interpolated at \fIany\fR point
within the macro with \A'e_$'\fB\e$\fIn\fR,
\fB\e$(\fInn\fR, or \fB\e$[\fInnn\fB]\fR,
which interpolates the \fIn\fRth, \fInn\fRth,
or \fInnn\fRth argument, respectively.
If an invoked argument doesn't exist,
a null string results.
For example, the macro \fIxx\fR may be defined by
.x1
.ft B
.ta .75i
&de xx	\e"begin definition
Today is \e\e$1 the \e\e$2.
&.	\e"end definition
.ft R
.x2
and called by
.x1
.ft B
&xx Monday 14th
.ft R
.x2
to produce the text
.x1
.ft B
Today is Monday the 14th.
.ft R
.x2
Note that the \fB\e$\fR
was concealed in the definition with a prepended \fB\e\fR.
.pg
The escape sequence \A'e_$*'\fB\e$\(**\fR interpolates all arguments to a macro,
separated by spaces;
\A'e_$@'\fB\e$@\fR interpolates all arguments,
each one surrounded by double quotes, separated by spaces.
The name of the current macro or string
is available with the \A'e_$0'\fB\e$0\fR escape sequence.
The number of currently available
arguments is in the \A'n_.$'\fB.$\fR register.
.pg
No arguments are available at the top (non-macro) level
or within a trap-invoked macro.
.pg
Arguments are copied in \T'copy mode'\fIcopy mode\fR\T onto a stack
where they are available for reference.
It is advisable to conceal string references (with an extra \fB\e\fR\|)
to delay interpolation until argument reference time.
.sc
\A'c_diversion'Diversions.
Processed output may be diverted into a macro for purposes
such as footnote processing \T'T5'(see Tutorial \(scT5)\T
or determining the horizontal and vertical size of some text for
conditional changing of pages or columns.
A single diversion trap may be set at a specified vertical position.
The number registers \A'n_dn'\fBdn\fR and \A'n_dl'\fBdl\fR
respectively contain the
vertical and horizontal size of the most
recently ended diversion.
Processed text that is diverted into a macro
retains the vertical size of each of its lines when reread
in \fInofill\fR mode
regardless of the current \fIV\fR.
Constant-spaced (\T'cs'\fBcs\fR\T)
or emboldened (\T'bd'\fBbd\fR\T) text that is diverted
can be reread correctly only if these modes are again or still in effect
at reread time.
One way to do this is to imbed in the diversion the appropriate
\T'cs'\fBcs\fR\T or \T'bd'\fBbd\fR requests\T
with the \T'c_transparent'\fItransparent\fR
mechanism described in \(sc10.6.\T
.pg
Diversions may be nested
and certain parameters and registers
are associated
with the current diversion level
(the top non-diversion level may be thought of as the
0th diversion level).
These are the diversion trap and associated macro,
no-space mode,
the internally-saved marked place (see \T'mk'\fBmk\fR\T and \T'rt'\fBrt\fR\T),
the current vertical place (\A'n_.d'\fB.d\fR register),
the current high-water text base-line \T'n_.h'(\fB.h\fR register)\T,
and the current diversion name (\A'n_.z'\fB.z\fR register).
The current diversion level is available
in the \A'n_.dilev'\fB.dilev\fR register.
.pg
A previous partially filled line is included when a diversion begins.
A partially filled line at the end of a diversion
is not included but becomes part of the surrounding diversion level.
With the \T'box'\fBbox\fR\T request,
a previous partially filled line is not included.
At the end of the diversion,
this partially filled line is restored
at the surrounding level,
discarding any partially filled line
from within the diversion.
The behavior is otherwise the same as with a standard diversion.
.sc
\A'c_trap'Traps.
Five types of trap mechanisms are available\(empage traps,
output-line traps, a single diversion trap, multiple diversion traps,
and an input-line-count trap.
Macro-invocation traps may be planted using
\T'wh'\fBwh\fR\T at any page position including the top.
This trap position may be changed using \T'ch'\fBch\fR.\T
Trap positions at or below the bottom of the page
have no effect unless or until
moved to within the page or rendered effective by an increase in page length.
Two traps may be planted at the \fIsame\fR position only by first planting them at different
positions and then moving one of the traps;
the first planted trap will conceal the second unless and until the first one is moved
\T'T5'(see Tutorial Examples \(scT5).\T
If the first one is moved back, it again conceals the second trap.
The macro associated with a page trap is automatically
invoked when a line of text is output whose vertical size \fIreaches\fR
or \fIsweeps past\fR the trap position.
Reaching the bottom of a page springs the top-of-page trap, if any,
provided there is a next page.
The distance to the next trap position is available
in the \A'n_.t'\fB.t\fR register;
if there are no traps between the current position and the bottom of the page,
the distance returned is the distance to the page bottom.
.pg
\A's_olt'An output-line trap is planted using
the escape sequence \A'e_P'\fB\eP\fIx\fR,
\fB\eP(\fIxx\fR, or \fB\eP[\fIxxx\fB]\fR.
It is converted to an internal character code
that becomes part of the current text.
When the line containing it has been physically output,
the macro \fIx\fR, \fIxx\fR, or \fIxxx\fR, respectively, is invoked.
A line may contain more than one output-line trap;
they are invoked in the order they appear.
If a page trap becomes effective at the same point,
it is invoked immediately after all output-line traps.
Output-line traps are not invoked
at the time they become part of a diversion.
They can thus be used to determine e.g. the effective page number
of the surrounding text,
even when it had originally been diverted on another page.
.pg
A single macro-invocation trap effective in the current diversion
may be planted using \T'dt'\fBdt\fR.\T
If another \fBdt\fR follows in the same diversion,
the trap position is changed.
Multiple traps may be planted in the current diversion
using \T'dwh'\fBdwh\fR\T and \T'dch'\fBdch\fR\T.
The \fB.t\fR register works in a diversion; if there is no subsequent trap a \fIlarge\fR
distance is returned.
For a description of input-line-count traps, see \T'it'\fBit\fR below.\T
.sc
\A'c_recursion'Recursion.
\*(TR macros can be invoked recursively.
In general, return information and arguments for macro calls
are stored as \fIframes\fR on a \fIstack\fR.
Since the size of the stack is limited by available memory,
recursive calls cannot descend to arbitrary depths.
To avoid consumption of large amounts of memory in case of endless loops,
the depth is deliberately restricted further;
the \T'recursionlimit'\fBrecursionlimit\fR\T request
allows to adjust that restriction.
.pg
A macro call can be \fItail-recursive\fR,
that is, the re-invocation of the current macro
can occur in its last statement.
\*(TR can then replace the stack frame
of the current macro instance
with that of the following one,
and the stack size remains constant.
The depth of tail-recursive macro calls is thus principally unlimited,
and is not artificially restricted by default.
Since \*(TR cannot determine the control character
at the time the macro is executed in advance,
the recursive macro call must not only be the last statement of a macro,
but must actually occur in the last line
for tail-recursion elimination to become effective,
although it may be prefixed by \T'if'\fB&if\fR\T or \T'el'\fB&el\fR\T
or followed by \T'e_}'\fB\e}\fR\T.
.sc
\A'c_local_strings'Local strings.
Strings, macros, and diversions are, once defined,
normally accessible from any part of a \*(TR program.
Local strings, defined with \fBlds\fR,
are accessible only within the currently executing macro instance,
and are not inherited to macros invoked from them.
When the currently executing macro terminates,
they are automatically deleted,
and all associated storage is reclaimed.
.xx
As long as a local string named \fIxx\fR exists,
any reference with \fB\e(\fIxx\fR or \fB\e[\fIxx\fB]\fR
retrieves the value of the local string;
the global string \fIxx\fR, if any, becomes inaccessible by this method.
Calls to \fBas\fR, \fBsubstring\fR, \fBindex\fR, and \fBchop\fR
modify the local string.
\T'watch'\fBwatch\fR\T with the name of a local string as argument
notifies on modifications of the local string.
\fBrm\fR removes a local string and
possibly makes a global string visible again,
\fBrn\fR renames a local string to another local string,
and \fBals\fR creates a local alias to a local string.
.xx
It is not allowed to define local macros or diversions.
Calls to \fI&xx\fR or \fB\'\fIxx\fR reference a global macro or diversion
even if a local string \fIxx\fR exists.
\T'c_trap'Traps\T and the \T'e_Y'\fB\eY\fR\T escape sequence
always operate on global macros or diversions.
.h1
.bta de
\A'e_.'\fB&de\fI|xx|yy\fR	\(en	\fI.yy=\fB..\fR	\(en	Define or redefine the macro \fIxx\fR.
The contents of the macro begin on the next input line.
Input lines are copied in \T'copy mode'\fIcopy mode\fR\T
until the definition is terminated by a
line beginning with \fB.\fIyy\fR,
whereupon the macro \fIyy\fR is called.
In the absence of \fIyy\fR, the definition
is terminated by a
line beginning with "\fB..\fR".
A macro may contain \fBde\fR requests
provided the terminating macros differ
or the contained definition terminator is concealed.
\&"\fB..\fR" can be concealed as
\fB\e\e..\fR which will copy as \fB\e..\fR and be reread as "\fB..\fR".
.bta am
\fB&am\fI|xx|yy\fR	\(en	\fI.yy=\fB..\fR	\(en	Append to macro (append version of \fBde\fR).
.bta ds
\fB&ds\fI|xx|string\fR	\(en	ignored	\(en	Define a string
\fIxx\fR containing \fIstring\fR.
Any initial double-quote in \fIstring\fR is stripped off to permit
initial blanks.
.bta as
\fB&as\fI|xx|string\fR	\(en	ignored	\(en	Append
\fIstring\fR to string \fIxx\fR
(append version of \fBds\fR).
.bta lds
\fB&lds\fI|xx|string\fR	\(en	ignored	\(en	Define local string \fIxx\fR containing \fIstring\fR.
Equivalent to \fBds\fR at the top non-macro level.
.bta substring
\fB&substring\fI|xx|N|\fR[\fIM\fR]	\fIM\fR\(eq\|\(mi1	\(en	Replace string \fIxx\fR by its substring between indices \fIN\fR and \fIM\fR.
\fIN\fR and \fIM\fR start at 0.
Negative values are interpreted relative to the end
of the string;
\(mi1 implies the last character of the string.
.bta length
\fB&length\fI|R|string\fR	\fIR\fR|set|to|0	\(en	Store the length of \fIstring\fR in register \fIR\fR.
\fIstring\fR is read in \T'copy mode'\fIcopy mode.\fR\T
.bta index
\fB&index\fI|R|xx|string\fR	ignored	\(en	Store the position of the first
occurence of \fIstring\fR in \fIxx\fR in register \fIR\fR.
Positions are counted from 0.
If no occurence is found, \fIR\fR is set to \-1.
\fIstring\fR is read in \T'copy mode'\fIcopy mode.\fR\T
.bta chop
\fB&chop\fI|xx\fR	\(en	ignored	\(en	Remove the last character of the macro, string, or diversion \fIxx\fR.
.bta rm
\fB&rm\fI|xx\fR	\(en	ignored	\(en	Remove
request, macro, or string.
The name \fIxx\fR is removed from the name list and
any related storage space is freed.
Subsequent references will have no effect.
If many macros and strings are being created dynamically, it
may become necessary to remove unused ones
to recapture internal storage space for newer registers.
If a macro is removed while it is in use,
associated storage is not released,
and a \T's_warning'warning of the \fBmac\fR category\T is emitted.
.xx
\fBrm\fR may have an unlimited number of arguments.
However for creating portable documents only one argument to
\fBrm\fR should be used.
.bta rn
\fB&rn\fI|xx|yy\fR	\(en	ignored	\(en	Rename request, macro, or string
\fIxx\fR to \fIyy\fR.
If \fIyy\fR exists, it is first removed.
.bta di
\fB&di|\fIxx\fR	\(en	end	D	Divert output to macro \fIxx\fR.
Normal text processing occurs during diversion
except that page offsetting is not done.
The diversion ends when the request \fBdi\fR or \fBda\fR is encountered without an argument;
extraneous
requests of this type should not appear when nested diversions are being used.
.bta da
\fB&da|\fIxx\fR	\(en	end	D	Divert, appending to \fIxx\fR
(append version of \fBdi\fR).
.bta box
\fB&box\fI|xx\fR	\(en	end	D	Divert output to macro \fIxx\fR, excluding a partially filled line.
.bta boxa
\fB&boxa\fI|xx\fR	\(en	end	D	Divert and append to \fIxx\fR, excluding a partially filled line.
.bta unformat
\fB&unformat\fI|xx\fR	\(en	ignored	\(en	Strip line break information from diversion \fIxx\fR.
All breaks that do not result
in explicit vertical movement are discarded,
interword spaces that had been converted
to horizontal movements during adjustment
become space characters again,
the effects of tabulators and field characters are reverted,
and hyphenated word parts are combined again.
.bta asciify
\fB&asciify\fI|xx\fR	\(en	ignored	\(en	All characters in diversion \fIxx\fR changed to plain text.
Has all effects described for \fBunformat\fR
and additionally discards font and point size information
and splits substituted ligatures to their individual characters.
.bta wh
\fB&wh\fI|N|xx\fR	\(en	\(en	\fBv\fR	Install
a trap to invoke \fIxx\fR at page position \fIN;\fR
a \fInegative N\fR will be interpreted with respect to the
page \fIbottom\fR.
Any macro previously planted at \fIN\fR is replaced by \fIxx\fR.
A zero \fIN\fR refers to the \fItop\fR of a page.
In the absence of \fIxx\fR, the first found trap at \fIN\fR, if any, is removed.
.bta ch
\fB&ch\fI|xx|N\fR	\(en	\(en	\fBv\fR	Change
the trap position for macro \fIxx\fR to be \fIN\fR.
In the absence of \fIN\fR, the trap, if any, is removed.
.bta dwh
\fB&dwh\fI|N|xx\fR	\(en	\(en	D,\fBv\fR	Set location trap in current diversion.
Diversion traps planted with \fBdt\fR are not affected;
if both a \fBdwh\fR and a \fBdt\fR trap are set at the same position,
both are effective.
A \fBdwh\fR trap previously set at the same position is replaced.
At the top non-diversion level,
it is equivalent to \fBwh\fR.
Otherwise with a negative or zero \fIN\fR,
the trap will never be invoked
since a diversion has no bottom
and can never reach its top again.
.bta dch
\fB&dch\fI|xx|N\fR	\(en	\(en	D,\fBv\fR	Change trap location in current diversion;
equivalent to \fBch\fR at the top non-diversion level.
.bta dt
\fB&dt\fI|N|xx\fR	\(en	off	D,\fBv\fR	Install a diversion trap
at position \fIN\fR in the \fIcurrent\fR diversion to invoke
macro \fIxx\fR.
Another \fBdt\fR will redefine the diversion trap.
If no arguments are given, the diversion trap is removed.
.bta vpt
\fB&vpt\fI|N\fR	1	ignored	\(en	Enable (\fIN\fR\(!=0) or disable (\fIN\fR\(eq0)
page ejections and vertical position traps,
i.e. those set with \fBwh\fR or \fBdt\fR.
At end of input, the page is forcefully ejected.
The number register \A'n_.vpt'\fB.vpt\fR
holds the current setting.
.bta it
\fB&it\fI|N|xx\fR	\(en	off	E	Set an input-line-count trap
to invoke the macro \fIxx\fR after \fIN\fR lines of \fItext\fR input
have been read
(control or request lines don't count).
The text may be in-line text or
text interpolated by inline or trap-invoked macros.
.bta itc
\fB&itc\fI|N|xx\fR	\(en	off	E	Set an input-line-count trap
like \fBit\fR, but ignore \T'c_intr'line interruptions\T with \T'e_c'\fB\ec\fR\T
when counting lines.
.bta return
\fB&return\fR	\(en	\(en	\(en	Immediately return from the current macro to the level above.
.bta shift
\fB&shift\fI|N\fR	\(en	1	\(en	Shift the arguments to the current macro
by \fIN\fR.
.bta als
\fB&als\fI|yy|xx\fR	\(en	\(en	\(en	\fIyy\fR is created as an alias for
the request, macro, or string \fIxx\fR.
The alias name is in every respect identical to the original name.
If \fIxx\fR is removed or renamed,
\fIyy\fR continues to refer to the object
at the time the alias had been created
(and vice-versa).
If either \fIxx\fR or \fIyy\fR are redefined,
both refer to the new definition.
.bta blm
\fB&blm\fI|xx\fR	none	none	\(en	Whenever a blank line is encountered,
the macro \fIxx\fR is invoked
instead of the \T'blank'default behavior to output a blank line.\T
.bta em
\fB&em\fI|xx\fR	none	none	\(en	The
macro \fIxx\fR will be invoked
when all input has ended.
The effect is the same as if the contents of \fIxx\fR had been at the end
of the last file processed,
but all processing ceases at the next page eject.
.bta recursionlimit
\fB&recursionlimit\fI|N|M\fR	\(en	\(en	Set
the maximum stack depth for generally recursive invocations
of macros to \fIN\fR,
and for invocations of tail-recursive macros to \fIM\fR.
If \fIN\fR or \fIM\fR are zero, the respective depth is unlimited.
The default is 512 for the general case,
and no limit for tail-recursion.
.mha s_reg
Number Registers
.pg
A variety of parameters are available to the user as
predefined, named \fInumber registers\fR (see Summary and Index, page 7).
In addition, the user may define his own named registers.
Register names are one or two characters long and \fIdo not\fR conflict
with request, macro, or string names.
Except for certain predefined read-only registers,
a number register can be read, written, automatically
incremented or decremented, and interpolated
into the input in a variety of formats.
One common use of user-defined registers is to
automatically number sections, paragraphs, lines, etc.
A number register may be used any time numerical input is expected or desired
and may be used in \T'c_expr'numerical \fIexpressions\fR (\(sc1.4).\T
.pg
Number registers are created and modified using \T'nr'\fBnr\fR\T, which
specifies the name, numerical value, and the auto-increment size.
Registers are also modified, if accessed
with an auto-incrementing sequence.
If the registers \fIx\fR and \fIxx\fR both contain
\fIN\fR and have the auto-increment size \fIM\fR,
\A'e_n'the following access sequences have the effect shown:
.TS
center box;
c2|c2|c
c2|c2|c2
l2|c2|c2
l2|c2|c2
l2|l2|c2.
	Effect on	Value
Sequence	Register	Interpolated
_
\fB\en\fIx\fR	none	\fIN\fR
\fB\en(\fIxx\fR	none	\fIN\fR
\fB\en[\fIxxx\fB]\fR	none	\fIN\fR
\fB\en+\fIx\fR	\fIx\fR incremented by \fIM\fR	\fIN+M\fR
\fB\en\-\fIx\fR	\fIx\fR decremented by \fIM\fR	\fIN\-M\fR
\fB\en+(\fIxx\fR	\fIxx\fR incremented by \fIM\fR	\fIN+M\fR
\fB\en\-(\fIxx\fR	\fIxx\fR decremented by \fIM\fR	\fIN\-M\fR
\fB\en+[\fIxxx\fB]\fR	\fIxxx\fR incremented by \fIM\fR	\fIN+M\fR
\fB\en\-[\fIxxx\fB]\fR	\fIxxx\fR decremented by \fIM\fR	\fIN\-M\fR
.TE
Floating-point registers can be created and modified using \fBnrf\fR.
They share a common name space with integer registers;
a \fBnr\fR request turns a floating-point register into
an integer register.
Access and auto-increment are as with integer registers.
.xx
When interpolated, a number register is converted to
decimal (default),
decimal with leading zeros,
lower-case Roman,
upper-case Roman,
lower-case sequential alphabetic,
or
upper-case sequential alphabetic
according to the format specified by \T'af'\fBaf\fR\T.
.xx
Local number registers can be created and modified
using \fBlnr\fR and \fBlnrf\fR.
Like \T'c_local_strings'local strings,\T
local registers are accessible only
within the currently executing macro instance,
are not inherited to macros invoked from them,
and are deleted when the current macro returns.
.xx
The existence of a local number register \fIxx\fR
makes the global number register \fIxx\fR, if any, completely inaccessible.
The sequences
\fB\en(\fIxx\fR and \fB\en[\fIxx\fB]\fR
retrieve the value of the local register,
\fB\eR\fI'xx\|...'\fR,
\fB\en+(\fIxx\fR and \fB\en+[\fIxx\fB]\fR (and likewise) modify it,
and \fB\eg(\fIxx\fR and \fB\eg[\fIxx\fB]\fR retrieve its format.
Subsequent calls to \fBnr\fR, \fBnrf\fR, \fBaf\fR,
\T'length'\fBlength\fR\T, and \T'index'\fBindex\fR\T
with \fIxx\fR as argument modify the local register.
\T'watchn'\fBwatchn\fR\T notifies on modifications of the local register.
\fBrr\fR removes a local register and
possibly makes a global register visible again,
\fBrnn\fR renames a local register to another local register,
and \fBaln\fR creates a local alias to a local register.
.h1
.bta nr
\fB&nr\fI|R|\(+-N|M\fR		\(en	\fBu\fR	\
The number register \fIR\fR is assigned the value \fI\(+-N\fR
with respect to the previous value, if any.
The increment for auto-incrementing is set to \fIM\fR.
An alternate syntax is available
with the \A'e_R'\fB\eR\fI\'R\ \(+-N\'\fR escape sequence.
.bta nrf
\fB&nrf\fI|R|\(+-F|G\fR		\(en	\fBu\fR	\
The floating-point register \fIR\fR is assigned the value \fI\(+-F\fR
with respect to the previous value, if any.
Comparison computations in the expression \fIF\fR
are performed using floating-point values.
The increment for auto-incrementing,
which also is a floating-point value,
is set to \fIG\fR.
.bta lnr
\fB&lnr\fI|R|\(+-N|M\fR		\(en	\fBu\fR	Define and set local number register \fIR\fR.
.bta lnrf
\fB&lnrf\fI|R|\(+-F|G\fR		\(en	\fBu\fR	Define and set local floating-point register \fIR\fR.
.bta af
\fB&af\fI|R|c\fR	arabic	\(en	\(en	Assign format \fIc\fR to register \fIR\fR.
The available formats are:
.TS
center box;
c2|c
c2|c
c2|l.
	Numbering
Format	Sequence
_
\fB1\fR	0,1,2,3,4,5,...
\fB001\fR	000,001,002,003,004,005,...
\fBi\fR	0,i,ii,iii,iv,v,...
\fBI\fR	0,I,II,III,IV,V,...
\fBa\fR	0,a,b,c,...,z,aa,ab,...,zz,aaa,...
\fBA\fR	0,A,B,C,...,Z,AA,AB,...,ZZ,AAA,...
.TE
An arabic format having \fIN\fR digits
specifies a field width of \fIN\fR digits (example 2 above).
The read-only registers, \T'c_width'the \fIwidth\fR function (\(sc11.2)\T,
and floating-point registers
are always arabic.
Warning: the value of a number register in a non-Arabic format
is not numeric, and will not produce the expected results
in \T'c_expr'expressions\T.
.xx
The function \A'e_g'\fB\eg\fIx\fR, \fB\eg(\fIxx\fR, or \fB\eg[\fIxxx\fB]\fR
returns the format of a number register in a form suitable for \fBaf\fR;
it returns nothing if the register has not been used.
.xx
.bta rr
\fB&rr\fI|R\fR	\(en	ignored	\(en	Remove register \fIR\fR.
If many registers are being created dynamically, it
may become necessary to remove no longer used registers
to recapture internal storage space for newer registers.
The register \fB.R\fR contains the number
of number registers still available.
.xx
\fBrr\fR may have an unlimited number of arguments.
However for creating portable documents only one argument to
\fBrr\fR should be used.
.bta rnn
\fB&rnn\fI|R|S\fR	\(en	\(en	\(en	Rename register \fIR\fR to \fIS\fR.
If \fIS\fR exists, it is first removed.
.bta aln
\fB&aln\fI|S|R\fR	\(en	\(en	\(en	Register \fIS\fR is created as an alias for \fIR\fR.
The alias name is in every respect identical to the original name.
If \fIR\fR is removed or renamed,
\fIS\fR continues to refer to the register
at the time the alias had been created
(and vice-versa).
A change in value or format in \fIR\fR
affects \fIS\fR and vice-versa.
.\" from file m3
.tr |
.rm mx
.mha s_tabs
Tabs, Leaders, and Fields
.sc
Tabs and leaders.
The \s-1ASCII\s+1 horizontal tab character and the \s-1ASCII\s+1
\s-1SOH\s+1 (hereafter known as the \fIleader\fR character)
can both be used to generate either horizontal motion or
a string of repeated characters.
The length of the generated entity is governed
by internal \fItab stops\fR specifiable
with \T'ta'\fBta\fR\T.
The default difference is that tabs generate motion and leaders generate
a string of periods;
\T'tc'\fBtc\fR\T and \T'lc'\fBlc\fR\T
offer the choice of repeated character or motion.
There are three types of internal tab stops\(em\
\fIleft\fR adjusting, \fIright\fR adjusting,
and \fIcentering\fR.
In the following table,
\fID\fR is the distance from the current position on the \fIinput\fR line
(where a tab or leader was found)
to the next tab stop,
\fInext-string\fR consists
of the input characters following the tab (or leader) up to the next tab (or leader) or end of line,
and
\fIW\fR is the width of \fInext-string\fR.
.TS
center box;
c2|c2|c
c2|c2|c
c2|c2|l.
Tab	Length of motion or	Location of
type	repeated characters	\fInext-string\fR
_
Left	\fID\fR	Following \fID\fR
Right	\fID\-W\fR	Right adjusted within \fID\fR
Centered	\fID\-W/\fR2	Centered on right end of \fID\fR
.TE
The length of generated motion is allowed to be negative, but
that of a repeated character string cannot be.
Repeated character strings contain an integer number of characters, and
any residual distance is prepended as motion.
Tabs or leaders found after the last tab stop are ignored, but may be used
as \fInext-string\fR terminators.
.pg
Tabs and leaders are not interpreted in \T'copy mode'\fIcopy mode\fR.\T
\A'e_t'\fB\et\fR and \A'e_a'\fB\ea\fR always generate a non-interpreted
tab and leader respectively, and
are equivalent to actual tabs and leaders in \T'copy mode'\fIcopy mode\fR.\T
.sc
Fields.
A \fIfield\fR is contained between
a \fIpair\fR of \fIfield delimiter\fR characters,
and consists of sub-strings
separated by \fIpadding\fR indicator characters.
The field length is the distance on the
\fIinput\fR line from the position where the field begins to the next tab stop.
The difference between the total length of all the sub-strings
and the field length is incorporated as horizontal
padding space that is divided among the indicated
padding places.
The incorporated padding is allowed to be negative.
For example,
if the field delimiter is \fB#\fR and the padding indicator is \fB^\fR,
\fB#^\fIxxx\fB^\fIright\|\fB#\fR
specifies a right-adjusted string with the string \fIxxx\fR centered
in the remaining space.
.h1
.bta ta
\fB&ta\fI|Nt|...\fR	8\|n;|0.5\|i	none	E,\fBm\fR	\
Set tab stops and types.
\fIt=\fBR\fR, right adjusting;
\fIt=\fBC\fR, centering;
\fIt\fR absent, left adjusting.
\*(TR tab stops are preset every 0.5in.;
\*(NR every 0.8in.
The stop values are separated by spaces, and
a value preceded by \fB+\fR
is treated as an increment to the previous stop value.
The \A'n_.S'\fB&S\fR register*
and the \A'n_.tabs'\fB&tabs\fR register
hold a string with the current tab stops
in a form that is acceptable for the \fBta\fR request;
it can thus be used to save and restore tab stops.
.fn
.sp .3
\(**\|Register \fB&S\fR is available for compatibility with DWB.
.ef
.bt
\fB&ta\fI|Mv|...|Nw|\fBT\fI|At|...|Zu\fRa	\fIN\fR=0	E,\fBm\fR\
	Set repeated tab stops and types at \fIMv\fR, ..., \fINw\fR,
\fIN\fR|+|\fIAt\fR, ..., \fIN\fR|+|\fIZu\fR,
\fIN\fR|+|\fIZ\fR|+|\fIAt\fR, ..., \fIN\fR|+|\fIZ\fR|+|\fIZu\fR,
\fIN\fR|+|2·\fIZ\fR|+|\fIAt\fR, ..., \fIN\fR|+|2·\fIZ\fR|+|\fIZu\fR,
\fIN\fR|+|3·\fIZ\fR|+|\fIAt\fR, ..., \fIN\fR|+|3·\fIZ\fR|+|\fIZu\fR,
&..\ .
Thus \fB&ta|T|0.5i\fR sets tab stops every 0.5in,
and \fB&ta|1i|4i|T|.25i|1i\fR sets tab stops
at 1in, 4in, 4.25in, 5in, 5.25in, 6in, 6.25in, etc.
.bta tc
\fB&tc\fI|c\fR	none	none	E	\
The tab repetition character becomes \fIc\fR,
or is removed specifying motion.
.bta lc
\fB&lc\fI|c\fR	\fB.\fR	none	E	\
The leader repetition character becomes \fIc\fR,
or is removed specifying motion.
.bta fc
\fB&fc\fI|a|b\fR	off	off	\(en	\
The field delimiter is set to \fIa\fR;
the padding indicator is set to the \fIspace\fR character or to
\fIb\fR, if given.
In the absence of arguments the field mechanism is turned off.
.mha s_trans
Input and Output Conventions and Character Translations
.sc
Input character translations.
Ways of inputting the graphic character set were
discussed in \T'c_char'\(sc2.1.\T
The \s-1ASCII\s+1 control characters
\T's_tabs'horizontal tab (\(sc9.1),\T
\T's_tabs'\s-1SOH\s+1 (\(sc9.1),\T
and \T'c_backspace'e_backspace (\(sc10.3)\T are discussed elsewhere.
The newline delimits input lines.
In addition,
\s-1STX\s+1, \s-1ETX\s+1, \s-1ENQ\s+1, \s-1ACK\s+1, and \s-1BEL\s+1
are accepted,
and may be used as delimiters or translated into a graphic
with \T'tr'\fBtr\fR\T \T'c_trans'(\(sc10.5).\T
\fIAll\fR others are ignored.
.pg
The \fIescape\fR character \fB\e\fR
introduces \fIescape sequences\fR\(em\
causes the following character to mean
another character, or to indicate
some function.
A complete list of such sequences is given in the Summary.
\fB\e\fR
should not be confused with the \s-1ASCII\s+1 control character \s-1ESC\s+1 of the
same name.
The escape character \fB\e\fR can be output by using the special character
\A'e_esc'\fB\e(rs\fR.
The escape character can be changed with \T'ec'\fBec\fR,\T
and all that has been said about the default \fB\e\fR becomes true
for the new escape character.
\A'e_e'\fB\ee\fR can be used to print whatever the current escape character is;
this escape sequence is interpreted in \T'copy mode'\fIcopy mode\fR.\T
\A'e_E'\fB\eE\fR evaluates to the current escape character
but is not interpreted in \T'copy mode'\fIcopy mode\fR;\T
if it is put into a string or macro,
it will introduce an escape sequence
once the string is printed or the macro is executed, respectively.
\T'ecs'\fBecs\fR\T and \T'ecr'\fBecr\fR\T
save and restore the escape character.
If necessary or convenient, the escape mechanism
may be turned off with \T'eo'\fBeo\fR\T,
and restored with \T'ec'\fBec\fR\T.
.h1
.bta ec
\fB&ec\fI|c\fR	\fB\e\fR	\fB\e\fR	\(en	\
Set escape character to \fB\e\fR, or to \fIc\fR, if given.
.bta eo
\fB&eo\fR	on	\(en	\(en	Turn escape mechanism off.
.bta ecs
\fB&ecs\fR	\e	\(en	\(en	Save escape character.
.bta ecr
\fB&ecr\fR	\e	\(en	\(en	Restore saved escape character.
.bta escoff
\fB&escoff \fIesc ...\fR	on	ignored	\(en	Disable escapes \fIesc\
 \&...\|\fR.
For example the request \fB&escoff ; @\fR would disable escapes
\fB\e;\fR, \fB\e@{\fR, and \fB\e@}\fR.
The request had been added as a workaround for manual pages which by mistake
escape normal charaters.
At the moment only one-character arguments are valid.
This may change in future versions.
.bta escon
\fB&escon \fIesc ...\fR	on	ignored	\(en	Enable escapes \fIesc\
 \&...\|\fR.
.sc
Ligatures.
.lg 0
The set of available ligatures is device and font dependent,
but is often a subset of
\fB\(fi\fR, \fB\(fl\fR, \fB\(ff\fR, \fB\(Fi\fR, and \fB\(Fl\fR.
They may be input (even in \*(NR) by
\fB\e(fi\fR, \fB\e(fl\fR, \fB\e(ff\fR, \fB\e(Fi\fR, and \fB\e(Fl\fR respectively.
In \*[TR,] the \T'flig'\fBflig\fR\T request specifies the set of ligatures
available with an individual font.
.lg
The ligature mode is normally on in \*[TR,] and \fIautomatically\fR invokes 
ligatures during input.
At most the five named ligatures are enabled by default.
.pg
The ligature suppressor \A'e_;'\fB\e;\fR
disables automatic ligature building
if it is placed between two characters,
but has no other effects.
Many other escape sequences,
.tr &&
e.g. \T'e_&'\fB\e&\fR\T, \T'e_%'\fB\e%\fR\T,
also disable automatic ligature building.
.h1
.tr &.
.bta lg
\fB&lg\fI|N\fR	off;|on	on	\(en	Ligature mode
is turned on if \fIN\fR is absent or non-zero,
and turned off if \fIN\(eq\^\fR0.
If \fIN\fR\(eq\^2, only the two-character ligatures are automatically invoked.
Ligature mode is inhibited for
request, macro, string, register, or file names,
and in \T'copy mode'\fIcopy mode\fR.\T
No effect in \*[NR.]
.bta flig
.lg 0
\fB&flig\fI|F|string|c|...\fR	ignored	T	De\(fine the set of
ligatures to be used with font \fIF\fR.
.lg
\fIstring\fR may consist of up to four characters;
its exact occurences are substituted by the character \fIc\fR
whenever the current font is \fIF\fR.
If \fIstring\fR starts with a minus sign,
ligature subtitution for it is disabled;
the \fIc\fR argument must not be present in this case.
It is required that any substring of \fIstring\fR
that consists of two or more characters
is also defined as a ligature.
Multiple \fIstring/c\fR pairs may be given.
.lg 0
As a special case,
\fB&flig \fIF\fB 0\fR disables all ligatures for font \fIF\fR.
.lg
The default set of ligatures is specific
to a font and is determined from its metrics file.
.xx
.lg 0
As examples,
\fB&flig R Th \e[T_h]\fR
.lg
enables a ligature for ``Th'' in font \fBR\fR,
and
\fB&flig R \-Th\fR
disables it.
.bta fdeferlig
\fB&fdeferlig\fI|F|string|...\fR	ignored	T	Defer ligature building for the first character of \fIstring\fR.
Normally when a sequence of three characters appears
for which both the first and the last two characters
are defined as a ligature,
the ligature is built using the first two characters.
For example, if ``f\;f\;i'' appears in input
and both ``f\;f'' and ``f\;i'' are defined as ligatures,
the ``f\;f'' ligature is built, followed by a single ``i'' character.
Use of this request causes the ligature to be built
using the second two characters,
so in the example, \fB&fdeferlig R f\;f\;i\fR would result
in a single ``f'' character followed by a ``f\;i'' ligature.
.sc
\A'c_backspace'Backspacing, underlining, overstriking, etc.
Unless in \T'copy mode'\fIcopy mode\fR,\T
the \s-1ASCII\s+1 backspace character is replaced
by a backward horizontal motion having the width of the
space character.
Underlining as a form of line-drawing
is discussed \T'c_line'in \(sc12.4.\T
A generalized overstriking function is described
\T'c_overstrike'in \(sc12.1.\T
.pg
\A'c_nrofful'\*(NR automatically underlines
characters in the \fIunderline\fR font,
specifiable with \T'uf'\fBuf\fR\T,
normally that on font position 2
(normally Times Italic, \T'c_fonts'see \(sc2.2).\T
In addition to \T'ft'\fBft\fR\T and \T'e_f'\fB\ef\fIF\fR,\T
the underline font may be selected by \T'ul'\fBul\fR\T and \T'cu'\fBcu\fR\T.
Underlining is restricted to an output-device-dependent
subset of \fIreasonable\fR characters.
.h1
.bta ul
\fB&ul\fI|N\fR	off	\fIN\(eq\fR1	E	\
Underline in \*(NR (italicize in \*(TR) the next \fIN\fR
input text lines.
Actually, switch to \fIunderline\fR font, saving the
current font for later restoration;
\fIother\fR font changes within the span of a \fBul\fR
will take effect,
but the restoration will undo the last change.
Output generated by \T'tl'\fBtl\fR\T \T's_titles'(\(sc14)\T
\fIis\fR affected by the
font change, but does \fInot\fR decrement \fIN\fR.
If \fIN\fR\^>\^1, there is the risk that
a trap interpolated macro may provide text
lines within the span;
environment switching can prevent this.
.bta cu
\fB&cu\fI|N\fR	off	\fIN\(eq\fR1	E	\
Continuous underline.
A variant of \fBul\fR that causes \fIevery\fR character to be underlined in \*[NR.]
Identical to \fBul\fR in \*[TR.]
.bta uf
\fB&uf\fI|F\fR	Italic	Italic	\(en	\
Underline font set to \fIF\fR.
In \*[NR,]
\fIF\fR may \fInot\fR be on position 1.
.sc
Control characters.
Both the control character \fB.\fR and the \fIno-break\fR
control character \fB\'\fR may be changed, if desired.
Such a change must be compatible with the design
of any macros used in the span of the change,
and
particularly of any trap-invoked macros.
.h1
.bta cc
\fB&cc\fI|c\fR	\fB.\fR	\fB.\fR	E	\
The basic control character is set to \fIc\fR,
or reset to "\fB.\fR".
.bta c2
\fB&c2\fI|c\fR	\fB\'	\'\fR	E	The \fInobreak\fR control character is set
to \fIc\fR, or reset to "\fB\'\fR".
.sc
\A'c_trans'Output translation.
One character can be made a stand-in for another character using \T'tr'\fBtr\fR.\T
All text processing (e.g. character comparisons) takes place
with the input (stand-in) character which appears to have the width of the final
character.
The graphic translation occurs at the moment of output
(including \T'c_diversion'diversion\T).
Text in a diversion is not translated again
when it is output or rediverted
unless the \T'asciify'\fBasciify\fR\T request
had been applied on it.
.xx
A character can be substituted
by an arbitrary sequence of characters,
motions, drawing commands, etc. by
means of the \T'char'\fBchar\fR\T request.
.h1
.bta tr
\fB&tr\fI|abcd....\fR	none	\(en	O	Translate \
\fIa\fR into \fIb\fR, \fIc\fR into \fId\fR, etc.
If an odd number of characters is given,
the last one will be mapped into the space character.
To be consistent, a particular translation
must stay in effect from \fIinput\fR to \fIoutput\fR time.
.bta trin
\fB&trin\fI|abcd....\fR	none	\(en	O	Translate \
\fIa\fR into \fIb\fR, \fIc\fR into \fId\fR, etc. as with \fBtr\fR,
but when the \T'asciify'\fBasciify\fR request\T is called,
retranslate \fIb\fR to \fIa\fR, \fId\fR to \fIc\fR, etc. in
the diversion it is applied to.
.bta trnt
\fB&trnt\fI|abcd....\fR	none	\(en	O	Translate \
\fIa\fR into \fIb\fR, \fIc\fR into \fId\fR, etc. as with \fBtr\fR,
unless the output is written to a diversion in
\T'c_transparent'transparent mode\T.
.bta ftr
\fB&ftr\fI|F|abcd....\fR	none	\(en	P,T	Font-specific \fBtr\fR.
If the current character originates from font \fIF\fR,
translate character \fIa\fR into \fIb\fR, \fIc\fR into \fId\fR, etc.
.bta char
\fB&char\fI|c|string\fR		ignored	\(en	Define character \fIc\fR to \fIstring\fR.
\fIstring\fR is read in \T'copy mode'\fIcopy mode\fR\T
when the request is processed.
.xx
Whenever \fIc\fR occurs in regular (not copy mode) later,
a temporary copy of the current environment is created,
the escape character is temporarily set to \e,
and \fIstring\fR is output in nofill mode to an unnamed diversion.
If \fIc\fR itself occurs in \fIstring\fR,
no recursive substitution takes place,
but the plain character \fIc\fR is selected instead.
The resulting object continues to behave like the single character \fIc\fR
in the data stream,
notionally retaining its font and character size properties.
It can thus be part of a \T'c_kerning'kerning definition\T,
can be hyphenated (possibly requiring an explicit
hyphenation code to be assigned using the \T'hcode'\fBhcode\fR\T request),
can become the \T's_tabs'tab or leader character\T,
and can be used for \T'c_line'line drawing\T.
.xx
Static letter space adjustments defined with
the \T'track'\fBtrack\fR\T request
are applied to each but the last character inside the diversion,
and to the object as a whole.
Dynamic letter space adjustments defined with
the \T'letadj'\fBletadj\fR\T request
are only applied to the object as a whole.
No letter reshaping is performed on either the object
or the contents of the diversion.
.xx
If both \fBtr\fR and \fBchar\fR are defined for a character \fIc\fR,
\fBtr\fR becomes effective first and
changes \fIc\fR to the translation defined,
but if \fIc\fR is the result of \fBtr\fR
and \fBchar\fR is defined for it,
\fBchar\fR is applied.
\fBftr\fR has no effect on characters for which \fBchar\fR is defined.
Both \fBtr\fR and \fBftr\fR are applied to characters
inside the \fBchar\fR diversion as usual.
.xx
At the time \fIc\fR would have been output,
the contents of the diversion are printed instead of it.
.bta fchar
\fB&fchar\fI|c|string\fR	ignored	T	Define character \fIc\fR to
\fIstring\fR as a fallback only:
If \fIc\fR is present in the current font, output \fIc\fR,
otherwise, output \fIstring\fR as with \fBchar\fR.
.bta rchar
\fB&rchar\fI|c...\fR		ignored	\(en	Remove character definitions
for \fIc...\fR;
applies to both \fBchar\fR and \fBfchar\fR.
.bta utf8conv
\fB&utf8conv\fI|c1|c2\fR	ignored	\(en	\*(NR only:
With \fB\-Tlocale\fR and a \*[UTF] locale, "\fB-\fR" is replaced
by a \*[UTF] hyphen, and "\fB\e-\fR" remains the ASCII
hyphen-minus character. This is because in manual
pages, "\fB\e\N'45'\fR" represents the ASCII option
introduction character, and converting it to a
\*[UTF] minus character would make it impossible
to copy-and-paste option descriptions.
Similar considerations apply to \` \(aq vs. \e\` \e\(aq.
The former are typographic single quotes, while
the latter are commonly used for the ASCII syntax
quotes in manual pages.
.xx
By use of \fButf8conv\fR the three default translations
can be redefined and additional translations can be done.
If \fIc2\fR is missing a translation is removed.
This is applied for manual pages where the no translation
is used.
.sc
\A'c_transparent'Transparent throughput.
An input line beginning with a \A'e_!'\fB\e!\fR
is read in \T'copy mode'\fIcopy mode\fR\T and \fItransparently\fR output
(without the initial \fB\e!\fR);
the text processor is otherwise unaware of the line's presence.
This mechanism may be used to pass control information to a post-processor
or to imbed control lines in a macro created by a \T'c_diversion'diversion\T.
.h1
.bta output
\fB&output\fI|string\fR		ignored	\(en	Write \fIstring\fR directly to
intermediate output,
regardless of whether there is a \T'c_diversion'current diversion\T or not.
\fIstring\fR is read in copy mode,
and an initial double-quote is discarded.
.sc
Transparent output.
The sequence \A'e_X'\fB\eX\fI\'anything\'\fR copies \fIanything\fR
to the \*(TR output,
as a device control function in the form \fBx\ X\ \fIanything\fR
\T's_output'(\(sc26).\T
Escape sequences in \fIanything\fR are processed.
The sequence \A'e_Y'\fB\eY\fIx\fR,
\fB\eY(\fIxx\fR, or
\fB\eY[\fIxxx\fB]\fR
copies the contents of the string or macro
\fIx\fR, \fIxx\fR, or \fIxxx,\fR, respectively,
to the output as a device control function
without processing escape sequences.
Newlines in the macro are embedded in the output.
\*(NR discards transparent output sequences and their contents.
.sc
Comments and concealed newlines.
An uncomfortably long input line that must stay
one line (e.g. a string definition, or nofilled text)
can be split into many physical lines by ending all but
the last one with the escape \fB\e\fR.
The sequence \A'e_newline'\fB\e\fR(newline) is \fIalways\fR ignored\(em\
except in a comment.
Comments may be imbedded at the \fIend\fR of any line by
prefacing them with \A'e_"'\fB\e"\fR.
This form does not conceal the newline at the end of the comment.
A line beginning with \fB\e"\fR will appear as a blank line and
behave like \fB.sp|1\fR;
a comment can be on a line by itself by beginning the line with \fB.\e"\fR.
The form \A'e_#'\fB\e#\fR includes the newline
as part of the comment.
It thus effectively acts like a concealed newline
in concatenating the following line immediately to the current line.
.mha s_mot
Local Horizontal and Vertical Motions, and the Width Function
.sc
\A'n_.H'\A'n_.V'Local Motions.
The functions \A'e_v'\fB\ev\'\fIN\fB\'\fR and
\A'e_h'\fB\eh\'\fIN\fB\'\fR
can be used for \fIlocal\fR vertical and horizontal motion respectively.
The distance \fIN\fR may be negative; the \fIpositive\fR directions
are \fIrightward\fR and \fIdownward\fR.
A \fIlocal\fR motion is one contained \fIwithin\fR a line.
To avoid unexpected vertical dislocations, it is necessary that
the \fInet\fR vertical local motion within a word in filled text
and otherwise within a line balance to zero.
The above and certain other escape sequences providing local motion are
summarized in the following table.*
.br
.fn
.sp .3
\(**\|The line drawing escapes \el and \eL also cause local motions.
.ef
.tr ||
.ds X \0\0\0
.br
.ne 12
.TS
center box;
c2|cs2||c2|cs2
c1|c2c2||c2|c2c2.
Vertical	Effect in	Horizontal	Effect in
Local Motion	\*(TR	\*(NR	Local Motion	\*(TR	\*(NR
_
.sp .4
\A'e_0'\A'e_u'\A'e_d'\A'e_r'\A'e_|'\A'e_^'
.sp -1
.T&
l2|ls2||l2|ls2.
\fB\*X\ev\'\fIN\fB\'\fR	Move distance \fIN\fR	\
\fB\*X\eh\'\fIN\fB\'\fR	Move distance \fIN\fR
.T&
_2|_2_2||l2|ls2.
			\fB\*X\e\fR(space)	Unpaddable space-size space
.T&
l2|l2|l2||l2|ls2.
			\fB\*X\e\(ap\fR	Paddable no-break space
\fB\*X\eu\fR	\(12 em up	\(12 line up	\fB\*X\e0\fR	Digit-size space
.T&
l2|l2|l2||_2|_2_2.
\fB\*X\ed\fR	\(12 em down	\(12 line down
.T&
l2|l2|l2||l2|l2|l2.
\fB\*X\er\fR	1 em up	1 line up	\fB\*X\e\||\fR	1/6 em space	ignored
			\fB\*X\e^\fR	1/12 em space	ignored
.sp .4
.TE
.rm X
.tr |
As an example,
\fBE\s-2\v'-.4m'2\v'.4m'\s+2\fR
could be generated by the sequence
\fBE\es\-2\ev\'\-0.4m\'2\ev\'0.4m\'\es+2\fR;
note that the 0.4|em vertical motions are at the smaller size.
.sc
\A'c_width'Width Function.
The \fIwidth\fR function \A'e_w'\fB\ew\'\fIstring\fB\|\'\fR
generates the numerical width of \fIstring\fR (in basic units).
Size and font changes may be safely imbedded in \fIstring\fR,
and will not affect the current environment.
For example,
\&\fB.ti|\-\\w\'\efB1.|\'u\fR could be used to
temporarily indent leftward a distance equal to the
size of the string "\fB1.|\fR" in font \fBB\fR.
.pg
The width function also sets five number registers.
The registers \A'n_st'\fBst\fR and \A'n_sb'\fBsb\fR
are set respectively to the highest and
lowest extent of \fIstring\fR relative to the baseline;
then, for example,
the total \fIheight\fR of the string is \fB\en(stu\-\en(sbu\fR.
The registers \A'n_rst'\fBrst\fR and \A'n_rsb'\fBrsb\fR
are set respectively to the highest and lowest visual extent
of \fIstring\fR relative to the baseline,
i.e. to the maximum and minimum extent of the \fIy\fR value
of any bounding box of the characters in \fIstring\fR.
In \*(TR the number register \A'n_ct'\fBct\fR is set to a value
between 0|and|3:
0 means that all of the characters in \fIstring\fR were short lower
case characters without descenders (like \fBe\fR);
1 means that at least one character has a descender (like \fBy\fR);
2 means that at least one character is tall (like \fBH\fR);
and 3 means that both tall characters and characters with
descenders are present.
.pg
The \A'n_.w'\fB&w\fR number register contains
the width of the previous character
independently of the width function.
Similarly, the \A'n_.cht'\fB&cht\fR and \A'n_.cdp'\fB&cdp\fR registers
are set respectively to the highest and lowest visual extent
of the previous character relative to the baseline.
.sc
Mark horizontal place.
The escape sequence \A'e_k'\fB\ek\fIx\fR will cause the \fIcurrent\fR horizontal
position in the \fIinput line\fR to be stored in register \fIx\fR.
As an example,
the construction \fB\ekx\fIword\|\fB\eh\'\|~\|\enxu+3u\'\fIword\fB\fR
will embolden \fIword\fR by backing up to almost its beginning and overprinting it,
resulting in \kz\fIword\fR\h'|\nzu+2u'\fIword\fR.
Likewise, \fB\ek(\fIxx\fR and \fB\ek[\fIxxx\fB]\fR
will store the horizontal position in register \fIxx\fR or \fIxxx\fR,
respectively.
The \A'n_hp'\fBhp\fR number register also holds
the current horizontal position in the input line.
.mha s_draw
Overstrike, Bracket, Line-drawing, Graphics, and Zero-width Functions
.sc
\A'c_overstrike'Overstriking.
Automatically centered overstriking of up to nine characters
is provided by the \fIoverstrike\fR function
\A'e_o'\fB\eo\'\fIstring\fB\|\'\fR.
The characters in \fIstring\fR overprinted with centers aligned; the total width
is that of the widest character.
\fIstring\fR may \fInot\fR contain local vertical motion.
As examples,
\fB\eo\'e\e\'\'\fR produces \fB\o'e\''\fR, and
\fB\eo\'\e(mo\e(sl\'\fR produces \fB\o'\(mo\(sl'\fR.
.sc
Zero-width characters and strings.
The function \A'e_z'\fB\ez\fIc\fR will output \fIc\fR without spacing over
it, and can be used to produce left-aligned overstruck
combinations.
As examples,
\fB\ez\e(ci\e(pl\fR will produce \fB\z\(ci\(pl\fR, and
\fB\e(br\ez\e(rn\e(ul\e(br\fR will produce the smallest possible
constructed box \fB\(br\z\(rn\(ul\(br\fR\|.
.pg
The function \A'e_Z'\fB\eZ\fI'string'\fR
prints \fIstring\fR in nofill mode
and restores the horizontal and vertical position afterwards.
.sc
Large Brackets.
The Special Font contains a number of bracket construction pieces
(\|\|\(lt\|\|\(lb\|\|\(rt\|\|\(rb\|\|\(lk\|\|\(rk\|\|\(bv\|\|\(lf\|\|\(rf\|\|\(lc\|\|\(rc\|\|)
that can be combined into various bracket styles.
The function \A'e_b'\fB\eb\'\fIstring\fB\|\'\fR may be used to pile
up vertically the characters in \fIstring\fR
(the first character on top and the last at the bottom);
the characters are vertically separated by 1|em and the total
pile is centered 1/2\|em above the current baseline
(\(12 line in \*(NR).
For example,
\fB\eb\'\|\e(lc\e(lf\|\'E\e\|~\|\eb\'\|\e(rc\e(rf\|\'\|\ex\'\|\-0.5m\'\|\ex\'0.5m\'\|\fR
produces
\x'-.5m'\x'.5m'\fB\b'\(lc\(lf'E\|\b'\(rc\(rf'\fR.
.sc
\A'c_line'Line drawing.
.tr &&
The function \A'e_l'\fB\e\|l\^\'\fINc\fB\'\fR (backslash-ell)
will draw a string of repeated \fIc\fR\|'s towards the right for a distance \fIN\fR.
If \fIc\fR looks like a continuation of
an \T'c_expr'expression\T for \fIN\fR,
it may insulated from \fIN\fR with a \fB\e&\fR.
If \fIc\fR is not specified, the \fB\(ru\fR (baseline rule) is used
(underline character in \*(NR).
If \fIN\fR is negative, a backward horizontal motion
of size \fIN\fR is made \fIbefore\fR drawing the string.
Any space resulting from \fIN\fR\|/(size of \fIc\fR) having a remainder is put at the beginning (left end)
of the string.
If \fIN\fR is less than the width of \fIc\fR,
a single \fIc\fR is centered on a distance \fIN\fR.
In the case of characters
that are designed to be connected such as
baseline-rule\ \fB\(ru\fR\|,
underrule\ \fB\(ul\fR\|,
and
root-en\ \fB\(rn\fR\|,
the remainder space is covered by over-lapping;
the set of these characters can be customized with the
\T'connectchar'\fBconnectchar\fR\T request described below.
If \fIN\fR is \fIless\fR than the width of \fIc\fR,
a single \fIc\fR is centered on a distance \fIN\fR.
As an example, a macro to underscore a string can be written
.br
.tr &.
.x1
.ft B
.ne 2.1
&de us
\e\e$1\e\|l\|\'\|~\|0\e(ul\'
&&
.ft R
.x2
.ne 2.1
.de xu
\\$1\l'|0\(ul'
..
or one to draw a box around a string
.x1
.ft B
&de bx
\e(br\e\|~\|\e\e$1\e\|~\|\e(br\e\|l\|\'\|~\|0\e(rn\'\e\|l\|\'\|~\|0\e(ul\'
&&
.ft R
.x2
.de bx
\(br\|\\$1\|\(br\l'|0\(rn'\l'|0\(ul'
..
such that
.x1
.ft B
&us "underlined words"
.ft R
.x2
and
.x1
.ft B
&bx "words in a box"
.ft R
.x2
yield
.xu "underlined words"
and
.bx "words in a box"
\h'-\w'.'u'.
.pg
The function \A'e_L'\fB\eL\'\fINc\fB\'\fR draws a vertical line consisting
of the (optional) character \fIc\fR stacked vertically apart 1\|em
(1 line in \*(NR),
with the first two characters overlapped,
if necessary, to form a continuous line.
The default character is the \fIbox rule\fR |\(br| (\fB\|\e(br\fR);
the other suitable character is the \fIbold vertical\fR \|\(bv\| (\fB\|\e(bv\fR).
The line is begun without any initial motion relative to the
current base line.
A positive \fIN\fR specifies a line drawn downward and
a negative \fIN\fR specifies a line drawn upward.
After the line is drawn \fIno\fR compensating
motions are made;
the instantaneous baseline is at the \fIend\fR of the line.
Motions of line drawing functions are local which means that the
effect of these motions vanishes when a new output line is started.
.pg
.nr nosave 1
.de eb
.sp -1
.nf
\h'-.5n'\L'|\\nzu-1'\l'\\n(.lu+1n\(ul'\L'-|\\nzu+1'\l'|0u-.5n\(ul'
.fi
..
.ne 2i
.mk z
The horizontal and vertical line drawing functions may be used
in combination to produce large boxes.
The zero-width \fIbox-rule\fR and the \(12-em wide \fIunderrule\fR
were \fIdesigned\fR to form corners when using 1-em vertical
spacings.
For example the macro
.x1
.ft B
\&.de eb
\&.sp \-1	\e"compensate for next automatic base-line spacing
\&.nf	\e"avoid possibly overflowing word buffer
.tr ||
\&\eh\'\-.5n\'\eL\'\||\|\e\enau\-1\'\el\'\e\en(.lu+1n\e(ul\'\eL\'\-\||\|\e\enau+1\'\el\'\||\|0u\-.5n\e(ul\'    \e"draw box
.tr |
.lg 0
\&.fi
.lg
\&..
.ft R
.x2
will draw a box around some text whose beginning vertical place was
saved in number register \fIa\fR
(e.g. using \fB.mk|a\fR)
as done for this paragraph.
.eb
.h1
.bta connectchar
\fB&connectchar\fI|c..\fR	\h'-4m'\fB"\e(ru\e(ul\e(rn\fR	\h'-4m'off	E	Connected characters for line drawing.
If there is a remainder to be drawn for a horizontal line,
these characters are drawn over-lapping.
The current set is available
in the \A'n_.connectchar'\fB&connectchar\fR number register.
.sc
\A's_graphics'Graphics.
The function \A'e_D'\fB\eD\fI\'c...\'\fR
draws a graphic object of type \fIc\fR
according to a sequence of parameters,
which are generally pairs of numbers.
.nf
.ta 1.6i
.nr nosave 1
\fB\eD\'l \fIdh dv\'	\fRdraw line from current position by \fIdh,\|dv\fR
.nr nosave 0
\fB\eD\'p \fIdh1 dv1 dh2 dv2 ...\'	\fRdraw polygon, i.e. a line to\
 \fIdh1,\|dv1\fR, then to \fIdh2,\|dv2\fR, then ...
\fB\eD\'P \fIdh1 dv1 dh2 dv2 ...\'	\fRdraw filled polygon
\fB\eD\'c \fId\'	\fRdraw circle of diameter \fId\fR with left side at\
 current position
\fB\eD\'C \fId\'	\fRdraw filled circle
\fB\eD\'e \fIu v\'	\fRdraw ellipse of diameters \fIu\fP and \fIv\fP
\fB\eD\'E \fIu v\'	\fRdraw filled ellipse
.ne 2
\fB\eD\'a \fIa b c d\'\fB	\fRdraw arc from current position to\
 \fIa\fR+\fIc\fR,\|\fIb\fR+\fId\fR, \fRwith center at \fIa\fR,\|\fIb\fR from\
 current position
\fB\eD\'\(ap \fIa b c d...\'\fB	\fRdraw B-spline from current position by\
 \fIa\fR,\|\fIb\fR, \fRthen by \fIc\fR,\|\fId\fR, then by \fIc\fR,\|\fId\fR,\
 then ...
.pg
For example,\fB\eD\'e0.2i 0.1i\'\fR
draws the ellipse
\D'e.2i .1i'\|,
and \fB\eD\'l.2i \-.1i\'\eD\'l.1i .1i\'\fR
the line
\D'l.2i -.1i'\D'l.1i .1i'\|.
A \fB\eD\fR
with an unknown \fIc\fR is processed and copied through to the output
for unspecified interpretation;
coordinates are interpreted alternately as horizontal and vertical
values.
.pg
Numbers taken as horizontal (first, third, etc.)
have default scaling of \fBm\fR;
vertical numbers (second, fourth, etc.)
have default scaling of \fBv\fR \T'c_units'(\(sc1.3).\T
The position after a graphical object has been drawn is
at its end; for circles and ellipses, the ``end''
is at the right side.
.\" from file m4
.tr |
.mha s_hyphen
Hyphenation.
.pg
Automatic hyphenation may be switched off and on.
When switched on with \T'hy'\fBhy\fR\T,
several variants may be set.
A \fIhyphenation indicator\fR character,
by default \A'e_%'\fB\e%\fR,
may be imbedded in a word to
specify desired hyphenation points,
or may be prefixed to suppress hyphenation.
The character \A'e_:'\fB\e:\fR indicates that a line break may
optionally occur at a point,
but that no hyphen is to be generated.
In addition,
the user may specify a small list of exception words.
.pg
Only words that consist of a central alphabetic string
surrounded by (usually null) non-alphabetic strings
are considered candidates for automatic hyphenation.
Unless the set of optional line break characters is otherwise configured,
words that contain hyphens
(minus),
em-dashes (\fB\e(em\fR),
or hyphenation indicator characters
are \fIalways\fR subject to splitting after those characters,
whether automatic hyphenation is on or off.
.h1
.bta nh
\fB&nh\fR	hyphenate	\(en	E	\
Automatic hyphenation is turned off.
.bta hy
\fB&hy\fI|N\fR	on,\fIN=\fR1	on,\fIN=\fR1	E	\
Automatic hyphenation is turned on
for \fIN\fR\|\(>=1, or off for \fIN=\fR\|0.
If \fIN=\fR\|2, \fIlast\fR lines (ones that will cause a trap)
are not hyphenated.
For \fIN=\fR\|4 and 8, the last and first two characters
respectively of a word are not split off.
For \fIN=\fR\|16 and 32, the last and first characters
respectively of a word are allowed to be split off;
this is only effective for explicit hyphenation points
specified with \fB\e%\fR, \fB\e:\fR, or \fBhw\fR.
These values are additive;
i.e. \fIN=\fR\|14 will invoke the three restrictions.
The current value is available in the \A'n_.hy'\fB&hy\fR number register.
.bta hylang
\fB&hylang\fI|name\fR	off	off	E	Set the hyphenation language
to \fIname\fR, which is one of
\fBde_DE\fR,
\fBde_DE@traditional\fR,
\fBen_US\fR,
\fBfr_FR\fR,
\fBit_IT\fR,
\fBla_VA\fR,
or
\fBnl_NL\fR.
Other languages can be made available by adding hyphenation
files to the directory
\fB/usr/ucblib/doctools/hyphen\fR.
If no \fIname\fR argument
is present, the hyphenation is reset to the traditional \*(TR
mechanism.
The current value is available in the \A'n_.hylang'\fB&hylang\fR
number register.
.xx
This request also makes parts of words composed by \fB-\fR or
\fB\e(em\fR characters subject to hyphenation,
unless otherwise defined explicitly with the \fB&nhychar\fR request.
Traditionally, the only
hyphenation points in such words had been the hyphens/dashes.
.bta shc
\fB&shc\fI|c\fR	\(hy	\(hy	E	Set the soft hyphenation character,
i.e. the character that is inserted at the end of
a hyphenated word.
The current soft hyphenation character is available
in the \A'n_.shc'\fB&shc\fR number register.
.bta hcode
\fB&hcode\fI|abcd...\fR	\(en	E	Hyphenation code.
When determining the hyphenation points for an input word,
\fIa\fR is mapped to \fIb\fR, etc.
When no hyphenation code is specified for a character,
it is mapped to its lower-case variant if necessary,
and the ``long s'' (\fB\e[longs]\fP) character is mapped to a ``round s''.
.bta hylen
\fB&hylen\fI|N\fR	5	5	E	Hyphenate only words of at least \fIN\fR characters in length.
The current value is available in the \A'n_.hylen'\fB&hylen\fR number register.
.bta hlm
\fB&hlm\fI|N\fR	off	off	E	Maximum number of consecutive hyphenated lines.
Each time a line is hyphenated automatically,
the count of consecutive hyphenated lines
(accessible in the \A'n_.hlc'\fB&hlc\fR number register)
is incremented;
whenever a line is not automatically hyphenated,
it is reset to zero.
This request allows to set a limit on the maximum number
of consecutive hyphenated lines;
when the count of consecutive lines has reached the maximum,
the current line is not hyphenated.
The default is no limit.
The current value is accessible in the \A'n_.hlm'\fB&hlm\fR number register.
.bta hypp
\fB&hypp\fI|N|M|L\fR	0|0|0	0|0|0	E	Define hyphenation penalties for \T'ad_p'\fBad p\fR\T mode.
Every inserted hyphen is given a penalty of \fIN\fR
when computing optimal break points;
each hyphen that is followed by another hyphen
gets an additional penalty of \fIM\fR.
A hyphen that is inserted in the last word of a paragraph
gets an additional penalty of \fIL\fR.
A value of zero means no penalty.
Effective penalties correspond to values between 10 and 200.
The current values are available in the
\A'n_.hypp'\fB&hypp\fR,
\A'n_.hypp2'\fB&hypp2\fR, and
\A'n_.hypp3'\fB&hypp3\fR
number registers.
.bta breakchar
\fB&breakchar\fI|c.\fR	\fB\(hy\(em\fR	off	E	Optional line break characters.
A line may always be split after one of these characters.
The current set of optional line break characters is available
in the \A'n_.breakchar'\fB&breakchar\fR number register.
.bta nhychar
\fB&nhychar\fI|c...\fR	\fB\(hy\(em\fR	off	E	Hyphenation-inhibiting characters.
A word that contains one of the characters \fIc...\fR
is not hyphenated,
except that it may be split across lines
if one of these characters is also an optional line break character.
The current set of hyphenation-inhibiting characters is available
in the \A'n_.nhychar'\fB&nhychar\fR number register.
.bta hc
\fB&hc\fI|c\fR	\fB\e%	\e%\fR	E	Hyphenation indicator character is set
to \fIc\fR or to the default \fB\e%\fR.
The indicator does not appear in the output.
.bta hw
\fB&hw\fI|word1|...\fR		ignored	\(en	Specify hyphenation points in words
with imbedded minus signs.
Versions of a word with terminal \fIs\fR are implied;
i.e. \fIdig\-it\fR implies \fIdig\-its\fR.
This list is examined initially \fIand\fR after
each suffix stripping.
.mha s_titles
Three-Part Titles.
.pg
The titling function \T'tl'\fBtl\fR\T provides for automatic placement
of three fields at the left, center, and right of a line
with a title-length
specifiable with \T'lt'\fBlt\fR\T.
\fBtl\fR may be used anywhere, and is independent of the
normal text collecting process.
A common use is in header and footer macros.
.h1
.bta tl
\fB&tl\fI|\'left\'center\'right\'\fR	\(en	\(en	\
The strings \fIleft\fR, \fIcenter\fR, and \fIright\fR are
respectively left-adjusted, centered, and right-adjusted
in the current title-length.
Any of the strings may be empty,
and overlapping is permitted.
If the page-number character (initially \fB%\fR) is found within any of the fields it is replaced
by the current page number having the format assigned
to register \T'n_%'\fB%\fR\T.
Any character may be used as the string delimiter.
.bta pc
\fB&pc\fI|c\fR	\fB%\fR	off	\(en	The page number character is set to \fIc\fR,
or removed.
The page-number register remains \fB%\fR.
.bta lt
\fB&lt\fI|\(+-N\fR	6.5\|in	previous	E,\fBm\fR	Length of title set to \fI\(+-N\fR.
The line-length and the title-length are \fIindependent\fR.
Indents do not apply to titles; page-offsets do.
The current value is available in the \A'n_.lt'\fB&lt\fR number register.
.mha s_onl
Output Line Numbering.
.pg
.ll -\w'0000'u
.nm 1 3
Automatic sequence numbering of output lines may be
requested with \T'nm'\fBnm\fR\T.
When in effect,
a three-digit, arabic number plus a digit-space
is prepended to output text lines.
The text lines are thus offset by four digit-spaces,
and otherwise retain their line length;
a reduction in line length may be desired to keep the right margin
aligned with an earlier margin.
Blank lines, other vertical spaces, and lines generated by \T'tl'\fBtl\fR\T
are \fInot\fR numbered.
Numbering can be temporarily suspended with \T'nn'\fBnn\fR\T,
or with an \fB.nm\fR followed by a later \fB.nm|+0\fR.
In addition,
a line number indent \fII\fR, and the number-text separation \fIS\fR
may be specified in digit-spaces.
Further, it can be specified that only those line numbers that are
multiples of some number \fIM\fR are to be printed (the others will appear
as blank number fields).
.br
.nm
.ll
.h1
.bta nm
\fB&nm\fI|\(+-N|M|S|I\fR	off	E	\
Line number mode.
If \fI\(+-N\fR is given,
line numbering is turned on,
and the next output line numbered is numbered \fI\(+-N\fR.
Default values are \fIM=\fR\|1, \fIS=\fR\|1, and \fII=\fR\|0.
Parameters corresponding to missing arguments are unaffected;
a non-numeric argument is considered missing.
In the absence of all arguments, numbering is turned off;
the next line number is preserved for possible further use
in number register \A'n_ln'\fBln\fR.
.bta nn
\fB&nn\fI|N\fR	\(en	\fIN=\fR1	E	The next \fIN\fR text output lines are not
numbered.
.pg
.ll -\w'0000'u
.nm +0
As an example, the paragraph portions of this section
are numbered with \fIM=\fR\|3:
\&\fB.nm|1|3\fR was placed at the beginning;
\&\fB.nm\fR was placed at the end of the first paragraph;
and \fB.nm|+0\fR was placed in front of this paragraph;
and \fB.nm\fR finally placed at the end.
Line lengths were also changed (by \fB\ew\'0000\'u\fR) to keep the right side aligned.
Another example is
\&\fB.nm|+5|5|x|3\fR which turns on numbering with the line number of the next
line to be 5 greater than the last numbered line,
with \fIM=\fR\|5, with spacing \fIS\fR untouched, and with the indent \fII\fR set to 3.
.br
.ll
.nm
.mha s_cond
Conditional Acceptance of Input
.pg
In the following,
\fIc\fR is a one-character, built-in \fIcondition\fR name,
\fB!\fR signifies \fInot\fR,
\fIN\fR is an integer \T'c_expr'numerical expression\T,
\fIF\fR is a floating-point expression,
\fIstring1\fR and \fIstring2\fR are strings delimited by any non-blank, non-numeric character \fInot\fR in the strings,
and
\fIanything\fR represents what is conditionally accepted.
.h1
.bta if
\fB&if\fI|c|anything\fR		\(en	\(en	If condition \fIc\fR true, accept \fIanything\fR as input;
in multi-line case use \fI\e{anything\|\e}\fR.
.bt
\fB&if|!\fIc|anything\fR	\(en	\(en	If condition \fIc\fR false, accept \fIanything\fR.
.bt
\fB&if\fI|N|anything\fR		\(en	\fBu\fR	If \T'c_expr'expression\T \fIN\fR > 0, accept \fIanything\fR.
.bt
\fB&if|!\fIN|anything\fR	\(en	\fBu\fR	If \T'c_expr'expression\T \fIN\fR \(<= 0 [sic], accept \fIanything\fR.
.bt
\fB&if|f\fIF|anything\fR	\(en	\fBu\fR	If floating-point expression \fIF\fR > 0, accept \fIanything\fR.
.bt
\fB&if|!f\fIF|anything\fR	\(en	\fBu\fR	If floating-point expression \fIF\fR \(<= 0 [sic], accept \fIanything\fR.
.bt
\fB&if\fI|\'string1\'string2\'|anything\fR	\(en	If \fIstring1\fR identical to \fIstring2\fR,
accept \fIanything\fR.
.bt
\fB&if|!\fI\|\'string1\'string2\'|anything\fR	\(en	If \fIstring1\fR not identical to \fIstring2\fR,
accept \fIanything\fR.
.bta ie
\fB&ie\fI|c|anything\fR		\(en	\fBu\fR	If portion of if-else; all of the forms for \fBif\fR above are valid.
.bta el
\fB&el\fI|anything\fR		\(en	\(en	Else portion of if-else.
.bta while
\fB&while\fI|c|anything\fR	\(en	\(en	Execute \fIanything\fR while \fIc\fR is true;
all of the forms for \fBif\fR above are valid.
\fIanything\fR is stored in an unnamed temporary macro
each time a \fBwhile\fR loop is prepared for execution.
.xx
In the multi-line case,
the \fB\e}\fR terminating the loop must be placed at the end of a line.
.xx
When \fIanything\fR is copied to the macro,
neither \T'copy mode'copy mode\T nor regular
escape interpretation apply.
References to number registers, strings, etc. must
thus be written using a single escape character
unless the \fBwhile\fR request is contained in a macro definition.
.xx
Nested loops will result in many macro definitions
and may slow down execution,
especially if their body is large.
\T'c_recursion'Recursive macros (\(sc10.6)\T do not suffer from this problem.
In contrast to recursive macro calls,
there is no mechanism to terminate a loop automatically
when a repetition limit has been reached.
In case of doubt,
an explicit limit termination condition
should be added to prevent endless loops.
.bta break
\fB&break\fI|n\fR	\(en	1	\(en	Break out of \fIn\fR nested \fBwhile\fR loops,
or terminate the current loop if no argument is given.
It is not necessary that all of the loops
are contained within the same macro;
if there are any macros executing inside the specified loop,
control also returns from these macros.
In case of a non-positive or non-numeric argument, \fIn\fR=1 is assumed.
If the number of levels requested is greater
than the number of loops currently executing,
control returns to the highest non-looping level.
.bta continue
\fB&continue\fI|n\fR	\(en	1	\(en	Continue at the \fIn\fR-th nested \fBwhile\fR loop,
or continue the current loop if no argument is given.
Execution resumes with the test of the specified \fBwhile\fR loop;
if this test fails, the request is effectively like \fBbreak\fR.
\fBcontinue\fR also returns from all inside macro calls
until it has reached the specified loop.
In case of a non-positive or non-numeric argument, \fIn\fR=1 is assumed.
If the number of levels requested is greater
than the number of loops currently executing,
control returns to the highest non-looping level,
and no loop is continued.
.pg
.ne 16
The built-in condition names are:
.TS
center box;
c2|c2
c2|c2
c2|l2.
Condition
Name	True if
_
\fBc\fI G\fR	T{
Character \fIG\fR exists in the current font,
where \fIG\fR is either an \s-1ASCII\s+1 or localized input
character, a \*(TR special character \T'e_('\fB\e(\fIxx\fR\T or
\T'e_['\fB\e[\fIxxx\fB]\fR\T, or a \T'e_U'\fB\eU\fI\'X\'\fR\T escape sequence
T}
\fBd\fI xx\fR	There is a request, macro, or string \fIxx\fR
\fBr\fI xx\fR	Number register \fIxx\fR has been accessed
\fBF \fIfont\fR	Font named \fIfont\fP exists
\fBo\fR	Current page number is odd
\fBe\fR	Current page number is even
\fBt\fR	Formatter is \*(TR
\fBn\fR	Formatter is \*(NR
\fBv\fR	Never.  (\fBv\fR is used by other roff variants.)
.TE
If the condition \fIc\fR is \fItrue\fR, or if the number \fIN\fR is greater than zero,
or if the strings compare identically (including motions and character size and font),
\fIanything\fR is accepted as input.
If a \fB!\fR precedes the condition, number, or string comparison,
the sense of the acceptance is reversed.
.pg
Any spaces between the condition and the beginning of \fIanything\fR are skipped over.
The \fIanything\fR can be either a single input line (text, macro, or whatever)
or a number of input lines.
In the multi-line case,
the first line must begin with a left delimiter \A'e_{'\fB\e{\fR and
the last line must end with a right delimiter \A'e_}'\fB\e}\fR.
.pg
The request \T'ie'\fBie\fR\T (if-else) is identical to \T'if'\fBif\fR\T
except that the acceptance state is remembered.
A subsequent and matching \T'el'\fBel\fR\T (else) request then uses the reverse sense of that state.
\fBie\fR|-|\fBel\fR pairs may be nested.
.pg
.ne 3
Some examples are:
.x1
.ft B
.ne 1
&if e .tl \'Even Page %\'\'\'
.ft R
.x2
which outputs a title if the page number is even; and
.x1
.ne 6
.ft B
.ne 3.1
&ie \en%>1 \e{\e
\&\'sp 0.5i
&tl \'Page %\'\'\'
\&\'sp ~\|1.2i|\e}
&el .sp ~\|2.5i
.ft R
.x2
which treats page 1 differently from other pages.
.mha s_env
Environment Switching.
.pg
A number of the parameters that
control the text processing are gathered together into an
\fIenvironment\fR, which can be switched by the user.
The environment parameters are those associated
with requests noting E in their \fINotes\fR column;
in addition, partially collected lines and words are in the environment.
Everything else is global; examples are page-oriented parameters,
\T'c_diversion'diversion\T-oriented parameters,
number registers, and macro and string definitions.
All environments are initialized with default parameter values.
The number of possible environments is only limited by available memory.
.pg
\A'c_inline_environment'Inside each environment,
a smaller set of parameters
forms the \fIinline environment\fR.
These are:
the current and previous point size,
as set by \T'ps'\fBps\fR\T and \T'e_s'\fB\es\fR\T;
the current and previous font,
as set by \T'ft'\fBft\fR\T and \T'e_f'\fB\ef\fR\T;
the control and nobreak control character,
as set by \T'cc'\fBcc\fR\T and \T'c2'\fBc2\fR\T, respectively;
the optional hyphenation character,
as set by \T'hc'\fBhc\fR\T;
the hyphenation flag,
as set by \T'hy'\fBhy\fR\T;
the tab and leader repetition characters,
as set by \T'tc'\fBtc\fR\T and \T'lc'\fBlc\fR\T, respectively;
and the default line breaking penalty,
as set by \T'e_J'\fB\eJ\fR\T.
The inline environment is pushed
by \A'e_@'\fB\e@{\fR,
meaning that the current values of these parameters are saved.
When a \fB\e@}\fR occurs,
the last pushed inline environment is popped,
meaning that the previous values of the parameters are restored.
Inline environments can be nested to arbitrary depths.
They differ from \fB\es0\fR and \fB\efP\fR
since they form a stack.
Thus, the current font is ``B'' again
after the sequence ``\efB...\e@{\efR...\e@{\efI...\e@}...\e@}'',
but ``I'' after the sequence ``\efB...\efR...\efI...\efP...\efP''.
.h1
.bta ev
\fB&ev\fI|name\fR	\fIname\(eq\fR0	previous	\(en	Environment switched to
environment \fIname\fR.
Switching is done in push-down fashion so that
restoring a previous environment \fImust\fR be done with \fB.ev\fR
rather than specific reference.
Note that what is pushed down and restored
is the environment \fIname,\fR
not its contents.
The name of the current environment is available
in the \A'n_.ev'\fB&ev\fR number register.
.bta evc
\fB&evc\fI|name\fR		\(en	\(en	Copy the environment \fIname\fR to the current environment.
The temporary state of the current environment is reset, and
incompletely filled lines are discarded.
.mha s_stdin
Insertions from the Standard Input
.pg
The input can be temporarily switched to the system \fIstandard input\fR
with \T'rd'\fBrd\fR\T,
which will switch back when \fItwo\fR newlines
in a row are found (the \fIextra\fR blank line is not used).
This mechanism is intended for insertions in form-letter-like documentation.
The \fIstandard input\fR can be the user's keyboard,
a \fIpipe\fR, or a \fIfile\fR.
.h1
.bta rd
\fB&rd\fI|prompt\fR	\(en	\fIprompt=\fR\s-1BEL\s+1	\(en	\
Read insertion from the standard input until two newlines in a row are found.
If the standard input is the user's keyboard, \fIprompt\fR (or a \s-1BEL\s+1)
is written onto the user's terminal.
\fBrd\fR behaves like a macro,
and arguments may be placed after \fIprompt\fR.
.bta ex
\fB&ex\fR	\(en	\(en	\(en	Exit from \*(NR/\*[TR.]
Text processing is terminated exactly as if all input had ended.
.pg
If insertions are to be
taken from the terminal keyboard \fIwhile\fR output is being printed
on the terminal, the command line option \fB\-q\fR will turn off the echoing
of keyboard input and prompt only with \s-1BEL\s+1.
The regular input and insertion input \fIcannot\fR
simultaneously come from the standard input.
.pg
As an example,
multiple copies of a form letter may be prepared by entering the insertions
for all the copies in one file to be used as the standard input,
and causing the file containing the letter
to reinvoke itself using \T'nx'\fBnx\fR\T
\T's_io'(\(sc19);\T
the process would ultimately be ended
by an \T'ex'\fBex\fR\T in the insertion file.
.br
.ne 6
.mha s_io
Input/Output File Switching
.h1
.bta so
\fB&so\fI|filename\fR		\(en	\(en	Switch source file.
The top input (file reading) level is switched to \fIfilename\fR.
When the new file ends,
input is again taken from the original file.
It is a fatal error if \fIfilename\fR cannot be opened.
\fBso\fR's may be nested.
.bta pso
\fB&pso\fI|string\fR		\(en	\(en	Execute \fIstring\fR
and read its standard output as text input.
.bta nx
\fB&nx\fI|filename\fR		end-of-file	\(en	Next file is \fIfilename\fR.
The current file is considered ended, and the input is immediately switched
to \fIfilename\fR.
.bta sy
\fB&sy\fI|string\fR		\(en	\(en	Execute program from \fIstring\fR, which is the rest of the input line.
The output is not collected automatically.
The number register \A'n_$$'\fB$$\fP,
which contains the process id of the \*(TR process,
may be useful in generating unique filenames for output.
.bta pi
\fB&pi\fI|string\fR		\(en	\(en	Pipe output to \fIstring\fR, which is the rest of the input line.
This request must occur \fIbefore\fR any printing occurs;
typically it is the first line of input.
.bta cf
\fB&cf\fI|filename\fR		\(en	\(en	Copy contents of file \fIfilename\fR to output, completely unprocessed.
The file is assumed to contain something meaningful to subsequent processes.
.bta open
\fB&open\fI|stream|filename\fR	ignored	\(en	Open \fIfilename\fR for writing while truncating existing contents
and associates \fIstream\fR with it for latter use with \fBwrite\fR etc.
.bta opena
\fB&opena\fI|stream|filename\fR	ignored	\(en	Like \fBopen\fR but appends to \fIfilename\fR instead of truncating
an existing file.
.bta write
\fB&write\fI|stream|text\fR	ignored	\(en	Write \fItext\fR to file \fIstream\fR,
which must have been obtained by a previous \fBopen\fR request.
\fItext\fR is interpreted in \T'copy mode'\fIcopy mode.\fR\T
.bta writec
\fB&writec\fI|stream|text\fR	ignored	\(en	Like \fBwrite\fR but does not write a terminating newline.
.bta writem
\fB&writem\fI|stream|xx\fR	ignored	\(en	Write contents of string, macro, or diversion \fIxx\fR.
No newline is appended,
so if \fIxx\fR is a string,
the output does not terminate with a newline.
.bta close
\fB&close\fI|stream\fR		\(en	\(en	Close the file \fIstream\fR,
which must have been obtained by a previous \fBopen\fR request.
.mha s_misc
Miscellaneous
.pg
The \A'e_V'\fB\eV\fIx\fR, \fB\eV(\fIxx\fR, or \fB\eV[\fIxxx\fB]\fR
escape sequence causes the value of the
\fIx\fP, \fIxx\fR, or \fIxxx\fR environment variable, respectively,
to be printed.
It is interpreted in \T'copy mode'\fIcopy mode.\fR\T
.pg
.h1
.bta mc
.mc \s12\(br\s0
\fB&mc\fI|c|N\fR	\(en	off	E,\fBm\fR	\
Specifies that a \fImargin\fR character \fIc\fR appear a distance
\fIN\fR to the right of the right margin
after each non-empty text line (except those produced by \T'tl'\fBtl\fR\T).
If the output line is too-long (as can happen in nofill mode)
the character will be appended to the line.
If \fIN\fR is not given, the previous \fIN\fR is used; the initial \fIN\fR is
0.2|inches in \*(NR and 1\|em in \*[TR.]
The margin character used with this paragraph was a 12-point box-rule.
.br
.ad b
.mc
.bta lpfx
\fB&lpfx\fI|string\fR	off	off	E	Set the line prefix
.lpfx ``
to \fIstring\fR.
``Whenever a new output line is started,
\fIstring\fR is then printed at its beginning.
Font and size settings as well as automatic ligatures in \fIstring\fR
are retained regardless of later changes.
This request is mainly useful
to implement a historic form of block quotation.
The current value is available in the \A'n_.lpfx'\fB&lpfx\fR register.''
.br
.ad p
.lpfx
.bta tm
\fB&tm\fI|string\fR	\(en	newline	\(en	\
After skipping initial blanks, \fIstring\fR (rest of the line) is read in \T'copy mode'\fIcopy mode\fR\T
and written on the standard error.
.bta tmc
\fB&tmc\fI|string\fR	\(en	newline	\(en	Like \fBtm\fR
but does not write a terminating newline.
.bta nop
\fB&nop\fI|remainder of line\fR	\(en	\(en	Use \fIremainder of line\fR as input.
.bta chomp
\fB&chomp\fI|remainder of line\fR	\(en	\(en	Use \fIremainder of \
line without newline\fR as input.
.bta ab
\fB&ab\fI|string\fR	\(en	newline	\(en	\
After skipping initial blanks, \fIstring\fR (rest of the line) is read in \T'copy mode'\fIcopy mode\fR\T
and written on the standard error.
\*(TR or \*(NR then exit.
.bta ig
\fB&ig\fI|yy\fR	\(en	\fI.yy=\fB..\fR	\(en	Ignore \
input lines.
\fBig\fR behaves exactly like \T'de'\fBde\fR\T
\T's_mac'(\(sc7)\T except that the
input is discarded.
The input is read in \T'copy mode'\fIcopy mode\fR,\T and any auto-incremented
registers will be affected.
.bta lf
\fB&lf\fI|N|filename\fR		\(en	\(en	\
Set line number to \fIN\fR and filename to \fIfilename\fR
for purposes of subsequent error messages, etc.
The number register [sic] \fB.F\fR contains
the name of the current input file,
as set by command line arguments,
\fBso\fR, \fBnx\fR, or \fBlf\fR.
The number register \fB.c\fR contains the number of input lines
read from the current file, again perhaps as modified by \fBlf\fR.
.bta pm
\fB&pm\fI|t\fR	\(en	all	\(en	\
Print macros.
The names and sizes of all of the defined macros and strings are printed
on the standard error;
if \fIt\fR is given, only the total of the sizes is printed.
The sizes is given in \fIblocks\fR
of 128 characters.
.bta fl
.lg 0
\fB&fl\fR	\(en	\(en	B	\c
.lg
Flush output buffer.
Force output,
including any pending position information.
.mha s_err
Output and Error Messages, Debugging.
.sc
Output Messages.
The output from \T'tm'\fBtm\fR\T,
\T'pm'\fBpm\fR\T, and the prompt from \T'rd'\fBrd\fR\T,
as well as various \fIerror\fR messages are written onto
the standard error.
The latter is different from the \fIstandard output\fR,
where formatted text goes.
By default, both are written onto the user's terminal,
but they can be independently redirected.
An error message additionally includes
the line number where the error occurred,
the current input file name,
the current physical output page number (if any),
and the names of the macros
in the frames of the current execution stack.
The \%\fBerrprint\fR request allows
to write custom messages in the same format.
.sc
Warnings.
\A's_warning'\*(NR and \*(TR provide a mechanism
to enable or disable warnings for several categories.
When one of the selected conditions occurs,
a \fIwarning\fR message is written
in the same format as an error message,
but processing continues.
.br
.ne 6
.TS H
nokeep box center;
r | l | l
n | lfB | lw(4.0i).
Bit	Name	Description
_
.TH
0	none	No warnings at all.
1	char	T{
Warn when unknown character names like \fB\e(xx\fR or \fB\e[xxx]\fR
are found.
T}
2	number	Warn when illegal \T'c_expr'numerical expressions\T occur.
4	break	Warn when a line in \fB&ad b\fR mode cannot be adjusted.
8	delim	Warn when a delimiter to an escape sequence is missing.
16	el	T{
Warn when a \T'el'\fBel\fR\T request is found
without a matching \T'ie'\fBie\fR\T.
T}
32	scale	T{
Warn when an undefined scale indicator is used in a
\T'c_expr'numerical expression\T.
T}
64	range	T{
Warn when an argument is out of range.
T}
128	syntax	T{
Warn about questionable syntax in numerical expressions.
T}
256	di	T{
Warn when a \T'di'\fBdi\fR\T request is executed but no
\T'c_diversion'diversion\T is currently active.
T}
512	mac	T{
Warn when an undefined request, macro or string is called.
T}
1024	reg	T{
Warn when an undefined number register is accessed.
The number register will be set to zero immediately after
the first access so this warning can be printed only
once per register name.
T}
4096	right-brace	T{
Warn when a \fB\e}\fR terminates a numerical expression.
T}
8192	missing	Warn when a required argument to a request is missing.
16384	input	T{
Warn when illegal byte sequences or characters that have
no known \*(PS equivalent are read.
T}
32768	escape	Warn when an undefined escape sequence is used.
65536	space	T{
Warn when an unknown long request name is used, but its
first two characters form a known regular request.
The regular request is then executed in extension level 2, or
ignored in extension level 3.
T}
131072	font	T{
Warn when a font cannot be found.
This warning is enabled
by default.
T}
	all	T{
All warnings except \fBdi\fR, \fBmac\fR, and \fBreg\fR.
This may be the best choice when using existing macro packages.
T}
	w	All warnings.
.TE
.sc
Errors.
Various \fIerror\fR conditions may occur during
the operation of \*(NR and \*[TR.]
Certain less serious errors having only local impact do not
cause processing to terminate.
Two examples are \fIword overflow\fR, caused by a word that is too large
to fit into the word buffer (in fill mode), and
\fIline overflow\fR, caused by an output line that grew too large
to fit in the line buffer;
in both cases, a message is printed, the offending excess
is discarded,
and the affected word or line is marked at the point of truncation
with a \(** in \*(NR and a \(lh in \*[TR.]
Processing continues if possible,
on the grounds that output useful for debugging may be produced.
If a serious error occurs, processing terminates,
and an appropriate message is printed,
along with a list of the macro names currently active.
Examples are the inability to create, read, or write files,
and the exceeding of certain internal limits that
make future output unlikely to be useful.
.sc
Debugging.
Strings, macros, and number registers
can be \fIwatched\fR.
Whenever a change of a watched object occurs,
or when the object is renamed, removed, or aliased,
a notification message is printed.
It is formatted like an error message
and includes the name of the current (or last previous) request,
the name of the objects affected,
and, in case of a change,
the new contents of the object.
.pg
When an object is removed,
watching is disabled.
If an object of the same name is created later,
it is not watched
unless watching is explicitly enabled for it again.
.h1
.bta warn
\fB&warn\fI|\(+-bits\(or\^name\fR	\fIw\fR	\(en	Control warning messages,
which may be given either numerically
as bits or symbolically as names.
With a \fB+\fR sign, the respective bit or name is enabled in
addition to the currently enabled categories;
with a \fB\-\fR sign, it is disabled.
Omitting the sign sets the categories exactly to
the given bit or name.
\fB&warn 0\fR disables all warnings.
The \A'n_.warn'\fB.warn\fR register represents
the currently activated warning categories
as bits.
.bta spreadwarn
\fB&spreadwarn\fI|N\fR	toggle	\fBm\fR	Set or toggle a limit that causes a warning to be printed when
it is exceeded by the adjustment that is computed for the current
output line in \fBad\ b\fR mode.
The limit is initially 3\|m, but the
warning message is disabled.
Calling this request without an
argument toggles the warning message; calling it with an argument
enables the warning and sets the limit to \fIN\fR (default scale m).
.bta errprint
\fB&errprint\fI|string\fR	newline	\(en	Print \fIstring\fR like an error message.
.bta watch
\fB&watch\fI|xx\fR	off	ignore	\(en	Notify on change of string or macro \fIxx\fR.
If \fIxx\fR does not exist,
it is created as an empty macro
in order to watch future changes.
.bta unwatch
\fB&unwatch\fI|xx\fR	off	ignore	\(en	Disable notification for string or macro \fIxx\fR.
.bta watchlength
\fB&watchlength\fI|N\fR	ignore	\(en	On change, report
the contents of macros and strings up to length \fIN\fR.
When \fIN\fR is zero or small,
printing of macro and string contents is disabled.
.bta watchn
\fB&watchn\fI|R\fR	off	ignore	\(en	Notify on change of register \fIR\fR.
If \fIR\fR does not exist,
it is created in order to watch future changes.
No effect on read-only registers
and some of the predefined general registers.
.bta unwatchn
\fB&unwatchn\fI|R\fR	off	ignore	\(en	Disable notification for register \fIR\fR.
.pg
.mha s_color
Color Support
.\" This chapter partially derived from
.\" Plan 9 v4 /sys/src/cmd/postscript/mcolor/mcolor.5
.\" Copyright (C) 2003, Lucent Technologies Inc. and others.
.\" All Rights Reserved.
.pg
While \*(TR does not support colors directly,
\fIdpost\fR is able to embed arbitrary \*(PS color instructions
using the \fB\eX\'SetColor: \fIcolor\fB\'\fR escape sequence.
Possible values for \fIcolor\fR include:
.xx
.nr w \w'\(en\ '
.in +\nwu
.ti -\nwu
\(en\ ``\fInamed-color\fR'',
e.g. ``red''.
Named colors (\s-1RGB\s+1 only) must be listed in the
``colordict''
dictionary in file
\fB/usr/ucblib/doctools/font/devps/postscript/color.ps\fR.
Every \fIcolor\fR argument that begins with a letter
is treated as a named color.
.xx
.ti -\nwu
\(en\ ``\fIred green blue \fBrgb\fR'',
e.g. ``.2 .3 .4 rgb''
(\fBrgb\fR is an abbreviation for the \*(PS \fBsetrgbcolor\fR operator)
.xx
.ti -\nwu
\(en\ ``\fIhue saturation brightness \fBhsb\fR'',
e.g. ``.5 .6 .7 hsb''
(\fBhsb\fR is an abbreviation for the \*(PS \fBsethsbcolor\fR operator)
.xx
.ti -\nwu
\(en\ ``\fIcyan magenta yellow black \fBcmyk\fR'',
e.g. ``.1 .2 .3 .4 cmyk''
(\fBcmyk\fR is an abbreviation for the \*(PS \fBsetcmykcolor\fR operator)
.xx
.ti -\nwu
\(en\ ``\fIgray \fBsetgray\fR'',
e.g. ``.5 setgray''
.xx
.ti -\nwu
\(en\ ``[\fB$\fIsetcolorspace\fR] \fIcomp1 comp2 .\|.\|. compn \fBsetcolor\fR'',
where \fB$\fIsetcolorspace\fR may be a \*(PS procedure
defined in the setup section using a 
`\eX\'PSSetup: $setcolorspace {.\|.\|.} bind def\''
escape sequence.
This parameter is required if the color space changes
in the document.
Otherwise, it may be sufficient
to install the color space once in the setup section.
.pg
Each parameter must be a number in the range between 0.0 and 1.0.
In the most general case, the value of the
.I color
argument is passed to the \*(PS output without interpretation.
.pg
Both the text and background color can be selected.
A
.I color
argument of ``\fIcolor1\fR'' \fBon\fR ``\fIcolor2\fR''
prints text in
.I color1
on a background in
.I color2.
.pg
The initial color is black in the \fIDeviceGray\fR color space,
i.e. the same as ``0 setgray''.
Once a color is in effect,
it is re-installed at the top of each output page.
.pg
The \fB\-mcolor\fR macro package
adds another access method to
the capabilities of color selection
and reverse video printing.
It includes the following macro:
.h1
.bta CL
\fB&CL\fI|color|text\fR	\s-1RGB\s+1|black	\(en	Print \fItext\fR in \fIcolor\fR.
No arguments restores a default color
(black in \s-1RGB\s+1 color space;
note that this is different from the initial color).
If
.I text
is omitted the selected
.I color
remains in effect until another
.I color
is selected.
If two arguments are given the
.I text
is printed in
.I color
and then the default color is restored.
.pg
.mha s_pics
Picture Inclusion
.\" This chapter partially derived from
.\" Plan 9 v4 /sys/man/6/mpictures
.\" Copyright (C) 2003, Lucent Technologies Inc. and others.
.\" All Rights Reserved.
.pg
\fIdpost\fR can be advised to include
other \*(PS documents into the output it generates.
In general, these documents should be \s-1EPS\s+1
(Encapsulated \*(PS) files;
inclusion of more general \*(PS documents,
especially if they consist of multiple pages,
will usually not lead to acceptable results.
.pg
If a \*(PS file lacks page-delimiting comments,
the entire file is included.
If no
.B %%BoundingBox
or
.B %%HiResBoundingBox
comment is present, the picture is
assumed to fill an 8.5\(mu11-inch page.
Nothing prevents the picture from being placed off the page.
.pg
\fIdpost\fR handles \s-1DSC\s+1 font comments
in the included files,
but it can only supply glyph data
if a path to the respective font file
has previously been specified
with a \*(TR \T'fp'\fBfp\fR\T request.
It is not necessary that the font is otherwise used
in the \*(TR input text.
If \fIdpost\fR cannot retrieve a matching font by this mechanism,
it indicates this in the \%\fB%%DocumentNeededResources\fR comment
so that a print manager at a later production stage
may include the missing data.
.pg
.nr nosave 1
.ne 9
An example how to combine the following requests and macros is:
.x1
.ft B
&psbb picture.eps
&nrf scale .25
&nrf y (\en[ury]p\-\en[lly]p)*\en[scale]
&nrf x (\en[urx]p\-\en[llx]p)*\en[scale]
&PI picture.eps "\enyu,\enxu"
&sp \enyu
picture description
.ft R
.x2
.nr nosave 0
.pg
\*(TR includes a request to assist the inclusion of \s-1EPS\s+1 files:
.h1
.bta psbb
\fB&psbb\fI|filename\fR	\(en	\(en	\
Read the \fB%%HiResBoundingBox\fR \s-1DSC\s+1 comment,
or, if no such comment is found, \fB%%BoundingBox\fR,
from the \*(PS document \fIfilename\fR
and assign
the lower left \fIx\fR coordinate to the floating-point register \fBllx\fR,
the lower left \fIy\fR coordinate to \fBlly\fR,
the upper right \fIx\fR coordinate to \fBurx\fR,
and the upper right \fIy\fR coordinate to \fBury\fR.
All values are in points.
If an error occurs, the registers are set to zero.
.br
.nr nosave 1
.ne 6
.nr nosave 0
.pg
The \fB\-mpictures\fR macros insert the necessary
advices to \fIdpost\fR
to include \*(PS pictures into \*(TR documents.
The macros are:
.h1
.bta BP
\fB&BP\fI|source|height|width|position|offset|flags|label\fR	Define a frame and place a picture in it.
The arguments are:
.nr Ind \n(.i
.de Arg
.xx
.ie \\n(.$=0 .nr Argx 1
.el .nr Argx \\$1
.nr Argy \\n[Argx]-1
.in \\n[Ind]u+\\n[Argx]m
.ti \\n[Ind]u+\\n[Argy]m
..
.Arg
.I source
Name of a \*(PS picture file, optionally
suffixed with (\fIn\fR)
to select page number
.I n
from the file (first page by default).
.Arg
.I height
Vertical size of the frame, default \fB3.0i\fR.
This argument is interpreted as a value in inches
unless it ends with a \fBu\fR scale indicator.
.Arg
.I width
Horizontal size of the frame, current line length by default.
This argument is interpreted as a value in inches
unless it ends with a \fBu\fR scale indicator.
.Arg
.I position
\fBl\fR (default), \fBc\fR, or \fBr\fR
to left-justify, center, or right-justify the frame.
.Arg
.I offset
Move the frame horizontally from the original
.I position
by this amount, default \fB0i\fR.
.br
.ne 2
.Arg
.I flags
One or more of:
.Arg 2
\fBa \fId\fR
Rotate the picture clockwise
.I d
degrees, default \fId\fR =90.
.Arg 2
.B o
Outline the picture with a box.
.Arg 2
.B s
Freely scale both picture dimensions. 
.Arg 2
.B w
White out the area to be occupied by the picture.
.Arg 2
\fBl\fR, \fBr\fR, \fBt\fR, \fBb\fR
Attach the picture to the left right, top, or bottom of the frame.
.Arg
.I label
Place
.I label
at distance
.B 1.5v
below the frame.
.in \n[Ind]u
.xx
If there is room,
.B BP
fills text around the frame.
Everything destined for either side of the frame
goes into a \T'c_diversion'diversion\T to be retrieved when the accumulated
text sweeps past the trap set by
.B BP
or when the \T'c_diversion'diversion\T is explicitly closed
by \fBEP\fR.
.xx
\fBBP\fR is not recommended for text filling
in \T'ad_p'\fBad\ p\fR\T mode
since its trap-based mechanism
may result in less optimal output,
and since it is not possible
to define the shape of a complete paragraph
with the information it has.
Use a combination of
\T'psbb'\fBpsbb\fR\T,
\T'pshape'\fBpshape\fR\T,
and \T'PI'\fBPI\fR\T instead.
.bta EP
\fB&EP\fR	\(en	\(en	\(en	End a picture started by \fBBP\fR;
\fBEP\fR is usually called implicitly by a trap
at frame bottom.
A picture and associated text silently disappear if
a diversion trap set by
.B BP
is not reached.
Call
.B EP
at the end of the document to retrieve it.
.bta PI
\fB&PI\fI|source|height\fB,\fIwidth\fB,\fIyoffset\fB,\fIxoffset|flags\fR	This low-level macro, used by \fBBP\fR,
can help do more complex things.
The two arguments not already described are:
.Arg
.I xoffset
Offset the frame from the left margin by this amount, default
\fB0i\fR.
This argument is interpreted as a value in inches
unless it ends with a \fBu\fR scale indicator.
.Arg
.I yoffset
Offset the frame from the current baseline,
measuring positive downward, default \fB0i\fR.
This argument is interpreted as a value in inches
unless it ends with a \fBu\fR scale indicator.
.in \n[Ind]u
.mha s_pdf
Special Features for \*[PDF] Documents
.pg
.sc
The basics.
\*(TR does not directly generate \*[PDF] documents;
the \fIdpost\fR postprocessor generates \*(PS output
which can be converted to \*[PDF] by
utilities like Ghostscript's \fIps2pdf\fR or Adobe Distiller.
But it is possible to include special advices
to this conversion program in \*(PS
using the \fBpdfmark\fR operator.
Such advices are generated automatically by some \*(TR requests,
e.g. by \T'cropat'\fBcropat\fR\T \T's_page'(\(sc3).\T
Other advices can be given explicitly using the
\fB\eX\'PS:\fR...\fB\'\fR
or
\fB\eX\'PDFMark:\fR...\fB\'\fR
escape sequences.
.pg
.sc
Preparations.
When generating PDF files,
it is especially important to set the paper format
using the \T'mediasize'\fBmediasize\fR\T request \T's_page'(\(sc3).\T
This is because calculations in \*[PDF] documents
are generally performed in relation regard to the page bottom,
while \*(TR performs its calculations in relation to the page top.
Failing to set the paper format correctly
will thus usually result in vertical displacements
of \*[PDF]-specific elements.
.pg
.sc
\A'c_pdfdescr'Specifying document description items.
PDF documents can include meta-data about author, title etc.
To generate such data,
use the \fBPDFMark\fR device command of \fIdpost\fR
with the \*(TR \T'e_X'\fB\eX\fR escape sequence\T, e.g.\&
.x1
.ne 2
\fB\eX\'PDFMark: Author \fIMy Name\fB\'
\fB\eX\'PDFMark: Keywords \fITypesetting, PDF documents\fB\'
\fB\eX\'PDFMark: Subject \fItroff, dpost, and pdfmark\fB\'
\fB\eX\'PDFMark: Title \fISpecial features for PDF documents\fB\'
\fB&br\fR
.x2
.xx
Unicode characters are accepted in these text strings.
Note that whitespace and newlines surrounding \fB\eX\fR escape sequences
are considered to be input text by \*[TR,]
and need a \fIbreak\fR before they are output.
To avoid inserting superfluous spaces or line breaks,
specify this information before an initial
\fB&sp \(or\en[topmargin]u\fR request or the like in the document.
.pg
.sc
Direct use of the pdfmark operator.
In cases where \*(TR or \fIdpost\fR do not
include an explicit mechanism for \*[PDF] features,
it is possible to call the \fBpdfmark\fR operator directly.
Examples are:
.xx
.in +2m
.ti -2m
.ne 2
.nr nosave 1
\fB\eX\'PS: [ {Catalog} << /ViewerPreferences << /DisplayDocTitle true >> >> /PUT pdfmark\e'\fR
.br
.nr nosave 0
This causes the \*[PDF] viewer to print the document title
\T'c_pdfdescr'(as in \(sc24.3)\T in the application title bar
instead of the \*[PDF] file name.
.xx
.ti -2m
.nr nosave 1
.ne 2
\fB\eX\'PS: [ /PageMode /UseOutlines /DOCVIEW pdfmark\'\fR
.br
.nr nosave 0
This causes the \*[PDF] viewer to display the bookmarks toolbar
when the document is opened.
Other interesting values are
\fB/UseNone\fR (the default),
\fB/UseThumbs\fR (display page thumbnails),
and \fB/FullScreen\fR (open the document in full-screen mode).
.xx
.ti -2m
.nr nosave 1
.ne 2
\fB\eX\'PS: [ /PageMode /Page \fIN\fB /View [/XYZ null null null] /DOCVIEW pdfmark\'\fR
.br
.nr nosave 0
Page \fIN\fR is displayed instead of the first page
when the document is opened.
.xx
.ti -2m
.nr nosave 1
.ne 2
\fB\eX\'PS: [ {Catalog} << /PageLayout /TwoPageRight >> /PUT pdfmark\'\fR
.br
.nr nosave 0
With this command,
the \*[PDF] viewer displays two pages at once.
Other interesting values are
\fB/SinglePage\fR (display one page at once),
\fB/OneColumn\fR (display one page in continuous mode),
and
\fB/TwoColumnRight\fR (display two pages in continuous mode).
.xx
.ti -2m
.nr nosave 1
\fB\eX\'PS: [ /Label (\fItext\fB) /PAGELABEL pdfmark\'\fR
.br
.nr nosave 0
The given \s-1ASCII\s+1 \fItext\fR is shown next to the page number
of the current page
in the \*[PDF] viewer toolbar.
This is particularly useful to implement roman page numbers
in \*[PDF] documents
in combination with the \T'af'\fBaf\fR\T request.
.in -2m
.pg
.sc
Creating bookmarks.
Bookmarks are usually shown by the \*[PDF] viewer at the left of the
window.
When you create \*[PDF] files longer than a few pages for viewing
on the screen, you should include bookmarks for each chapter or section
because they enable the reader to navigate much more conveniently.
.pg
Start with a bookmark for the title page.
``0'' is the level of the bookmark in the tree structure,
and the following arguments form the name of the bookmark:
\fB\eX\'PDFMark: Bookmark \fI0 Title\fB\'\fR.
Similar to the description specifications above, this bookmark should
appear before the top margin of the title page.
.pg
When generating bookmarks for chapters and sections, it is usually most
practical to include the command in the chapter/section macros:
.x1
.ft B
&de CH
&	bp
\ev\'\(or\-1v\-4p\'\e\eX\'PDFMark: Bookmark 0 \e\e$1\'
&	sp \(or\e\en[topmargin]u
&	ce
&	sp
&.
&de SH
&	ce
\e\e$1\ev\'\-1v\'\e\eX\'PDFMark: Bookmark 1 \e\e$1\'
&	sp
&.
.ft R
.x2
Unless the bookmark command occurs at the top of the page,
it refers to the baseline of the text;
this is why a \fB\ev\'\-1v\'\fR command occurs
before it in the section macro.
\fB\ev\'\-1v\-4p\'\fR at the top of the page
is a special value that causes the upper left corner to be shown.
.pg
The level of the first bookmark in a document must be of level 0.
The levels of following bookmarks must be either
.xx
.nr w \w'\(en\ '
.in +\nwu
.ti -\nwu
\(en\ one higher than the level of the previous bookmark.
The new bookmark then becomes a child of the previous bookmark.
.xx
.ti -\nwu
\(en\ equal to the level of the previous bookmark.
In this case, both bookmarks are grouped
below the first previous bookmark of the first higher level,
or at the top level for level 0.
.xx
.ti -\nwu
\(en\ lower than the level of the previous bookmark.
This terminates the list of children of the higher levels.
.in -\nwu
.pg
As an example, the following level structure is legal, and causes the
PDF viewer to group the bookmarks as shown:
.xx
.nf
.lc \-
.ta 1i 1i+3m 1i+6m 1i+9m
	 0			title page
	 0			Chapter 1
	 \(bu1		Section 1.1
	 \(bu1		Section 1.2
	 \(or	\(bu2	Subsection 1.2.1
	 \(or	\(bu2	Subsection 1.2.2
	 \(or	\(bu2	Subsection 1.2.3
	 \(bu1		Section 1.3
	 	\(bu2	Subsection 1.3.1
	 	\(bu2	Subsection 1.3.2
	 0			Chapter 2
	 \(bu1		Section 2.1
	 0			Index
.fi
.pg
In case of an illegal structure in which the level of a bookmark is
raised by more than one above its predecessor,
\fIdpost\fR emits a warning and assigns the highest legal level.
However, a garbled document structure may result:
.xx
.nf
	 0
	 \(bu2		\(lh the first level 2 is corrected to 1 by \fIdpost\fR
	 	\(bu2	so the second bookmark becomes a child of the first
.fi
.xx
.lc
Thus such \fIdpost\fR warnings should usually be taken seriously, and the
document should be corrected.
.pg
An alternate form of bookmarks,
\fB\eX\'PDFMark: BookmarkClosed \fR...\fB\'\fR,
is available.
The syntax is the same,
but the initial view in the tree structure is collapsed,
i.e. no children are shown by default.
It the bookmark has no children,
there is no difference to a regular bookmark.
.sc
Links.
\*[PDF] documents can contain links
that cause the viewer to jump to a certain location
when the user clicks on an area of the page,
as well as links to external documents in URI form.
In \*[TR,] such links can be built as follows:
.pg
The \A'e_A'\fB\eA\fI\'string\'\fR escape sequence defines an anchor,
i.e. a location to jump to,
with the name \fIstring\fR
(consisting of \s-1ASCII\s0 characters).
.pg
The actual link is built using two \A'e_T'\fB\eT\fR escape
sequences surrounding the text that forms the area to click on,
e.g.: \fB\eT\fI\'string\'text of link\fB\eT\fR.
\fIstring\fR must correspond to an anchor
anywhere in the document.
.pg
An URI link is built likewise using two \A'e_W'\fB\eW\fR escape sequences:
\fB\eW\fI\'uri\'text of link\fB\eW\fR.
The \fIuri\fR part is not interpreted by \*(TR,
but just written to the generated output.
Typically, this will be a link to a web page,
as in
<\W'http://n-t-roff.github.io/heirloom/doctools.html'\eW'http://n-t-roff.github.io/heirloom/doctools.html'http://n-t-roff.github.io/heirloom/\:doctools.html\eW\W>.
.pg
The appearance of links can be changed;
links are normally surrounded by an 1 point wide blue border.
The color can be set using
\fB\eX'SetLinkColor: \fIred green blue\fB'\fR,
where \fIred, green, and blue\fR are values between 0 and 1.
The border can be set using
\fB\eX'SetLinkBorder: \fIbx by width\fB'\fR,
where \fIbx\fR and \fIby\fR define the horizontal
and vertical corner radius, respectively,
and \fIwidth\fR defines the width.
.pg
The border style can be changed with the
\fB\eX\(aqSetBorderStyle: \fIarguments\fB\(aq\fR command.
The \fIarguments\fR are the same
as for the \fB/BS\fR pdfmark operator
or the \*[LaTeX] \fBhyperref pdfborderstyle={}\fR variable.
.pg
Likewise,
\fBSetULinkColor\fR, \fBSetULinkBorder\fR, and \fBSetUBorderStyle\fR
are available for URI links.
.pg
E.\^g. for this document the commands
.x1
.ft B
\eX\(aqSetBorderStyle: /S/U/W 0.1\(aq
\eX\(aqSetUBorderStyle: /S/U/W 0.1\(aq
.ft R
.x2
are used.
.\"""
.pg
.mha s_groff
\f(BIgroff\fP Compatibility
.pg
Heirloom \*(TR provides most of the extensions
to the \*(TR language introduced in \*(GR\|\T'ref_10'\*u10\*d\T.
Consequently, it is possible
to create documents, macro sets, and preprocessors
that can be used with both
Heirloom \*(TR and \*[GR]
and use functionality beyond the features
that were supported by traditional \*[TR.]
.pg
Important differences to \*(GR are:
The concept of an \fIinput level\fR
regarding delimiters in escape sequences
and macro arguments is not supported.
Control characters are recognized
at the beginning of a line
even if preceded by escape sequences
that do not result in formatting stream objects,
such as \T'e_f'\fB\ef\fR\T, \T'e_s'\fB\es\fR\T, or \T'e_;'\fB\e;\fR\T.
\T's_font'Font handling\T,
\T's_color'color support\T,
\T's_pics'picture inclusion\T,
and
\T's_pdf'\*[PDF] structuring\T
are realized using different mechanisms.
The \fIdpost\fR post-processor does not recognize
the \fB\eX\'ps:\fR...\fB\'\fR escape sequence
(or \fBx\ X\ ps:\fR command, respectively)
that is used for pass-through \*(PS
with the \fIgrops\fR post-processor of \*(GR
\T'x_X_PS'(\fIdpost\fR accepts \fB\eX'PS:\fR...\fB\'\fR and \fBx\ X\ PS:\fR);\T
the \*(PS output generated by \fIdpost\fR is very different
to that generated by \fIgrops.\fR
\fIdpost\fR accepts the \*(GR drawing command extensions
and sets the horizontal and vertical positions accordingly,
but otherwise ignores line width, color, and fill specifications.
.br
.nr nosave 1
.ne 6
.nr nosave 0
.sc
Conditional groff compatibility.
A request is available to control additional
functions for \*(GR compatibility:
.xx
.h1
.bta cp
\fB&cp\fI|N\fR	off	\(en	\(en	Enable \*(GR compatibility mode.
This is the name of \*(GR\fI's\fR own compatibility request
with adapted semantics:
Regardless of the argument,
\*(GR compatibility mode is activated.
If \fIN\fR=0, compatibility with traditional \*(TR is decreased,
and Heirloom \*(TR \T'c_extension'extension level 3\T is set.
If \fIN\fR\(!=0 or missing,
compatibility with traditional \*(TR is improved,
and Heirloom \*(TR \T'c_extension'extension level 1\T is set.
Thus \fB&cp\ 0\fR results in maximum \*(GR compatibility.
.pg
The \fBcp\fR request sets the general number register \A'n_.g'\fB&g\fR
to 1 in \*(GR compatibility mode and to 0 otherwise.
The general number register \A'n_.C'\fB&C\fR
is only assigned by the \fB&cp\fR request
and corresponds to its argument.
.pg
Any use of the \T'xflag'\fBxflag\fR request\T disables \*(GR compatibility
and accordingly sets the \fB&g\fR register to 0.
.pg
The \T'n_.X'\fB&X\fR read-only number register\T holds
the current extension level after \fBcp\fR as usual.
It can thus be used
to determine whether running under \*(GR
or in the \*(GR compatibility mode of Heirloom \*[TR.]
Since they are read-write,
any convenient value can then be assigned
to the \fB&C\fR and \fB&g\fR registers.
.pg
Nevertheless it is not recommend to do so
without reason.
For instance macro packages read \en(.g to test
if they are processed with groff.
Setting \fB&g\fR to \fB1\fR with the \fB&nr\fR request
also has some side effects in Heirloom \*(TR:
.de ListBegin
.	sp .25
.	in +4n
..
.de ListItem
.	sp .25
.	ti -2n
.	nop \(bu\h'|2n'\c
..
.de ListEnd
.	in -4n
.	sp .5
.	ns
..
.ListBegin
.tr &&
.ListItem
\fIgroff\fR\^'s notation for accessing symbols with
\fB\e[char\fIn\fB]\fR and \fB\e[u\fIXXXX\fB]\fR
are enabled.
.ListItem
The escape \fB\e%\fR marks optional hyphenation points
inside a word or suppresses hyphenation prefixed to a word
(\fIeven when this word containes dashes\fR).
A problem in macro packages is that it cannot be guaranteed
that no character is before word (e.\^g. quotes or parentheses).
\*(GR allows to force that \fB\e%\fR acts as a hyphenation
suppression escape when it follows the zero-width characters
\fB\e)\fR or \fB\e&\fR.
This does not work with traditional \*(TR, unfortunately.
The command \fB.nr\|\^.g\|\|1\fR enables the \*(GR behaviour.
.ListItem
The algorithm \*(GR uses for the three part title request \fB.tl\fR
leads to a different placement of the middle title element
with \*(NR under certain conditions.
This is emulated by setting \fB.g\fR to 1.
.ListItem
\fIgroff\fR\^'s left italic correction escape \fB\e,\fR is removed
from the input instead of producing a \(oq\fB,\fR\(cq.
.ListEnd
.tr &.
.pg
The \T'n_.x'\fB&x\fR\T and \T'n_.y'\fB&y\fR\T registers
are read-write in \*(GR compatibility mode;
they correspond to the emulated \*(GR version number.
The \fBcp\fR request sets them to 1 and 18, respectively.
.pg
The \T'n_.k'\fB&k\fR number register\T behaves differently
in \*(GR compatibility mode:
If the preceding text character was a newline,
the width of a space character is added to the value.
If the previous line was \T'c_intr'interrupted\T with \T'e_c'\fB\ec\fR\T,
the length of the partially collected word
(as in the \T'n_.kc'\fB&kc\fR\T number register)
is part of the value.
.pg
The space width always defaults to the value
obtained from the font metrics file
in \*(GR compatibility mode;
the \T'spacewidth'\fBspacewidth\fR\T request is not effective.
.pg
If the file specified with a \T'so'\fBso\fR\T request
cannot be opened,
processing continues with the current file
in \*(GR compatibility mode.
.pg
A control or escape character written in a diversion
has no special meaning
if the diversion is re-read in \*(GR compatibility mode.
.pg
Unless a string is interpolated with explicit arguments,
the arguments to the surrounding macro instance remain visible
and can be referenced by the \T'e_$'\fB\e$\fR\T escape sequence
inside the string in \*(GR compatibility mode.
.pg
Any call to the \fBcp\fR request
activates the following \*(GR compatibility escape sequences;
any call to the \T'xflag'\fBxflag\fR\T request disables them.
.pg
The \fB\eA\fI'string'\fR escape sequence
checks whether \fIstring\fR is acceptable as the name
of a string, macro, number register, or font,
and evaluates to ``1' if it does and to ``0'' otherwise.
The Heirloom \*(TR anchoring escape sequence
\T'e_A'\fB\eA\fR\T is not available in \*(GR compatibility mode.
.pg
The \A'e_/'\fB\e/\fR escape sequence inserts an italic correction,
i.e. a small piece of horizontal motion
(1/12\|em) that should be sufficient
to separate an italic character from a following roman character.
Similarly, \A'e_,'\fB\e,\fR adds a left italic correction,
always a zero motion,
that should be sufficient
to separate a roman character
from an immediately following italic character.
Both exist to provide basic \*(GR compatibility only.
It is otherwise recommended that the \T'kernpair'\fBkernpair\fR\T request
is used for these purposes;
it allows a more exact optical separation
since the shape of both characters can be taken into account
and also does not need to be be positioned directly in the input text
at every occasion.
.pg
The \T's_graphics'\fB\eD\'p\fR|...\fB\'\fR polygon drawing escape sequence\T
is altered such that the path is always closed,
i.e. if the last line part does not return to the starting position,
an additional line is added that does.
.pg
The escape sequences
\fB\eF\fIx\fR, \fB\eF(\fIxx\fR, \fB\eF[\fIxxx\fB]\fR,
\fB\em\fIx\fR, \fB\em(\fIxx\fR, \fB\em[\fIxxx\fB]\fR,
\fB\eM\fIx\fR, \fB\eM(\fIxx\fR, \fB\eM[\fIxxx\fB]\fR,
are read but discarded in \*(GR compatibility mode
since the corresponding concepts of font families
and built-in color support are foreign to Heirloom \*[TR.]
All of them generate a \T's_warning'warning\T of the \fBescape\fR category.
.sc
groff compatibility macros.
As an additional aid in formatting documents
that had originally been written with \*(GR in mind,
Heirloom \*(TR provides the \fB\-mg\fR compatibility macro package.
Specifically:
.pg
\fB&cp\ 0\fR is executed, so
\*(TR is operated in \*(GR compatibility mode
at \T'c_extension'extension level\T 3.
.pg
The \T'p_locale'locale\T is set to \fBen_US\fR;
this assumes that input to \*(GR is conventionally
in the \s-1ISO-8859-1\s0 encoding.
.pg
The \T'hylang'hyphenation language\T is set to \fBen_US\fR.
Since both \*(GR and Heirloom \*(TR then
use the same hyphenation algorithm and patterns
derived from \fIT\h'-.1n'\v'.5n'E\v'-.5n'X,\fR
it can be assumed that words are subject
to hyphenation at the same points.
.pg
The \fBde1\fR, \fBam1\fR, \fBds1\fR, and \fBas1\fR \*(GR requests
are emulated using
\T'de'\fBde\fR\T,
\T'am'\fBam\fR\T,
\T'ds'\fBds\fR\T,
and
\T'as'\fBas\fR\T,
respectively.
It is not expected that the \*(GR compatibility macros
are used to format documents
that require compatibility with traditional \*[TR.]
.pg
.nr nosave 1
The \T'ftr'\fBftr\fR\T request is removed
since the \*(GR request with the same name
provides completely different semantics.
.br
.nr nosave 0
.pg
\T'fallback'\fBfallback\fR\T is used to emulate \fBfspecial\fR;
these requests should be compatible.
No emulation is provided for the \fBspecial\fR request;
all other fonts are searched for missing characters
in Heirloom \*(TR by default.
.pg
\T'track'\fBtrack\fR\T is used to emulate \fBtkf\fR.
These requests are not completely compatible:
\T'track'\fBtrack\fR\T does not affect the last character on a line
and thus does not alter the visual length of lines like \fBtkf\fR does;
\T'track'\fBtrack\fR\T is applied when formatting an object
defined with the \T'char'\fBchar\fR request\T;
\T'track'\fBtrack\fR\T needs to remain in effect
until all affected characters have been physically output.
Nevertheless, the replacement should suffice for most applications.
.pg
\*(GR characters with two-character names
are mapped to \*(PS character names
using the \T'char'\fBchar\fR\T request.
.pg
The following macro is also provided
as an emulation for the corresponding \*(GR request:
.xx
.h1
.bta mso
\fB&mso\fI|name\fR	\(en	ignored	\(en	Include the macro package \fIname\fR.
If the environment variable \fB\s-1GROFF_TMAC_PATH\s+1\fR is set,
each of the colon-separated directories in it
is checked for the files \fIname\fR, \fIname\fR.tmac,
m\fIname\fR.tmac, and tmac.\fIname\fR.
After this, the standard \*(TR macro directories
are checked in the same way.
Once a file has been found,
it is read in as with the \T'so'\fBso\fR\T request,
and the search stops.
.mha s_output
Output Language.
.pg
\*(TR
produces its output in a language that is independent of any
specific output device,
except that the numbers in it have been computed on the basis
of the resolution of the device,
and the sizes, fonts, and characters that that device can print.
Nevertheless it is quite possible to interpret that output
on a different device, within the latter's capabilities.
.de tb
.xx
.nr nosave 1
.ne 3v
.nf
.in .5i
..
.tb
.ta .8i
\fBs\^\fIn\fR	set point size to \fIn\fR, fractional parts (if any) ignored
\fBs\-23\^\fId.d\fR	set point size to \fId.d\fR
\fBf\^\fIn\fR	set font to \fIn\fR
\fBc\^\fIc\fR	print character \fIc\fR
\fBC\^\fIname\fR	print the character called \fIname\fR; terminate \fIname\fR by white space
\fBCPS\^\fIname\fR	print the character with the given \*(PS \fIname\fR
\fBN\^\fIn\fR	print character \fIn\fR on current font
\fBH\^\fIn\fR	go to absolute horizontal position \fIn\fP (\fIn\fR\(>=0)
\fBV\^\fIn\fR	go to absolute vertical position \fIn\fP (\fIn\fR\(>=0, down is positive)
\fBh\^\fIn\fR	go \fIn\fP units horizontally; \fIn\fR<0 is to the left
\fBv\^\fIn\fR	go \fIn\fP units vertically; \fIn\fR<0 is up
\fInnc\fR	move right \fInn\fP, then print \s-1ASCII\s0 character \fIc\fP;  \fInn\fP must be exactly 2 digits
\fBp\^\fIn\fR	new page \fIn\fP begins\(emset vertical position to 0
\fBn\^\fIb a\fR	end of line (information only\(emno action);  \fIb\fP = space before line, \fIa\fP = after
\fBw\fR	paddable word space (information only\(emno action)
\fBD\^\fIc ...\en\fR	graphics function \fIc\fR; see below
.nr nosave 0
\fBx ...\en\fR	device control functions; see below
\fB# ...\en\fR	comment
.pg
All position values are in units.
Sequences that end in digits must be followed by a non-digit.
Blanks, tabs and newlines may occur as separators
in the input, and are mandatory to separate constructions
that would otherwise be confused.
Graphics functions, device control functions, and comments extend to the
end of the line they occur on.
.br
.nr nosave 1
.ne 6
.nr nosave 0
.pg
The device control and graphics commands are intended as open-ended
families, to be expanded as needed.
The graphics functions coincide directly with the \T'e_D'\fB\eD\fR\T
sequences:
.tb
.ta 1.2i
\fBD\^l \fIdh dv	\fRdraw line from current position by \fIdh,\|dv\fR
\fBD\^p \fIa b c d ...	\fRdraw polygon, i.e. a line to \fIa,\|b\fR, then to \fIc,\|d\fR, then ...
\fBD\^c \fId	\fRdraw circle of diameter \fId\fR with left side at current position
\fBD\^e \fIu v	\fRdraw ellipse of diameters \fIu\fP and \fIv\fP
\fBD\^a \fIa b c d\fB	\fRdraw arc from current position to \fIa\fR+\fIc\fR,\|\fIb\fR+\fId\fR, \fRwith center at \fIa\fR,\|\fIb\fR from current position
.nr nosave 0
\fBD\^\(ap \fIa b c d...\fB	\fRdraw B-spline from current position by \fIa\fR,\|\fIb\fR, \fRthen by \fIc\fR,\|\fId\fR, then by \fIc\fR,\|\fId\fR, then ...
\fBD\^z \fIa b c d...\fB	\fRfor any other \fIz\fR is uninterpreted
.pg
In all of these, \fIx,\|y\fR is an increment on the current horizontal and
vertical position,
with down and right positive.
All distances and dimensions are in units.
.br
.nr nosave 1
.ne 5
.nr nosave 0
.pg
The device control functions begin with \fBx\fP,
then a command, then other parameters.
.tb
.ta 1.5i 1.5i+1m
\fBx T \fIs\fP	\fRname of typesetter is \fIs\fR
.nr nosave 0
\fBx r \fIn h v\fP	\fRresolution is \fIn\fR units/inch;
		\fIh\fR = minimum horizontal motion, \fIv\fR =\
 minimum vertical motion
.nr nosave 1
\fBx i	\fRinitialize\fP
\fBx f \fIn s\fP	\fRmount font \fIs\fR on font position \fIn\fR
\fBx f \fIn s filename flags\fR	\fIfilename\fR contains metrics for font \fIs\fR on position \fIn\fR using \fIflags\fR
\fBx p	\fRpause\(emcan restart
\fBx s	\fRstop\(emdone forever
\fBx t	\fRgenerate trailer information, if any
\fBx H \fIn\fP	\fRset character height to \fIn\fR, fractional parts (if any) ignored
\fBx H \-23 \fId.d\fR	set character height to \fId.d\fR
\fBx S \fIn\fP	\fRset slant to \fIn\fR
\fBx X \fIany\fP	\fRgenerated by the \T'e_X'\fB\eX\fR\T and \T'e_Y'\fB\eY\fR functions\T
\fBx X Anchor \fIy,x id\fR	specify PDF link anchor \
(generated by the \fB\eA\fR request)
\fBx X Anchor \fIid\fR	specify HTML link anchor
\fBx X BleedAt \fIL T W H\fR	generated by the \T'bleedat'\fBbleedat\fR request\T
\fBx X CropAt \fIL T W H\fR	generated by the \T'cropat'\fBcropat\fR request\T
\fBx X HorScale \fIpercent\fR	scale letters horizontally by \fIpercent\fR (with the \T'letadj'\fBletadj\fR\T request)
\fBx X LC_CTYPE \fIname\fR	sets the \s-1LC_CTYPE\s+1 locale to \fIname\fR
\fBx X Link \fIx1\fR,\fIy1\fR,\fIx2\fR,\fIy2 id\fR	\
specify PDF link (generated by the \fB\eT\(aq\fIid\fB\(aq\fR request)
\fBx X Link \fIid\fR	begin HTML link (generates \fB<a href="\fIid\fB">\fR)
\fBx X Link\fR	end HTML link (generates \fB</a>\fR)
.ne 2
\fBx X PaperSize \fIW H n\fR	generated by the \T'mediasize'\fBmediasize\fR\T and \T'papersize'\fBpapersize\fR\T requests
		\fIn\fR is non-zero for \T'mediasize'\fBmediasize\fR\T
\A'x_X_PS'\fBx X PS \fIcommand\fR	embed \*(PS \fIcommand\fR
\fBx X PSSetup \fIcommand\fR	embed \*(PS \fIcommand\fR in global setup section
\fBx X SetColor \fIcolor\fR	change printing \fIcolor\fR
\fBx X SupplyFont \fIfont file\fR	supply data from \fIfile\fR for \*(PS \fIfont\fR
\fBx X Sync\fR	instructs to flush position and font information immediately
\fBx X Track \fIn\fR	gives a hint that following characters are tracked by \fIn\fR units
		interpretation is optional; following positions are not changed
.nr nosave 0
\fBx X TrimAt \fIL T W H\fR	generated by the \T'trimat'\fBtrimat\fR\T request
\fBx X ULink \fIx1\fR,\fIy1\fR,\fIx2\fR,\fIy2 URL\fR	\
specify PDF URL link (generated by the \fB\eW\(aq\fIid\fB\(aq\fR request)
\fBx X ULink \fIURL\fR	begin HTML URL link (generates \fB<a href="\fIURL\fB">\fR)
\fBx X ULink\fR	end HTML URL link (generates \fB</a>\fR)
\fBx \fIany\fP	\fRto be ignored if not recognized
.pg
Subcommands like ``i''
may be spelled out like ``init''.
.pg
The commands \fBx\ T\fR, \fBx\ r\fR\ ...\fR, and \fBx\ i\fR
fonts must be mounted before they can be used;
\fBx\ s\fR comes last.
There are no other order requirements.
.br
.nr nosave 1
.ne 5
.nr nosave 0
.pg
The following is the output from ``hello, world''
for a typical printer,
as described in \T's_device'\(sc27\T:
.tb
.ft CW
.ps -1
x T ps
x res 72000 1 1
x init
V0
p1
x font 1 R /usr/ucblib/doctools/font/devps/R.afm 4
x font 2 I /usr/ucblib/doctools/font/devps/I.afm 4
x font 3 B /usr/ucblib/doctools/font/devps/B.afm 4
x font 4 BI /usr/ucblib/doctools/font/devps/BI.afm 4
x font 5 CW /usr/ucblib/doctools/font/devps/CW.afm 4
x font 6 H /usr/ucblib/doctools/font/devps/H.afm 4
x font 7 HB /usr/ucblib/doctools/font/devps/HB.afm 4
x font 8 HX /usr/ucblib/doctools/font/devps/HX.afm 4
x font 9 S1 /usr/ucblib/doctools/font/devps/S1.afm 516
x font 10 S /usr/ucblib/doctools/font/devps/S.afm 1028
s10
f1
x X LC_CTYPE de_DE.utf8
H72000
V12000
ch
h5000ce
h4440cl
h2780cl
h2780co
h5000c,
wh5830cw
h7120co
h5000cr
h3330cl
h2780cd
n12000 0
x trailer
V792000
x stop
.ps
.ft R
.pg
\*(TR output is normally not redundant;
size and font changes and position information are not included
unless needed.
Nevertheless, each page is normally self-contained,
for the benefit of postprocessors
that re-order pages or process only a subset.
The \fBx X PSSetup\fR command is an exception from this rule;
it is included only once at the point where the corresponding
\T'e_X'\fB\eX\fI'\fBPSSetup:\fR\|...\fI'\fR escape sequence\T occurs.
.pg
.mha s_device
Device and Font Description Files
.pg
The parameters that describe a output device \fIname\fR
are read from the directory
\fB/usr/ucblib/doctools/font/dev\fIname\fR,
each time
\*(TR
is invoked.
The device name is provided by default,
by the environment variable \fB\s-1TYPESETTER\s+1\fR,
or by a command-line argument \fB\-T\fIname\fR.
The default device name is \fBps\fR,
for \*(PS output at a resolution of 72\|000\ dpi.
The pre-defined string \fB.T\fR
contains the name of the device.
The \fB\-F\fR
command-line option may be used to change the default directory.
.sc
Device description file.
General parameters of the device are stored, one per line, in
the file \fB/usr/ucblib/doctools/font/dev\fIname\^\fB/DESC\fR,
as a sequence of names and values.
\*(TR recognizes these parameters, and ignores any
others that may be present for specific drivers:
.tb
.ta 1i
\fBfonts \fIn F G H ... Z
\fBsizes \fIs t ... \fB0
\fBres \fIn\fR
\fBhor \fIn\fR
\fBvert \fIn\fR
\fBunitwidth \fIn\fR
.nr nosave 0
\fBcharset\fR
\fIlist of multi-character character names (optional)\fP
.pg
The F, G, ... are font names
to be initially mounted.
The list of sizes is a set of integers representing
some or all of the legal sizes the device can produce,
terminated by a zero.
The  \fBres\fR
parameter gives the resolution of the machine in units per inch;
\fBhor\fR and \fBver\fR
give the minimum number of units that can be moved
horizontally and vertically.
.pg
Character widths for each font are assumed to be given in machine units
at point size \fBunitwidth\fR.
(In other words, a character with a width of
\fIn\fR is \fIn\fR units wide at size \fBunitwidth\fR.)
All widths are integers at all sizes.
.pg
A list of valid character names may be introduced by \fBcharset\fR;
the list of names is optional.
.pg
A line whose first non-blank character is \fB#\fR is a comment.
Except that \fBcharset\fR
must occur last, parameters may appear in any order.
.br
.nr nosave 1
.ne 5
.nr nosave 0
.pg
Here is a subset of the \fB\s-1DESC\s+1\fR
file for a typical Postscript printer:
.tb
.ft CW
.ps -1
# Description file for Postscript printers.

fonts 10 R I B BI CW H HB HX S1 S
sizes 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
   24 25 26 27 28 29 30 31 32 33 34 35 36 38 40 44 48 54 60 72 0
anysize
allpunct
afmfonts
lc_ctype
res 72000
hor 1
vert 1
unitwidth 1
charset
hy ct fi fl ff Fi Fl dg em 14 34 12 en aa
ga ru sc dd -> br Sl ps cs cy as os =. ld
rd le ge pp -+ ob vr rs dq
sq bx ci fa te ** pl mi eq ~= *A *B *X *D
*E *F *G *Y *I *K *L *M *N *O *P *R *H *S *T *U *W
.nr nosave 0
*C *Q *Z ul rn *a *b *x *d *e *f *g *y *i *k
*l *m *n *o *p *h *r *s *t *u *w *c *q *z
.ps
.ft R
.sc
\A'c_fontdescr'Font description files.
Note: This description applies to the old
\*(TR device-independent font format.
The current version of \*(TR usually reads font metrics
directly from Type\ 1, OpenType, or TrueType font files,
as described for the \T'fp'\fBfp\fR\T request \T's_font'(\(sc2)\T
and in the separate fonts manual available from the project home page.
.pg
Each font is described by an analogous description file,
which begins with parameters of the font, one per line, followed by a
list of characters and widths.
The file for font \fIF\fR
is \fB/usr/ucblib/doctools/font/dev\fIname\^\fB/\fIF\fR.
.ta 1.7i
.tb
\fBname \fIstr\fR	name of font is \fIstr\fR
\fBligatures ... 0\fR	list of ligatures
\fBspacewidth \fIn\fR	width of a space on this font
\fBspecial\fR	this is a special font
.nr nosave 0
\fBcharset\fR
\fIlist of character name, width, ascender/descender, code\fP, tab separated
.pg
The \fBname\fR and \fBcharset\fR
fields are mandatory;
\fBcharset\fR must be last.
Comments are permitted,
as are other unrecognized parameters.
.pg
Each line following \fRcharset\fR
describes one character: its name, its width in units as described above,
ascender/descender information, and a decimal, octal or hexadecimal value
by which the output device knows it
(the \T'e_N'\fB\eN\fR\T
``number'' of the character).
The character name is arbitrary, except that \fB\-\-\-\fR
signifies an unnamed character.
If the width field contains \fB"\fR,
the name is a synonym for the previous character.
The ascender/descender field is 1 if
the character has a descender (hangs below the baseline, like \fBy\fR),
is 2 if it has an ascender (is tall, like \fBY\fR),
is 3 if both,
and is 0 if neither.
The value is returned
in the \T'n_ct'\fBct\fR\T register,
as computed by the \T'e_w'\fB\ew\fR
function\T \T'c_width'(\(sc11.2).\T
.br
.nr nosave 1
.ne 5
.nr nosave 0
.pg
Here are excerpts from a typical font description file
for the same Postscript printer.
.tb
.ta .5i 1i 1.5i 2.5i
.ft CW
.ps -1
hy	33	0	45	hyphen \e(hy
-	"			- is a synonym for \e(hy
.sp
Q	72	3	81
.sp
a	44	0	97
b	50	2	98
c	44	0	99
d	50	2	100
y	50	1	121
.sp
em	100	0	208
.nr nosave 0
\-\-\-	44	2	220	English pound currency symbol \eN'220'
\-\-\-	36	0	221	centered dot \eN'221'
.ps
.ft R
.pg
This says, for example, that the width of the letter \fBa\fR
is 44 units at point size 10,
the value of \fBunitwidth\fR.
Point sizes are scaled linearly and rounded, so the width of \fBa\fR
will be 44 at size 10, 40 at size 9, 35 at size 8,
and so on.
.rm EM
.bp
.\" from file m5
.Bookmark 0 "Tutorial Examples"
.ii
.ds H T
.tr |
.tr ~|
.de x1
.xx
.ft B
.in .2i
.nf
.ne 2.1
.ta 1i
..
.de x2
.fi
.in 0
.ft R
.xx
..
.br
.ps \n(PS
.ce
.ft B
.rs
.sp 0.5i
\A'part_tutorial'TUTORIAL EXAMPLES
.ft R
.sp 2
.nr p 0
.2C
.ns
.mha T1
.mk
Introduction
.pg
Although \*(NR and \*(TR
have by design a syntax reminiscent
of earlier text processors*
.fn
.xx
.ad b
*For example:
P.|A.|Crisman, Ed.,
.ul
The Compatible Time-Sharing System,
MIT Press, 1965, Section|AH9.01
(Description of \%RUNOFF program on MIT's CTSS system).
.br
.ad p
.ef
with the intent of easing their use,
it is almost always necessary to
prepare at least a small set of macro definitions
to describe most documents.
Such common formatting needs
as page margins and footnotes
are deliberately not built into \*(NR and \*[TR.]
Instead,
the macro and string definition, number register, \T'c_diversion'diversion\T,
environment switching, page-position trap, and conditional input mechanisms
provide the basis for user-defined implementations.
.pg
The examples to be discussed are intended to be useful and somewhat realistic,
but won't necessarily cover all relevant contingencies.
Explicit numerical parameters are used
in the examples
to make them easier to read and to
illustrate typical values.
In many cases, number registers would really be used
to reduce the number of places where numerical
information is kept,
and to concentrate conditional parameter initialization
like that which depends on whether \*(TR or \*(NR is being used.
.mha T2
Page Margins
.pg
As discussed in \T's_page'\(sc3,\T
\fIheader\fR and \fIfooter\fR macros are usually defined
to describe the top and bottom page margin areas respectively.
A trap is planted at page position 0 for the header, and at
\fI\-N\fR (\fIN\fR from the page bottom) for the footer.
The simplest such definitions might be
.x1
&de hd	\e"define header
\'sp 1i
&&	\e"end definition
&de fo	\e"define footer
\'bp
&&	\e"end definition
&wh 0 hd
&wh \-1i fo
.x2
which provide blank 1|inch top and bottom margins.
The header will occur on the \fIfirst\fR page,
only if the definition and trap exist prior to
the initial pseudo-page transition \T's_page'(\(sc3).\T
In fill mode, the output line that springs the footer trap
was typically forced out because some part or whole word didn't fit on it.
If anything in the footer and header that follows causes a \fIbreak\fR,
that word or part word will be forced out.
In this and other examples,
requests like \T'bp'\fBbp\fR\T and \T'sp'\fBsp\fR\T
that normally cause breaks are invoked using
the \fIno-break\fR control character \fB\'\fR
to avoid this.
When the header/footer design contains material
requiring independent text processing, the
environment may be switched, avoiding
most interaction with the running text.
.pg
A more realistic example would be
.x1
&de hd	\e"header
&if t .tl \'\e(rn\'\'\e(rn\'  \e"troff cut mark
&if \e\en%>1 \e{\e
\'sp ~\|0.5i\-1	\e"tl base at 0.5i
&tl \'\'\- % \-\'\'	\e"centered page number
&ps	\e"restore size
&ft	\e"restore font
&vs  \e}	\e"restore vs
\'sp ~\|1.0i  	\e"space to 1.0i
&ns	\e"turn on no-space mode
&&
&de fo	\e"footer
&ps 10	\e"set footer/header size
&ft R	\e"set font
&vs 12p	\e"set base-line spacing
&if \e\en%=1 \e{\e
\'sp ~\|\e\en(.pu\-0.5i\-1  \e"tl base 0.5i up
&tl \'\'\- % \-\'\' \e}  \e"first page number
\'bp
&&
&wh 0 hd
&wh \-1i fo
.x2
which sets the size, font, and base-line spacing for the
header/footer material, and ultimately restores them.
The material in this case is a page number at the bottom of the
first page and at the top of the remaining pages.
If \*(TR is used, a \fIcut mark\fR is drawn in the form
of \fIroot-en\fR's at each margin.
The \T'sp'\fBsp\fR's\T refer to absolute positions to avoid
dependence on the base-line spacing.
Another reason for this in the footer
is that the footer is invoked by printing a line whose
vertical spacing swept past the trap position by possibly
as much as the base-line spacing.
The \fIno-space\fR mode is turned on at the end of \fBhd\fR
to render ineffective
accidental occurrences of \T'sp'\fBsp\fR\T at the top of the running text.
.pg
The above method of restoring size, font, etc. presupposes
that such requests (that set \fIprevious\fR value) are \fInot\fR
used in the running text.
A better scheme is save and restore both the current \fIand\fR
previous values as shown for size in the following:
.x1
&de fo
&nr s1 \e\en(.s	\e"current size
&ps
&nr s2 \e\en(.s	\e"previous size
&  ---	\e"rest of footer
&&
&de hd
&  ---	\e"header stuff
&ps \e\en(s2	\e"restore previous size
&ps \e\en(s1	\e"restore current size
&&
.x2
Page numbers may be printed in the bottom margin
by a separate macro triggered during the footer's
page ejection:
.x1
&de bn	\e"bottom number
&tl \'\'\- % \-\'\'	\e"centered page number
&&
&wh \-0.5i\-1v bn	 \e"tl base 0.5i up
.x2
.mha T3
Paragraphs and Headings
.pg
The housekeeping
associated with starting a new paragraph should be collected
in a paragraph macro
that, for example,
does the desired preparagraph spacing,
forces the correct font, size, base-line spacing, and indent,
checks that enough space remains for \fImore than one\fR line,
and
requests a temporary indent.
.x1
&de pg	\e"paragraph
&br	\e"break
&ft R	\e"force font,
&ps 10	\e"size,
&vs 12p	\e"spacing,
&in 0	\e"and indent
&sp 0.4	\e"prespace
&ne 1+\e\en(.Vu	\e"want more than 1 line
&ti 0.2i	\e"temp indent
&&
.x2
The first break in \fBpg\fR
will force out any previous partial lines,
and must occur before the \T'vs'\fBvs\fR\T.
The forcing of font, etc. is
partly a defense against prior error and
partly to permit
things like section heading macros to
set parameters only once.
The prespacing parameter is suitable for \*[TR;]
a larger space, at least as big as the output device vertical resolution, would be
more suitable in \*[NR.]
The choice of remaining space to test for in the \T'ne'\fBne\fR\T
is the smallest amount greater than one line
(the \T'n_.V'\fB.V\fR\T is the available vertical resolution).
.pg
A macro to automatically number section headings
might look like:
.x1
&de sc	\e"section
&  ---	\e"force font, etc.
&sp 0.4	\e"prespace
&ne 2.4+\e\en(.Vu \e"want 2.4+ lines
.lg 0
&fi
.lg
\e\en+S.
&&
&nr S 0 1	\e"init S
.x2
The usage is \fB.sc\fR,
followed by the section heading text,
followed by \fB.pg\fR.
The \T'ne'\fBne\fR\T test value includes one line of heading,
0.4 line in the following \fBpg\fR, and
one line of the paragraph text.
A word consisting of the next section number and a period is
produced to begin the heading line.
The format of the number may be set by \T'af'\fBaf\fR\T \T's_reg'(\(sc8).\T
.pg
Another common form is the labeled, indented paragraph,
where the label protrudes left into the indent space.
.x1
&de lp	\e"labeled paragraph
&pg
&in 0.5i	\e"paragraph indent
&ta 0.2i 0.5i	\e"label, paragraph
&ti 0
\et\e\e$1\et\ec	\e"flow into paragraph
&&
.x2
The intended usage is "\fB.lp\fR \fIlabel\fR\|";
\fIlabel\fR will begin at 0.2\|inch, and
cannot exceed a length of 0.3\|inch without intruding into
the paragraph.
The label could be right adjusted against 0.4\|inch by
setting the tabs instead with \fB.ta|0.4iR|0.5i\fR.
The last line of \fBlp\fR ends with \fB\ec\fR so that
it will become a part of the first line of the text
that follows.
.mha T4
Multiple Column Output
.pg
The production of multiple column pages requires
the footer macro to decide whether it was
invoked by other than the last column,
so that it will begin a new column rather than
produce the bottom margin.
The header can initialize a column register that
the footer will increment and test.
The following is arranged for two columns, but
is easily modified for more.
.x1
&de hd	\e"header
&  ---
&nr cl 0 1	\e"init column count
&mk	\e"mark top of text
&&
&de fo	\e"footer
&ie \e\en+(cl<2 \e{\e
&po +3.4i	\e"next column; 3.1+0.3
&rt	\e"back to mark
&ns \e}	\e"no-space mode
&el \e{\e
&po \e\enMu	\e"restore left margin
&  ---
\'bp \e}
&&
&ll 3.1i	\e"column width
&nr M \e\en(.o	\e"save left margin
.x2
Typically a portion of the top of the first page
contains full width text;
the request for the narrower line length,
as well as another \fB.mk\fR would
be made where the two column output was to begin.
.mha T5
Footnote Processing
.pg
The footnote mechanism to be described is used by
imbedding the footnotes in the input text at the
point of reference,
demarcated by an initial \fB.fn\fR and a terminal \fB.ef\fR:
.x1
&fn
\fIFootnote text and control lines...\fP
&ef
.x2
In the following,
footnotes are processed in a separate environment and diverted
for later printing in the space immediately prior to the bottom
margin.
There is provision for the case where the last collected
footnote doesn't completely fit in the available space.
.x1
&de hd	\e"header
&  ---
&nr x 0 1	\e"init footnote count
&nr y 0\-\e\enb	\e"current footer place
&ch fo \-\e\enbu	\e"reset footer trap
&if \e\en(dn .fz	\e"leftover footnote
&&
&de fo	\e"footer
&nr dn 0	\e"zero last \T'c_diversion'diversion\T size
&if \e\enx \e{\e
&ev 1	\e"expand footnotes in ev1
&nf	\e"retain vertical size
&FN	\e"footnotes
&rm FN	\e"delete it
&if "\e\en(.z"fy" .di	 \e"end overflow \T'c_diversion'diversion\T
&nr x 0	\e"disable fx
&ev  \e}	\e"pop environment
&  ---
\'bp
&&
&de fx	\e"process footnote overflow
&if \e\enx .di fy	\e"divert overflow
&&
&de fn	\e"start footnote
&da FN	\e"divert (append) footnote
&ev 1	\e"in environment 1
&if \e\en+x=1 .fs	 \e"if first, include separator
.lg 0
&fi	\e"fill mode
.lg
&&
&de ef	\e"end footnote
&br	\e"finish output
&nr z \e\en(.v	\e"save spacing
&ev	\e"pop ev
&di	\e"end \T'c_diversion'diversion\T
&nr y \-\e\en(dn	\e"new footer position,
&if \e\enx=1 .nr y \-(\e\en(.v\-\e\enz) \e
	\e"uncertainty correction
&ch fo \e\enyu	\e"y is negative
&if (\|\e\en(nl+1v)>(\|\e\en(.p+\e\eny) \e
&ch fo \e\en(nlu+1v	 \e"it didn't fit
&&
&de fs	\e"separator
\el\'1i\'	\e"1 inch rule
&br
&&
&de fz	\e"get leftover footnote
&fn
&nf	\e"retain vertical size
&fy	\e"where fx put it
&ef
&&
&nr b 1.0i	\e"bottom margin size
&wh 0 hd	\e"header trap
&wh 12i fo	\e"footer trap, temp position
&wh \-\e\enbu fx	\e"fx at footer position
&ch fo \-\e\enbu	\e"conceal fx with fo
.x2
The header \fBhd\fR initializes a footnote count register \fBx\fR,
and sets both the current footer trap position register \fBy\fR and
the footer trap itself to a nominal position specified in
register \fBb\fR.
In addition, if the register \T'n_dn'\fBdn\fR\T indicates a leftover footnote,
\fBfz\fR is invoked to reprocess it.
The footnote start macro \fBfn\fR begins a
\T'c_diversion'diversion\T (append) in environment 1,
and increments the count \fBx\fR; if the count is one, the footnote separator \fBfs\fR
is interpolated.
The separator is kept in a separate macro to permit user redefinition.
The footnote end macro \fBef\fR restores
the previous environment and ends the \T'c_diversion'diversion\T
after saving the spacing size in register \fBz\fR.
\fBy\fR is then decremented by the size of the footnote,
available in \T'n_dn'\fBdn\fR\T;
then on the first footnote, \fBy\fR is further decremented by the difference
in vertical base-line spacings of the two environments, to
prevent the late triggering the footer trap from causing the last
line of the combined footnotes to overflow.
The footer trap is then set to the lower (on the page) of \fBy\fR or the current page position \T'n_nl'(\fBnl\fR)\T
plus one line, to allow for printing the reference line.
If indicated by \fBx\fR, the footer \fBfo\fR rereads the footnotes from \fBFN\fR in nofill mode
in environment 1,
and deletes \fBFN\fR.
If the footnotes were too large to fit, the macro \fBfx\fR will be trap-invoked to redivert
the overflow into \fBfy\fR,
and the register \T'n_dn'\fBdn\fR\T will later indicate
to the header whether \fBfy\fR is empty.
Both \fBfo\fR and \fBfx\fR are planted in the nominal footer trap position in an order
that causes \fBfx\fR to be concealed unless the \fBfo\fR trap is moved.
The footer then terminates the overflow \T'c_diversion'diversion\T,
if necessary, and
zeros \fBx\fR to disable \fBfx\fR,
because the uncertainty correction
together with a not-too-late triggering of the footer can result
in the footnote rereading finishing before reaching the \fBfx\fR trap.
.pg
A good exercise for the student is to combine the multiple-column and footnote mechanisms.
.mha T6
The Last Page
.pg
After the last input file has ended, \*(NR and \*(TR
invoke the \fIend macro\fR \T's_mac'(\(sc7),\T if any,
and when it finishes, eject the remainder of the page.
During the eject, any traps encountered are processed normally.
At the \fIend\fR of this last page, processing terminates
\fIunless\fR a partial line, word, or partial word remains.
If it is desired that another page be started, the end-macro
.x1
&de en	\e"end-macro
\ec
\'bp
&&
&em en
.x2
will deposit a null partial word,
and effect another last page.
.rm EM
.\" from file table1
.ii
.1C
.bp
.Bookmark 0 "Font Style Examples"
.rm mx
.br
.tr &&
.tr ||
.tr ~~
.de aa
.nf
abcdefghijklmnopqrstuvwxyz
ABCDEFGHIJKLMNOPQRSTUVWXYZ
1234567890
.ss 9
! $ % & ( ) ` ' * + \- . , / : ; = ? [ ] |
.fi
\(bu \(sq \(em \(hy \(ru \(14 \(12 \(34 \(fi \(fl \(ff
\(Fi \(Fl
\(de \(dg \(fm
\(ct \(rg \(co
.ss 12
..
.de bb
.ss 9
.fi
.ll 5i
" \' \e ^ \_ \` ~ \(sl < > { } # @ \(pl \(mi \(eq \(**
.br
\(*a \(*b \(*g \(*d \(*e \(*z \(*y \(*h \(*i \(*k \(*l \(*m
\(*n \(*c \(*o \(*p \(*r \(*s \(ts \(*t \(*u \(*f \(*x \(*q \(*w
.br
\(*G \(*D \(*H \(*L \(*C \(*P \(*S \(*U \(*F \(*Q \(*W
.br
\(sr \(rn \(>= \(<= \(== \(ap \(~= \(!=
\(-> \(<- \(ua \(da \(mu
\(di \(+- \(cu \(ca \(sb \(sp \(ib \(ip \(if \(pd
.br
\(sc \(gr \(no \(is \(pt \(es \(mo
\(dd \(rh \(lh \(or \(ci
\(lt \(lb \(rt \(rb \(lk \(rk \(bv \(lf \(rf \(lc \(rc
\(br
.br
.ss 12
.nf
..
.nf
.ps 12
.vs 14p
.ft B
.ce
.sp 3
\A'Table I'Table I
.sp
.ce
Font Style Examples
.sp .5i
.ft R
.ps 10
.fi
.vs 12p
The following fonts are printed in 12-point, with a vertical spacing of 14-point,
and with
non-alphanumeric characters separated by \(14\|em space.
Note that this table only includes
the historical \s-1CAT\s+1 \*(TR character set;
\*(PS devices can usually print a much larger,
although font-dependent set of characters.
.sp .5i
.na
.ps 12
.vs 14p
.ft R
Times Roman
.sp .5
.aa
.sp
.ft I
Times Italic
.sp .5
.aa
.sp
.ft B
Times Bold
.sp .5
.aa
.sp
.ft R
Special Font
.sp .5
.fi
.ll 5i
.bb
.ad
.rm EM
.\" from file table2
.ii
.bp
.nr nosave 1
.Bookmark 0 "Input Naming Conventions"
.1C
.de mx
.	nf
.	ft I
.	ta .25iC .5i +.55i 3.25iC +.25i +.55i
		Input	Character		Input	Character
	Char	Name	Name	Char	Name	Name
.	ft R
.	sp .2
.	nr cl 0
.	mk
..
.br
.tr ~~
.nf
.ps 12
.vs 14p
.ft B
.ce
\A'Table II'Table II
.sp
.ce 2
Input Naming Conventions for \', \`, and \-
and for Non-ASCII Special Characters
.sp .5i
.ft R
.ps 10
.vs 12p
.ft B
Non-\s-1ASCII\s+1 characters and \f(BIminus\fP on the standard fonts.
.sp
.ft R
.de cl
.	ie \\n+(cl<2 \{.po +3.0i
.	rt \}
.	el .sc
..
.de sc
.	po \\n(POu
.	nr cl 0
..
.nr cl 0 1
.ds CF \f(CW\\$1\fR
.de qq
	\&'	\\*[CF \(aq]	close quote
	`	\\*[CF \`]	open quote
	\(em	\\*[CF \e(em]	3/4 Em dash
	-	\\*[CF \-]	hyphen or
	\(hy	\\*[CF \e(hy]	hyphen
	\-	\\*[CF \e\-]	current font minus
	\(bu	\\*[CF \e(bu]	bullet
	\(sq	\\*[CF \e(sq]	square
	\(ru	\\*[CF \e(ru]	rule
	\(14	\\*[CF \e(14]	1/4
	\(12	\\*[CF \e(12]	1/2
	\(34	\\*[CF \e(34]	3/4
	\(fi	\\*[CF \e(fi]	fi
	\(fl	\\*[CF \e(fl]	fl
	\(ff	\\*[CF \e(ff]	ff
	\(Fi	\\*[CF \e(Fi]	ffi
	\(Fl	\\*[CF \e(Fl]	ffl
	\(de	\\*[CF \e(de]	degree
	\(dg	\\*[CF \e(dg]	dagger
	\(fm	\\*[CF \e(fm]	foot mark
	\(ct	\\*[CF \e(ct]	cent sign
	\(rg	\\*[CF \e(rg]	registered
	\(co	\\*[CF \e(co]	copyright
..
.di zz
.lg 0
.qq
.di
.lg
.mx
.nr aa \n(dn/2
.ne \n(aau+1
.nr bb \n(nl+\n(aa
.ch cl
.wh \n(bbu cl
.qq
.sp |\n(bbu
.ch cl 12i
.fi
.sp 2
.ft B
Non-\s-1ASCII\s+1 characters and \', \`, \_\|, \(pl, \(mi, \(eq, and \(** on the special font.
.sp .4
.ft R
.fi
.ps 10
In traditional \*[TR,]
the ASCII characters @, #, ", \', \`, <, >, \\, {, }, ~, ^, and \(ul existed
\fIonly\fR on the special font and were printed as a 1-em space if that font
was not mounted.
The following characters exist only on the special font.
The special math plus, minus, and equals are provided to
insulate the appearance of equations from the choice of standard fonts.
.nf
.ps 10
.sp
.de sc
.po \\n(POu
.nr cl 0
'bp
..
.ch cl \nmu-\n(.vu-1u
.mx
.lg 0
	\(pl	\*[CF \e(pl]	math plus
	\(mi	\*[CF \e(mi]	math minus
	\(eq	\*[CF \e(eq]	math equals
	\(**	\*[CF \e(**]	math star
	\(sc	\*[CF \e(sc]	section
	\(aa	\*[CF \e(aa]	acute accent
	\(ga	\*[CF \e(ga]	grave accent
	\(ul	\*[CF \e(ul]	underrule
	\(sl	\*[CF \e(sl]	slash (matching backslash)
	\(rs	\*[CF \e(rs]	backslash
	\(*a	\*[CF \e(*a]	alpha
	\(*b	\*[CF \e(*b]	beta
	\(*g	\*[CF \e(*g]	gamma
	\(*d	\*[CF \e(*d]	delta
	\(*e	\*[CF \e(*e]	epsilon
	\(*z	\*[CF \e(*z]	zeta
	\(*y	\*[CF \e(*y]	eta
	\(*h	\*[CF \e(*h]	theta
	\(*i	\*[CF \e(*i]	iota
	\(*k	\*[CF \e(*k]	kappa
	\(*l	\*[CF \e(*l]	lambda
	\(*m	\*[CF \e(*m]	mu
	\(*n	\*[CF \e(*n]	nu
	\(*c	\*[CF \e(*c]	xi
	\(*o	\*[CF \e(*o]	omicron
	\(*p	\*[CF \e(*p]	pi
	\(*r	\*[CF \e(*r]	rho
	\(*s	\*[CF \e(*s]	sigma
	\(ts	\*[CF \e(ts]	terminal sigma
	\(*t	\*[CF \e(*t]	tau
	\(*u	\*[CF \e(*u]	upsilon
	\(*f	\*[CF \e(*f]	phi
	\(*x	\*[CF \e(*x]	chi
	\(*q	\*[CF \e(*q]	psi
	\(*w	\*[CF \e(*w]	omega
	\(*A	\*[CF \e(*A]	Alpha
	\(*B	\*[CF \e(*B]	Beta
	\(*G	\*[CF \e(*G]	Gamma
	\(*D	\*[CF \e(*D]	Delta
	\(*E	\*[CF \e(*E]	Epsilon
	\(*Z	\*[CF \e(*Z]	Zeta
	\(*Y	\*[CF \e(*Y]	Eta
	\(*H	\*[CF \e(*H]	Theta
	\(*I	\*[CF \e(*I]	Iota
	\(*K	\*[CF \e(*K]	Kappa
	\(*L	\*[CF \e(*L]	Lambda
	\(*M	\*[CF \e(*M]	Mu
	\(*N	\*[CF \e(*N]	Nu
	\(*C	\*[CF \e(*C]	Xi
	\(*O	\*[CF \e(*O]	Omicron
	\(*P	\*[CF \e(*P]	Pi
	\(*R	\*[CF \e(*R]	Rho
	\(*S	\*[CF \e(*S]	Sigma
	\(*T	\*[CF \e(*T]	Tau
	\(*U	\*[CF \e(*U]	Upsilon
	\(*F	\*[CF \e(*F]	Phi
	\(*X	\*[CF \e(*X]	Chi
	\(*Q	\*[CF \e(*Q]	Psi
	\(*W	\*[CF \e(*W]	Omega
	\(sr	\*[CF \e(sr]	square root
	\(rn	\*[CF \e(rn]	root en extender
	\(>=	\*[CF \e(>=]	>=
	\(<=	\*[CF \e(<=]	<=
	\(==	\*[CF \e(==]	identically equal
	\(~=	\*[CF \e(~=]	approx =
	\(ap	\*[CF \e(ap]	approximates
	\(!=	\*[CF \e(!=]	not equal
	\(->	\*[CF \e(\(mi>]	right arrow
	\(<-	\*[CF \e(<\(mi]	left arrow
	\(ua	\*[CF \e(ua]	up arrow
	\(da	\*[CF \e(da]	down arrow
	\(mu	\*[CF \e(mu]	multiply
	\(di	\*[CF \e(di]	divide
	\(+-	\*[CF \e(+\(mi]	plus-minus
	\(cu	\*[CF \e(cu]	cup (union)
	\(ca	\*[CF \e(ca]	cap (intersection)
	\(sb	\*[CF \e(sb]	subset of
	\(sp	\*[CF \e(sp]	superset of
	\(ib	\*[CF \e(ib]	improper subset
	\(ip	\*[CF \e(ip]	improper superset
	\(if	\*[CF \e(if]	infinity
	\(pd	\*[CF \e(pd]	partial derivative
	\(gr	\*[CF \e(gr]	gradient
	\(no	\*[CF \e(no]	not
	\(is	\*[CF \e(is]	integral sign
	\(pt	\*[CF \e(pt]	proportional to
	\(es	\*[CF \e(es]	empty set
	\(mo	\*[CF \e(mo]	member of
	\(br	\*[CF \e(br]	box vertical rule
	\(dd	\*[CF \e(dd]	double dagger
	\(rh	\*[CF \e(rh]	right hand
	\(lh	\*[CF \e(lh]	left hand
.\"	\(bs	\*[CF \e(bs]	Bell System logo
	\(or	\*[CF \e(or]	or
	\(ci	\*[CF \e(ci]	circle
	\(lt	\*[CF \e(lt]	left top of big curly bracket
	\(lb	\*[CF \e(lb]	left bottom
	\(rt	\*[CF \e(rt]	right top
	\(rb	\*[CF \e(rb]	right bot
	\(lk	\*[CF \e(lk]	left center of big curly bracket
	\(rk	\*[CF \e(rk]	right center of big curly bracket
	\(bv	\*[CF \e(bv]	bold vertical
	\(lf	\*[CF \e(lf]	left floor (left bottom of big
			square bracket)
	\(rf	\*[CF \e(rf]	right floor (right bottom)
	\(lc	\*[CF \e(lc]	left ceiling (left top)
	\(rc	\*[CF \e(rc]	right ceiling (right top)
.rm mx
.ie \n(cl \{\
.	bp
.\}
.1C
.ft B
Available characters from groff_char(7)
.ft R
.sp
.ds MG \|\s-2\v'-.4m'*\v'.4m'\s+2
.\".ds MG \|\s-3\v'-.5m'\(dg\v'.5m'\s+3
.fi
The following table list the characters from the \fBgroff_char\fP(7)
manual page which can be used with Heirloom \*(TR.
Special characters marked with a \fB*\fR are only defined when
\*(TR is started with option \fB\-mgchar\fP.
If a glyph is actually available depends on the font and
output device.
.sp
.nr AC 0
.de mx
.	nf
.	ft I
.	ie \n(AC .ta .1i +.55i +.65i +.2i +1.55i +.2i +.8i
.	el       .ta .1i +.55i +.65i      +1.55i      +.8i
.	ie \n(AC \tOutput\tInput\t\tPostScript\t\tUnicode\tNotes
.	el       \tOutput\tInput\tPostScript\tUnicode\tNotes
.	ft R
.	sp .2
.	ns
..
.de cl
.	bp
..
.de AC
.	lds Pi
.	lds Po
.	if !\\$4 \{\
.		ds Pi \\*[CF "\e[\\$4]"]
.		ds Po \[\\$4]
.	\}
.	lds U
.	if !\\$5 .ds U \U'\\$5'
.	lds O
.	lnr Lo 0
.	ie \\$1P .ds O \\*(Po
.	el .ie \\$1U .ds O \\*U
.	el .if !\\$1 \{\
.		length Lo \\$1
.		ie \\n(Lo>2 .ds O \[\\$1]
.		el .ds O \(\\$1
.	\}
.	lds I
.	ie \\$2O .ds I \\*O
.	el .ie !\\$2 \{\
.		lnr Wi \w\f(CW\\$2
.		ie \\n(Wi>\w\f(CW2n .ds I \\*[CF "\e[\\$2]"]
.		el .ds I \\*[CF \e(\\$2]
.	\}
.	el .ie \\n(Lo=2 .ds I \\*[CF \e(\\$1]
.	el .if \\n(Lo>2 .ds I \\*[CF "\e[\\$1]"]
.	if \\$3 \{\
.		ie !\\*I .as I \*(MG
.		el .if !\\*(Pi .as Pi \*(MG
.	\}
.	lds UC
.	if !\\$5 .ds UC \\*[CF \eU\(aq\\$5\(aq]
.	ie \n(AC \t\&\\*O\t\\*I\t\\*(Po\t\\*(Pi\t\\*U\t\\*(UC\t\\$6
.	el       \t\&\\*O\t\\*I\t\\*(Pi\t\\*(UC\t\\$6
..
.de P
.	sp .4
..
.mx
.\" 8-bit ASCII
.AC U O 0 exclamdown     00A1 "inverted exclamation mark
.AC U O 0 cent           00A2 "currency unit
.AC U O 0 sterling       00A3 "pound sterling
.AC U O 0 currency       00A4 "generic currency symbol
.AC U O 0 yen            00A5 "Japanese currency symbol
.AC U O 0 brokenbar      00A6 "broken bar
.AC U O 0 section        00A7 "section sign
.AC U O 0 dieresis       00A8 dieresis
.AC U O 0 copyright      00A9 "copyright symbol
.AC U O 0 ordfeminine    00AA "feminine ordinal
.AC U O 0 guillemotleft  00AB "left guillemet [sic]
.AC U O 0 logicalnot     00AC "logical not
.AC U O 0 registered     00AE "registered mark symbol
.AC U O 0 macron         00AF "overbar accent
.AC U O 0 degree         00B0 "degree
.AC U O 0 plusminus      00B1 "plus-minus sign
.AC U O 0 twosuperior    00B2 "superscript 2
.AC U O 0 threesuperior  00B3 "superscript 3
.AC U O 0 acute          00B4 "acute accent
.AC U O 0 mu             00B5 "micro sign
.AC U O 0 paragraph      00B6 "end of paragraph marker
.AC U O 0 periodcentered 00B7 "centered period
.AC U O 0 cedilla        00B8 "cedilly accent
.AC U O 0 onesuperior    00B9 "superscript 1
.AC U O 0 ordmasculine   00BA "masculine ordinal
.AC U O 0 guillemotright 00BB "right guillemet [sic]
.AC U O 0 onequarter     00BC "1/4 symbol
.AC U O 0 onehalf        00BD "1/2 symbol
.AC U O 0 threequarters  00BE "3/4 symbol
.AC U O 0 questiondown   00BF "inverted question mark
.AC U O 0 Agrave         00C0 "A grave
.AC U O 0 Aacute         00C1 "A acute
.AC U O 0 Acircumflex    00C2 "A circumflex
.AC U O 0 Atilde         00C3 "A tilde
.AC U O 0 Adieresis      00C4 "A dieresis
.AC U O 0 Aring          00C5 "A ring
.AC U O 0 AE             00C6 "A+E combined
.AC U O 0 Ccedilla       00C7 "C cedilla
.AC U O 0 Egrave         00C8 "E grave
.AC U O 0 Eacute         00C9 "E acute
.AC U O 0 Ecircumflex    00CA "E circumflex
.AC U O 0 Edieresis      00CB "E dieresis
.AC U O 0 Igrave         00CC "I grave
.AC U O 0 Iacute         00CD "I acute
.AC U O 0 Icircumflex    00CE "I circumflex
.AC U O 0 Idieresis      00CF "I dieresis
.AC U O 0 Eth            00D0 "E th
.AC U O 0 Ntilde         00D1 "N tilde
.AC U O 0 Ograve         00D2 "O grave
.AC U O 0 Oacute         00D3 "O acute
.AC U O 0 Ocircumflex    00D4 "O circumflex
.AC U O 0 Otilde         00D5 "O tilde
.AC U O 0 Odieresis      00D6 "O dieresis
.AC U O 0 multiply       00D7 multiply
.AC U O 0 Oslash         00D8 "O slash
.AC U O 0 Ugrave         00D9 "U grave
.AC U O 0 Uacute         00DA "U acute
.AC U O 0 Ucircumflex    00DB "U circumflex
.AC U O 0 Udieresis      00DC "U dieresis
.AC U O 0 Yacute         00DD "Y acute
.AC U O 0 Thorn          00DE Thorn
.AC U O 0 germandbls     00DF "German double s
.AC U O 0 agrave         00E0 "a grave
.AC U O 0 aacute         00E1 "a acute
.AC U O 0 acircumflex    00E2 "a circumflex
.AC U O 0 atilde         00E3 "a tilde
.AC U O 0 adieresis      00E4 "a dieresis
.AC U O 0 aring          00E5 "a ring
.AC U O 0 ae             00E6 "a+e combined
.AC U O 0 ccedilla       00E7 "c cedilla
.AC U O 0 egrave         00E8 "e grave
.AC U O 0 eacute         00E9 "e acute
.AC U O 0 ecircumflex    00EA "e circumflex
.AC U O 0 edieresis      00EB "e dieresis
.AC U O 0 igrave         00EC "i grave
.AC U O 0 iacute         00ED "i acute
.AC U O 0 icircumflex    00EE "i circumflex
.AC U O 0 idieresis      00EF "i dieresis
.AC U O 0 eth            00F0 "e th
.AC U O 0 ntilde         00F1 "n tilde
.AC U O 0 ograve         00F2 "o grave
.AC U O 0 oacute         00F3 "o acute
.AC U O 0 ocircumflex    00F4 "o circumflex
.AC U O 0 otilde         00F5 "o tilde
.AC U O 0 odieresis      00F6 "o dieresis
.AC U O 0 divide         00F7 divide
.AC U O 0 oslash         00F8 "o slash
.AC U O 0 ugrave         00F9 "u grave
.AC U O 0 uacute         00FA "u acute
.AC U O 0 ucircumflex    00FB "u circumflex
.AC U O 0 udieresis      00FC "u dieresis
.AC U O 0 yacute         00FD "y acute
.AC U O 0 thorn          00FE thorn
.AC U O 0 ydieresis      00FF "y dieresis
.P
.AC -D \(miD 1 Eth        00D0 "uppercase eth
.AC Sd ""    1 eth        00F0 "lowercase eth
.AC TP ""    1 Thorn      00DE "uppercase thorn
.AC Tp ""    1 thorn      00FE "lowercase thorn
.AC ss ""    1 germandbls 00DF "German double s
.P Ligatures
.AC /L ""    1 Lslash     0141 "L slash
.AC /l ""    1 lslash     0142 "l slash
.AC /O ""    1 Oslash     00D8 "O slash
.AC /o ""    1 oslash     00F8 "o slash
.AC AE ""    0 AE         00C6 "A+E combined
.AC ae ""    0 ae         00E6 "a+e combined
.AC OE ""    0 OE         0152 "O+E combined
.AC oe ""    0 oe         0153 "o+e combined
.AC IJ ""    0 IJ         0132 "I+J combined
.AC ij ""    0 ij         0133 "i+j combined
.AC .i ""    1 dotlessi   0131 "i without a dot
.AC .j ""    1 dotlessj   0237 "j without a dot
.P "Accented Characters
.AC 'A \(aqA 1 Aacute      00C1 "A acute
.AC 'C \(aqC 1 Cacute      0106 "C acute
.AC 'E \(aqE 1 Eacute      00C9 "E acute
.AC 'I \(aqI 1 Iacute      00CD "C acute
.AC 'O \(aqO 1 Oacute      00D3 "O acute
.AC 'U \(aqU 1 Uacute      00DA "U acute
.AC 'Y \(aqY 1 Yacute      00DD "Y acute
.AC 'a \(aqa 1 aacute      00E1 "a acute
.AC 'c \(aqc 1 cacute      0107 "c acute
.AC 'e \(aqe 1 eacute      00E9 "e acute
.AC 'i \(aqi 1 iacute      00ED "i acute
.AC 'o \(aqo 1 oacute      00F3 "o acute
.AC 'u \(aqu 1 uacute      00FA "u acute
.AC 'y \(aqy 1 yacute      00FD "y acute
.AC :A ""    1 Adieresis   00C4 "A dieresis
.AC :E ""    1 Edieresis   00CB "E dieresis
.AC :I ""    1 Idieresis   00CF "I dieresis
.AC :O ""    1 Odieresis   00D6 "O dieresis
.AC :U ""    1 Udieresis   00FC "U dieresis
.AC :Y ""    1 Ydieresis   0178 "Y dieresis
.AC :a ""    1 adieresis   00E4 "a dieresis
.AC :e ""    1 edieresis   00EB "e dieresis
.AC :i ""    1 idieresis   00EF "i dieresis
.AC :o ""    1 odieresis   00F6 "o dieresis
.AC :u ""    1 udieresis   00FC "u dieresis
.AC :y ""    1 ydieresis   00FF "y dieresis
.AC ^A ""    1 Acircumflex 00C2 "A circumflex
.AC ^E ""    1 Ecircumflex 00CA "E circumflex
.AC ^I ""    1 Icircumflex 00CE "I circumflex
.AC ^O ""    1 Ocircumflex 00D4 "O circumflex
.AC ^U ""    1 Ucircumflex 00DB "U circumflex
.AC ^a ""    1 acircumflex 00E2 "a circumflex
.AC ^e ""    1 ecircumflex 00EA "e circumflex
.AC ^i ""    1 icircumflex 00EE "i circumflex
.AC ^o ""    1 ocircumflex 00F4 "o circumflex
.AC ^u ""    1 ucircumflex 00FB "u circumflex
.AC `A \(gaA 1 Agrave      00C0 "A grave
.AC `E \(gaE 1 Egrave      00C8 "E grave
.AC `I \(gaI 1 Igrave      00CC "I grave
.AC `O \(gaO 1 Ograve      00D2 "O grave
.AC `U \(gaU 1 Ugrave      00D9 "U grave
.AC `a \(gaa 1 agrave      00E0 "a grave
.AC `e \(gae 1 egrave      00E8 "e grave
.AC `i \(gai 1 igrave      00EC "i grave
.AC `o \(gao 1 ograve      00F2 "o grave
.AC `u \(gau 1 ugrave      00F9 "u grave
.AC ~A ""    1 Atilde      00C3 "A tilde
.AC ~N ""    1 Ntilde      00D1 "N tilde
.AC ~O ""    1 Otilde      00D5 "O tilde
.AC ~a ""    1 atilde      00E3 "a tilde
.AC ~n ""    1 ntilde      00F1 "n tilde
.AC ~o ""    1 otilde      00F5 "o tilde
.AC vS ""    1 Scaron      0160 "S caron
.AC vs ""    1 scaron      0161 "s caron
.AC vZ ""    1 Zcaron      017D "Z caron
.AC vz ""    1 zcaron      017E "z caron
.AC ,C ""    1 Ccedilla    00C7 "C cedilla
.AC ,c ""    1 ccedilla    00E7 "c cedilla
.AC oA ""    1 Aring       00C5 "A ring
.AC oa ""    1 aring       00E5 "a ring
.P Accents
.AC a" ""    1 hungarumlaut 02DD "Hungarian umlaut
.AC a- a\(mi 1 macron       00AF "overbar accent
.AC a. ""    1 dotaccent    02D9 "dot accent
.AC a^ ""    1 circumflex   005E "circumflex accent
.AC aa ""    0 acute        00B4 "acute accent
.AC ga ""    0 grave        0060 "grave accent
.AC ab ""    1 breve        02D8 "breve accent
.AC ac ""    1 cedilla      00B8 "cedilla accent
.AC ad ""    1 dieresis     00A8 "umlaut accent
.AC ah ""    1 caron        02C7 "caron accent
.AC ao ""    1 ring         02DA "ring accent
.AC a~ ""    1 tilde        007E "tilde accent
.AC ho ""    1 ogonek       02dB "hook accent
.AC ha ""    1 asciicircum  005E "high circumflex
.AC ti ""    1 asciitilde   007E "tilde in the vertical middle
.P Quotes
.AC Bq ""       1 quotedblbase   201E "low double comma quote
.AC bq ""       1 quotesinglbase 201A "low single comma quote
.AC lq ""       0 quotedblleft   201C "left double quote
.AC `` \(ga\(ga 0 ""             ""   \fI(alias)\fP
.AC rq ""       0 quotedblright  201D "right double quote
.AC '' \(aq\(aq 0 ""             ""   \fI(alias)\fP
.AC oq ""       0 quoteleft      2018 "single open quote
.AC cq ""       0 quoteright     2019 "single closing quote
.AC aq ""       0 quotesingle    0027 "apostrophe quote
.AC dq ""       0 quotedbl       0022 "double quote
.AC Fo ""       1 guillemotleft  00AB "left guillemet
.AC Fc ""       1 guillemotright 00BB "right guillemet
.AC fo ""       1 guilsinglleft  2039 "single left angle quotation mark
.AC fc ""       1 guilsinglright 203A "single right angle quotation mark
.P Punctuation
.AC r! "" 1 exclamdown   00A1 "inverted exclamation mark
.AC r? "" 1 questiondown 00BF "inverted question mark
.AC em "" 0 emdash       2014 "em-dash symbol
.AC en "" 0 endash       2013 "en-dash symbol
.AC hy "" 0 hyphen       2010 "hyphen symbol
.P Brackets
.AC lB "" 1 bracketleft    005B "left square bracket
.AC rB "" 1 bracketright   005D "right square bracket
.AC lC "" 1 braceleft      007B "left curly bracket
.AC rC "" 1 braceright     007D "right curly bracket
.AC la "" 1 angleleft      27E8 "mathematical left angle bracket
.AC ra "" 1 angleright     27E9 "mathematical right angle bracket
.AC bv "" 0 braceex        23AA "curly brace vertical extension
.AC P  "" 0 bracketlefttp  23A1 "left square bracket top
.AC P  "" 0 bracketleftbt  23A3 "left square bracket bottom
.AC P  "" 0 bracketleftex  23A2 "left square bracket extension
.AC P  "" 0 bracketrighttp 23A4 "right square bracket top
.AC P  "" 0 bracketrightbt 23A6 "right square bracket bottom
.AC P  "" 0 bracketrightex 23A5 "right square bracket extension
.AC lt "" 0 bracelefttp    23A7 "left curly brace top
.AC lk "" 0 braceleftmid   23A8 "left curly brace middle
.AC lb "" 0 braceleftbt    23A9 "left curly brace bottom
.AC P  "" 0 braceleftex    23AA "left curly brace extension
.AC rt "" 0 bracerighttp   23AB "right curly brace top
.AC rk "" 0 bracerightmid  23AC "right curly brace middle
.AC rb "" 0 bracerightbt   23AD "right curly brace bottom
.AC P  "" 0 bracerightex   23AA "right curly brace extension
.AC P  "" 0 parenlefttp    239B "left parenthesis top
.AC P  "" 0 parenleftbt    239D "left parenthesis bottom
.AC P  "" 0 parenleftex    239C "left parenthesis extension
.AC P  "" 0 parenrighttp   239E "right parenthesis top
.AC P  "" 0 parenrightbt   23A0 "right parenthesis bottom
.AC P  "" 0 parenrightex   239F "right parenthesis extension
.P Arrows
.AC <- <\(mi 0 arrowleft     2190 "arrow left
.AC -> \(mi> 0 arrowright    2192 "arrow right
.AC <> ""    1 arrowboth     2194 "horizontal arrow in both directions
.AC da ""    0 arrowdown     2193 "arrow down
.AC ua ""    0 arrowup       2191 "arrow up
.AC va ""    1 arrowupdn     2195 "vertical arrow in both directions
.AC lA ""    1 arrowdblleft  21D0 "double arrow left
.AC rA ""    1 arrowdblright 21D2 "double arrow right
.AC hA ""    1 arrowdblboth  21D4 "horizontal double arrow in both directions
.AC dA ""    1 arrowdbldown  21D3 "double arrow down
.AC uA ""    1 arrowdblup    21D1 "double arrow up
.AC vA ""    1 uni21D5       21D5 "vertical double arrow in both directions
.AC an ""    1 arrowhorizex  23AF "horizontal arrow extension
.P Lines
.AC ba ""    1 bar           007C "bar
.AC br ""    0 SF110000      2502 "box rule
.AC ul ""    0 underscore    005F "underscore
.AC rn ""    0 overline      203E "overline
.AC ru ""    0 ""            ""   "baseline rule
.AC bb ""    1 brokenbar     00A6 "broken bar
.AC sl ""    0 slash         002F "slash
.AC rs ""    0 backslash     005C "revers slash
.P "Text markers
.AC ci ""    0 circle         25CB "circle
.AC bu ""    0 bullet         2022 "bullet
.AC dd ""    0 daggerdbl      2021 "double dagger
.AC dg ""    0 dagger         2020 "dagger
.AC lz ""    1 lozenge        25CA "diamond
.AC sq ""    0 uni25A1        25A1 "square
.\" \(ps ???
.AC ps ""    1 paragraph      00B6 "end of paragraph marker
.AC sc ""    0 section        00A7 "section sign
.AC lh ""    0 uni261C        261C "hand pointing left
.AC rh ""    0 a14            261E "hand pointing right
.AC at ""    0 at             0040 "at
.AC sh ""    1 numbersign     0023 "number sign
.AC CR ""    1 carriagereturn 21B5 "carriage return
.AC OK ""    1 a19            2713 "check mark
.P "Legal symbols
.AC co ""    0 copyright      00A9 "copyright sign
.AC rg ""    0 registered     00AE "registered mark
.AC tm ""    0 trademark      2122 "trademark symbol
.AC bs ""    0 ""             ""   "AT&T Bell Labs logo
.P "Currency symbols
.AC Do "" 1 dollar   0024 "dollar
.AC ct "" 0 cent     00A2 "cent
.\" not available
.\".AC eu "" 1 ""       ""   "official Euro symbol
.AC Eu "" 1 Euro     20AC "font-specific Euro glyph
.AC Ye "" 1 yen      00A5 "Japanese Yen
.AC Po "" 1 sterling 00A3 "pound sterling
.AC Cs "" 1 currency 00A4 "Scandinavian currency sign
.AC Fn "" 1 florin   0192 "Dutch currency sign
.P Units
.AC de "" 0 degree       00B0 "degree
.AC %0 "" 1 perthousand  2030 "per thousand
.AC fm "" 0 minute       2032 "arc minute sign
.AC sd "" 1 second       2033 "arc second sign
.AC mc "" 1 mu           00B5 "micro sign
.AC Of "" 1 ordfeminine  00AA "feminine ordinal
.AC Om "" 1 ordmasculine 00BA "masculine ordinal
.P "Logical symbols
.AC AN  ""  1 logicaland   2227 "logical and
.AC OR  ""  1 logicalor    2228 "logical or
.AC no  ""  0 ""           ""   "logical not
.AC tno tno 1 logicalnot   00AC "text variant of `no'
.AC te  ""  0 existential  2203 "there exists
.AC fa  ""  0 universal    2200 "for all
.AC st  ""  1 suchthat     220B "such that
.AC 3d  ""  1 therefore    2234 "therefor
.AC tf  ""  1 ""           ""   \fI(alias)\fP
.AC or  ""  0 bar          007C "bitwise OR
.P "Mathematical symbols
.AC 12 "" 0 onehalf       00BD "1/2 symbol
.AC 14 "" 0 onequarter    00BC "1/4 symbol
.AC 34 "" 0 threequarters 00BE "3/4 symbol
.AC 18 "" 1 oneeighth     215B "1/8 symbol
.AC 38 "" 1 threeeighths  215C "3/8 symbol
.AC 58 "" 1 fiveeighths   215D "5/8 symbol
.AC 78 "" 1 seveneighths  215E "7/8 symbol
.AC S1 "" 1 onesuperior   00B9 "superscript 1
.AC S2 "" 1 twosuperior   00B2 "superscript 2
.AC S3 "" 1 threesuperior 00B3 "superscript 2
.P
.AC pl  ""     0 plus           002B "plus
.AC mi  ""     0 minus          2212 "minus
.\" \(-+ ???
.AC -+  \(mi+  1 uni2213        2213 "minus-plus
.AC +-  +\(mi  0 ""             ""   "plus-minus
.AC t+- t+\(mi 1 plusminus      00B1 "text variant of plus-minus
.AC pc  ""     1 periodcentered 00B7 "period centered
.AC md  ""     1 dotmath        22C5 "multiplication dot
.AC mu  ""     0 ""             ""   "multiply sign
.AC tmu ""     1 multiply       00D7 "text variant of multiply sign
.AC c*  ""     1 circlemultiply 2297 "multiply sign in circle
.AC c+  ""     1 circleplus     2295 "plus sign in circle
.AC di  ""     0 ""             ""   "division sign
.AC tdi ""     1 divide         00F7 "text variant of division sign
.\" \(f/ ???
.AC P   f/     1 fraction       2044 "bar for fractions
.\".AC f/  ""     1 fraction       2044 "bar for fractions
.AC **  ""     0 asteriskmath   2217 "mathematical asterisk
.P
.AC <= "" 0 lessequal    2264 "less or equal
.AC >= "" 0 greaterequal 2265 "greater or equal
.AC << "" 1 uni226A      226A "much less
.AC >> "" 1 uni226B      226B "much greater
.AC eq "" 0 equal        003D "equal
.AC != "" 0 notequal     2260 "not equal
.AC == "" 0 equivalence  2261 "equivalent
.AC ne "" 1 uni2262      2262 "not equivalent
.AC =~ "" 1 congruent    2245 "congruent
.\" |= vs. ~= problem
.\".AC |= "" 1 uni2243      2243 "asymptotically equal to
.AC ap "" 0 similar      223C "similar
.AC ~~ "" 0 approxequal  2248 "almost equal to
.\" |= vs. ~= problem
.\".AC ~= "" 0 approxequal  2248 "almost equal to
.AC pt "" 0 proportional 221D "proportional
.P
.AC es "" 0 emptyset       2205 "empty set
.AC mo "" 0 element        2208 "element of
.AC nm "" 1 notelement     2209 "not element of
.AC sb "" 0 propersubset   2282 "proper subset
.AC nb "" 1 notsubset      2284 "not subset
.AC sp "" 0 propersuperset 2283 "proper superset
.AC nc "" 1 uni2285        2285 "not superset
.AC ib "" 0 reflexsubset   2286 "subset or equal
.AC ip "" 0 reflexsuperset 2287 "superset or equal
.AC ca "" 0 intersection   2229 "intersection
.AC cu "" 0 union          222A "union
.P
.AC /_  "" 1 angle         2220 "angle
.\" \(pp ???
.AC pp  "" 1 perpendicular 22A5 "perpendicular
.AC is  "" 0 integral      222B "integral
.AC *S  "" 0 summation     2211 "summation
.AC sum "" 1 ""            ""   \fI(alias)\fP
.AC *P  "" 0 product       220F "product
.AC P   "" 1 coproduct     2210 "coproduct
.AC gr  "" 0 gradient      2207 "gradient
.AC sr  "" 0 radical       221A "square root
.AC P   "" 1 sqrt          ""   \fI(alias)\fP
.AC P   "" 0 radicalex     ""   "square root continuation
.AC P   "" 1 sqrtex        ""   \fI(alias)\fP
.P
.AC lc "" 0 uni2308 2308 "left ceiling
.AC rc "" 0 uni2309 2309 "right ceiling
.AC lf "" 0 uni230A 230A "left floor
.AC rf "" 0 uni230B 230B "right floor
.P
.AC if ""    0 infinity    221E "infinity
.AC Ah ""    1 aleph       2135 "aleph
.AC Im ""    1 Ifraktur    2111 "Gothic I, imaginary
.AC Re ""    1 Rfraktur    211C "Gothic R, real
.AC wp ""    1 weierstrass 2118 "Weierstrass p
.AC pd ""    0 partialdiff 2202 "partial differentiation
.AC -h \(mih 1 hbar        210F "Planck constant / 2pi (h-bar)
.P "Greek glyphs
.AC +h "" 1 theta1  03D1 "variant theta
.AC +f "" 1 phi1    03C6 "variant phi
.AC +p "" 1 omega1  03D6 "variant pi
.AC +e "" 1 uni03F5 03F5 "variant epsilon
.P "Card symbols
.AC CL "" 1 club    2663 "black club suit
.AC SP "" 1 spade   2660 "black spade suit
.AC HE "" 1 heart   2665 "black heart suit
.AC U  "" 0 uni2661 2661 "white heart suit
.AC DI "" 1 diamond 2666 "black diamond suit
.AC U  "" 0 uni2662 2662 "white diamond suit
.ds EM
