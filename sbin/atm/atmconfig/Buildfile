# Copyright (c) 2001-2003
#	Fraunhofer Institute for Open Communication Systems (FhG Fokus).
#	All rights reserved.
# Author: Harti Brandt <brandt@fokus.gmd.de>
#
# $FreeBSD$

PROG = atmconfig

SRCS = \
	atmconfig_device.c \
	diag.c \
	main.c \
	natm.c

CFLAGS += -I${.OBJDIR}

LDADD =	-lbsnmp

.if ${MACHINE_ARCH} == "arm"
WARNS ?= 3
.else
WARNS ?= 6
.endif

FILES =	atmconfig.help atmconfig_device.help
FILESDIR = /usr/share/doc/atm

SNMP_ATM_DEF = \
	${BSDSRCTOP}/contrib/ngatm/snmp_atm/atm_tree.def \
	${BSDSRCTOP}/usr.sbin/bsnmpd/modules/snmp_atm/atm_freebsd.def

BUILTFILES = oid.h
oid.h: atm_oid.list ${SNMP_ATM_DEF}
	cat ${SNMP_ATM_DEF} | gensnmptree -e `tail -n +2 ${.CURDIR}/atm_oid.list` \
		> ${.TARGET}

SRCDIRDEP= contrib/ngatm/snmp_atm usr.sbin/bsnmpd/modules/snmp_atm
DIRDEP= gnu/lib/csu gnu/lib/libgcc include include/arpa include/machine lib/csu/MACHINE_ARCH lib/libbsnmp/libbsnmp lib/libc lib/libnetgraph stage sys/MACHINE_ARCH/include sys/dev/utopia sys/net sys/netgraph sys/netinet sys/netinet6 sys/netnatm sys/sys
.include <bsd.prog.mk>
