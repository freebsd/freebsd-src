# $FreeBSD$

LIBDIR = ${STAGEDIR}/lib
INCDIR = ${STAGEDIR}/usr/include

LIB = c
SHLIB_MAJOR = 7
WARNS ?= 2
CFLAGS +=-I${.CURDIR}/include
CFLAGS +=-I${.CURDIR}/${MACHINE_ARCH}
INSTALL_PIC_ARCHIVE =

# Define (empty) variables so that make doesn't give substitution
# errors if the included makefiles don't change these:
MDSRCS=
MISRCS=
MDASM=
MIASM=
NOASM=

.if exists(${.CURDIR}/${MACHINE_ARCH}/Buildfile.inc)
.include "${.CURDIR}/${MACHINE_ARCH}/Buildfile.inc"
.endif
.include "${.CURDIR}/db/Buildfile.inc"
.include "${.CURDIR}/compat-43/Buildfile.inc"
.include "${.CURDIR}/gdtoa/Buildfile.inc"
.include "${.CURDIR}/gen/Buildfile.inc"
.include "${.CURDIR}/gmon/Buildfile.inc"
.include "${.CURDIR}/inet/Buildfile.inc"
.include "${.CURDIR}/isc/Buildfile.inc"
.include "${.CURDIR}/locale/Buildfile.inc"
.include "${.CURDIR}/nameser/Buildfile.inc"
.include "${.CURDIR}/net/Buildfile.inc"
.include "${.CURDIR}/nls/Buildfile.inc"
.include "${.CURDIR}/posix1e/Buildfile.inc"
.if ${MACHINE_ARCH} != "amd64" && \
    ${MACHINE_ARCH} != "ia64" && \
    ${MACHINE_ARCH} != "sparc64"
.include "${.CURDIR}/quad/Buildfile.inc"
.endif
.include "${.CURDIR}/regex/Buildfile.inc"
.include "${.CURDIR}/resolv/Buildfile.inc"
.include "${.CURDIR}/stdio/Buildfile.inc"
.include "${.CURDIR}/stdlib/Buildfile.inc"
.include "${.CURDIR}/stdtime/Buildfile.inc"
.include "${.CURDIR}/string/Buildfile.inc"
.include "${.CURDIR}/sys/Buildfile.inc"
.include "${.CURDIR}/rpc/Buildfile.inc"
.include "${.CURDIR}/uuid/Buildfile.inc"
.include "${.CURDIR}/xdr/Buildfile.inc"
.if ${MACHINE_ARCH} == "arm"
.include "${.CURDIR}/softfloat/Buildfile.inc"
.endif
CFLAGS += -DYP
.include "${.CURDIR}/yp/Buildfile.inc"
CFLAGS += -DHESIOD
CFLAGS += -DNS_CACHING

VERSION_DEF = ${.CURDIR}/Versions.def
SYMBOL_MAPS = ${SYM_MAPS}
CFLAGS += -DSYMBOL_VERSIONING

# If there are no machine dependent sources, append all the
# machine-independent sources:
.if empty(MDSRCS)
SRCS +=	${MISRCS}
.else
# Append machine-dependent sources, then append machine-independent sources
# for which there is no machine-dependent variant.
SRCS +=	${MDSRCS}
.for _src in ${MISRCS}
.if ${MDSRCS:R:M${_src:R}} == ""
SRCS +=	${_src}
.endif
.endfor
.endif

NOT_MACHINE_ARCH = host

.include <bsd.lib.mk>
