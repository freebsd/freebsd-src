# $FreeBSD$

PROG = callbootd

SRCS = callbootd.c 

GENSRCS = \
	bootparam_prot_clnt.c \
	bootparam_prot_xdr.c

GENHDRS = bootparam_prot.h

SRCS += ${GENSRCS}

CFLAGS += -I.

.if exists(${COMMONSTAGEDIR}/usr/include/rpcsvc/bootparam_prot.x)
RPCSRC = ${COMMONSTAGEDIR}/usr/include/rpcsvc/bootparam_prot.x
.else
RPCSRC = ${COMMONSSHAREDTAGEDIR}/usr/include/rpcsvc/bootparam_prot.x
.endif

bootparam_prot_clnt.c: ${RPCSRC}
	${RPCGEN} -C -l -o ${.TARGET} ${RPCSRC}

bootparam_prot_xdr.c: ${RPCSRC}
	${RPCGEN} -C -c -o ${.TARGET} ${RPCSRC}

bootparam_prot.h: ${RPCSRC}
	${RPCGEN} -C -h -o ${.TARGET} ${RPCSRC}

.include <bsd.prog.mk>
