#!/bin/sh
# $FreeBSD: src/release/picobsd/custom/mfs/etc/rc,v 1.1 1999/12/10 21:52:17 grog Exp $
### WARNING !!!!!! #####
# We remove this file during execution (see EOF).
# Awful things happen if its size is > 1024B

stty status '^T'

trap : 2
trap : 3

HOME=/; export HOME
PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin
export PATH

trap "echo 'Reboot interrupted'; exit 1" 3

### Special setup for two floppy PICOBSD ###
echo ""
echo "-------------------------------------------"
echo "  Please wait. The system is coming up..."
echo "-------------------------------------------"
echo ""
echo "Reading /etc from startup floppy..."
mount -o rdonly /dev/fd0a /start_floppy
cd /etc
tar zxvf /start_floppy/etc.tar.gz
cd /etc
pwd_mkdb -p ./master.passwd
umount /start_floppy
echo "Ok. (Now you can remove floppy if you like)"
echo ""
. rc
exit 0
