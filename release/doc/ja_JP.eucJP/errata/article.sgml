<!--
    FreeBSD Japanese Documentation Project

    $FreeBSD$
    Original revision: 1.38.2.1
-->

<!-- 
	FreeBSD errata document.  Unlike some of the other RELNOTESng
	files, this file should remain as a single SGML file, so that
	the dollar FreeBSD dollar header has a meaningful modification
	time.  This file is all but useless without a datestamp on it,
	so we'll take some extra care to make sure it has one.

	(If we didn't do this, then the file with the datestamp might
	not be the one that received the last change in the document.)

-->

<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % man PUBLIC "-//FreeBSD//ENTITIES DocBook Manual Page Entities//EN">
%man;
<!ENTITY % ja-authors PUBLIC  "-//FreeBSD//ENTITIES DocBook Author Entities//JA">
%ja-authors;
<!ENTITY % authors PUBLIC  "-//FreeBSD//ENTITIES DocBook Author Entities//EN">
%authors;
<!ENTITY % ja-mlists PUBLIC "-//FreeBSD//ENTITIES DocBook Mailing List Entities//JA">
%ja-mlists;
<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;
]>

<article>
  <articleinfo>

    <title>&os;
<![ %release.type.snapshot [
    &release.prev;
]]>
<![ %release.type.release [
    &release.current;
]]>
    Errata</title>

    <corpauthor>&os; プロジェクト</corpauthor>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <holder role="mailto:doc@FreeBSD.org">FreeBSD ドキュメンテーションプロジェクト</holder>
    </copyright>
  </articleinfo>

  <abstract>

    <para>この文書は &os;
<![ %release.type.snapshot [
      &release.prev;
]]>
<![ %release.type.release [
       &release.current;
]]>
      の公開後に判明した重要な情報、あるいはリリース工程の終盤で判明し、
      リリース文書に収録できなかった重要な情報が書かれている errata リスト (正誤表) です.
      これにはセキュリティ勧告および,
      システムの運用・利用に影響を与えるような関連ソフトウェア,
      関連文書の更新情報も含まれています.
      このバージョンの &os; をインストールする前には必ず,
      最新の errata を参照するようにしてください.</para>

    <para>これは &os; 
<![ %release.type.snapshot [
      &release.prev;
]]>
 <![ %release.type.release [
      &release.current;
]]>
      用の errata 文書です。&os; 5.1-RELEASE の公開までの間、保守されます。</para>

    <para>&release.branch;
      ブランチは最新のブランチポイントであり,
      ここからはまだリリース版が公開されていません.
      そのため現時点の &release.current; には,
      errata がありません.
      (最初のリリースは &release.next; になる予定です)
      このファイルは新たに作成されたブランチ用のひな型として用意されているものです.
      (当然ながら, この注意書きは他のブランチにある errata
      文書には存在しません)</para>
  </abstract>

  <sect1 id="intro">
    <title>はじめに</title>

    <para>この errata 文書には &os;
<![ %release.type.snapshot [
      &release.prev;
]]>
<![ %release.type.release [
      &release.current;
]]>
      に関する
      <quote>最新の障害情報</quote> が書かれています.
      この文書を読み,
      このバージョンのインストール前にリリース公開後に既に発見・修正された問題点について
      知っておいてください.</para>

    <para>リリースの公開 (たとえば CDROM による配布) には
      errata 文書が同梱されていることがあります.
      しかし, それは当然ながらその時点のものであり,
      最新のものと同じであるとは限りません.
      インターネット上に置かれている
      このリリースに対応した <quote>errata 文書の最新版</quote>
      を参照するようにしてください.
      errata 文書は <ulink url="http://www.FreeBSD.org/releases/"></ulink>
      をはじめ, 最新の状態を維持している各ミラーサイトに置かれています.</para>

    <para>&os; &release.branch; のソーススナップショット,
      バイナリスナップショットにも,
      (スナップショット作成時の) 最新版の
      errata 文書が含まれています.</para>

    <para>&os; CERT セキュリティ勧告の全リストは,
      <ulink url="http://www.FreeBSD.org/security/"></ulink>
      もしくは
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/"></ulink>
      を参照してください.</para>
  </sect1>

  <sect1 id="security">
    <title>セキュリティ勧告</title>

<![ %release.type.release [
    <para>セキュリティ勧告は発行されていません。</para>
]]>

<![ %release.type.snapshot [
    <para><application>CVS</application> には、CVS サーバ上で任意のコマンドが実行できるという、
      リモートから悪用可能なセキュリティ上の弱点が存在します。
      問題の詳細は、セキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:01.cvs.asc">FreeBSD-SA-03:01</ulink>
      をご覧ください。</para>

    <para><application>OpenSSL</application> には、特定の条件下で、
      クライアントとサーバ間で交換されるネットワークメッセージを
      横取り・置き換えできるような強い影響力を持つ攻撃者が
      タイミングベースの攻撃を行ない平文を得ることができる可能性があります。
      この問題は、&os; &release.current; では
      <application>OpenSSL</application> 0.9.7 に更新して、
      セキュリティブランチでは
      <application>OpenSSL</application> 0.9.6i を統合して修正されました。
      詳細は、セキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:02.openssl.asc">FreeBSD-SA-03:02</ulink>
      をご覧ください。</para>

    <para><quote>syncookies</quote> 機能の実装を悪用することで、
      この機能で使われている共有秘密鍵を復元することができる可能性があります。
      これは TCP SYN flood を用いたサービス妨害攻撃への耐性を低下させます。
      回避方法と解決方法は、セキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:03.syncookies.asc">FreeBSD-SA-03:03</ulink>
      をご覧ください。</para>

    <para><application>sendmail</application> のヘッダ解析時のオーバフローにより、
      リモートの攻撃者は、&man.sendmail.8; に
      sendmail を起動したユーザ (通常は <username>root</username>) の権限で
      任意のコードを実行させるような
      特殊な細工を施したメッセージを作成することができます。
      修正パッチの場所を含む詳細は、セキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:04.sendmail.asc">FreeBSD-SA-03:04</ulink>
      および <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:07.sendmail.asc">FreeBSD-SA-03:07</ulink>
      に記載されています。</para>

    <para>XDR エンコーダ / デコーダの実装に、
      リモートからサービス妨害攻撃が可能になるような
      不正な境界チェックを行なうコードが含まれていました。
      バグ修正を含む詳細は、セキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:05.xdr.asc">FreeBSD-SA-03:05</ulink>
      をご覧ください。</para>

    <para><application>OpenSSL</application> に
      二つの弱点
      (訳注: RSA のタイミング攻撃と Klima-Pokorny-Rosa 攻撃)
      が発見されました。
      回避方法と問題を修正するパッチについての情報は、セキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:06.openssl.asc">FreeBSD-SA-03:06</ulink>
      をご覧ください。</para>
]]>
  </sect1>

  <sect1 id="late-news">
    <title>最新情報</title>

<![ %release.type.release [
    <para>まだ情報はありません。</para>
]]>

<![ %release.type.snapshot [
    <bridgehead renderas="sect3">GEOM</bridgehead>

    <para>カーネルにある &man.geom.4;
      ベースのディスクパーティションコードは、
      使用中のパーティションの上書きを禁止しています。
      たとえば、<command>disklabel -B</command>
      コマンドを使ってディスクの起動ブロックを更新することはできません。
      これは、起動ブロックが記録されている領域と
      <literal>a</literal> パーティションの領域が重なっているためです。
      これを回避するには、CDROM や fixit
      フロッピなどの他のディスクから起動するとよいでしょう。</para>

    <bridgehead renderas="sect3">&man.dump.8;</bridgehead>

    <para>512 バイトより大きいセクタ長を持ったディスクメディア (たとえば
      &man.gbde.4; で暗号化されたディスク) を使っている場合、
      &man.dump.8; プログラムがそのセクタ長を認識しないため、
      そのパーティションのダンプをとることができません。
      これを回避する法の一つとして、ファイルシステム全体を
      raw フォーマットでコピーし、
      そのコピーからダンプをとるという方法があります。
      たとえば次のようにすると、
      ファイルシステムを通常ファイルにダンプすることが可能です。

      <screen>&prompt.root; <userinput>dd if=/dev/ad0s1d.bde of=/junk/ad0.dd bs=1m</userinput>
&prompt.root; <userinput>dump 0f - /junk/ad0.dd | ...</userinput></screen>

    <para>より簡単な方法としては、バックアップに
      &man.tar.1; もしくは &man.cpio.1; を使うというのもあげられるでしょう。</para>

    <bridgehead renderas="sect3">&man.mly.4;</bridgehead>

    <para>&os; 4.7-RELEASE で正常に動作していた
      &man.mly.4; で構成した RAID アレイに
      &os; 5.0 スナップショット版をインストールする際、
      システムがハングアップするという事例がいくつか報告されていました。
      これらの問題は、&os; &release.current; で修正されました。</para>

    <bridgehead renderas="sect3">NETNCP/Netware ファイルシステム対応</bridgehead>

    <para>NETNCP と nwfs はまだ KSE に対応していないため、動作しません。
      これらの問題は、&os; &release.current; で修正されました。</para>

    <bridgehead renderas="sect3">&man.iir.4; コントローラ</bridgehead>

    <para>&man.iir.4; コントローラはインストール時に正常に認識されますが、
      ディスクデバイスが認識されないという不具合があります。</para>

    <bridgehead renderas="sect3">&man.truss.1; の競合状態</bridgehead>

    <para>&man.truss.1; には、デバッグの開始時に
      起動前のデバック対象プロセスに接続できなくなるような競合状態があるようです。
      症状は、&man.truss.1; が「デバッグ対象のプロセスに対応する
      &man.procfs.5; ノードを open できない」というエラーを表示する、
      というものです。また、&man.truss.1; には、
      &man.execve.2; が <literal>ENOENT</literal>
      を返す時にハングアップするというバグも確認されています。
      さらに、もう一つの競合状態が原因で、&man.truss.1;
      の起動時に時々 <errorname>PIOCWAIT:
      Input/output error</errorname> というエラーが表示されます。
      この問題の修正には、プロセスの実行処理を大きく変更する必要があるため、
      5.0 の公開以降に行なわれる予定です。</para>

    <bridgehead renderas="sect3">インストーラのディスクパーティション設定</bridgehead>

    <para>&man.sysinstall.8;
      のディスクパーティション設定にいくつかバグが報告されています。
      詳細が判明している問題の一つに、i386 版の &man.sysinstall.8; で
      FDISK パーティションのパーティションタイプを変更した後、
      ディスクの空き領域の再計算がなされないというものがあります。</para>

    <bridgehead renderas="sect3">文書化の遅れ</bridgehead>

    <para>(FAQ やハンドブックなどの) 文書のいくつかは、
      &os; &release.current; の機能を反映した更新が行なわれていません。
      たとえば &man.gbde.8; や新しい <quote>fast IPsec</quote>
      実装などについての文書は十分な整備されておらず、
      今後の課題となっています。</para>

    <bridgehead renderas="sect3">SMB ファイルシステム</bridgehead>

    <para>smbfs 共有をアンマウントしようとした時に、
      そのマウントポイントが使用中でないにもかかわらず、
      <errorname>Device busy</errorname> というエラーが出力されることがあります。
      これを回避する一つの方法は、成功するまでアンマウントを繰り返すことです。
      この問題は &release.current; で修正されました。</para>

    <para>smbfs 共有を強制アンマウント (<command>umount -f</command>)
      した時に、カーネルがパニックを起こす可能性があります。
      この問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3">&man.fstat.2;</bridgehead>

    <para>connect されたソケットファイル記述子を指定して
      &man.fstat.2; を呼び出すと、
      <varname>struct stat</varname> 構造体の
      <varname>st_size</varname> メンバ変数に、
      読み込み可能なバイト数が返されます。
      しかし TCP ソケットでは、 <varname>st_size</varname> が常に
      <literal>0</literal> を返すというバグがあります。
      この問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3">カーネルイベントキュー</bridgehead>

    <para>&man.kqueue.2; <literal>EVFILT_READ</literal> フィルタは、
      TCP ソケットから読み込み可能なバイト数を、実際の値に関わらず
      <literal>0</literal> と報告するバグが含まれています。
      <literal>EVFILT_READ</literal> の
      <literal>NOTE_LOWAT</literal> フラグも、TCP
      ソケットに対する動作に不具合があります。
      この問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3">POSIX 名前付きセマフォ</bridgehead>

    <para>&os; &release.prev; は POSIX 名前付きセマフォに対応していますが、
      その実装は、&man.sem.open.3; で同じプロセスから同じセマフォを
      複数回オープンする処理に致命的なバグを含んでおり、
      &man.sem.close.3; を呼び出したプログラムがクラッシュする可能性があります。
      この問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3"><filename>/dev/tty</filename>
      の許可属性</bridgehead>

    <para>&os; &release.prev; には、
      <filename>/dev/tty</filename>
      の許可属性の処理に小さなバグが含まれています。
      <username>root</username> 以外、<groupname>tty</groupname>
      グループに含まれていないユーザとしてログインし、その後に
      &man.su.1; を使って他の <username>root</username>
      以外のユーザに切り替えた場合、
      <filename>/dev/tty</filename> が開けないため
      &man.ssh.1; が動作しません。
      この問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3">&man.growfs.8;</bridgehead>

    <para>&man.growfs.8; は &man.vinum.4; ボリュームでは (おそらく &man.geom.4;
      エンティティでも) 動作しなくなっています。
      &man.growfs.8; はディスクラベルを検査するのですが、
      これらのサブシステムはそのためのディスクラベルを用意しないからです。</para>

    <bridgehead renderas="sect3">IPFW</bridgehead>

    <para>&man.ipfw.4; の <literal>skipto</literal> ルールは、
      <literal>log</literal> キーワードと組み合わせると動作しません。
      また、&man.ipfw.4; の <literal>uid</literal> ルールも適切に動作しません。
      これらの問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3">パスワードと &man.adduser.8;</bridgehead>

    <para>&man.adduser.8; は、
      シェルの特殊文字を含むパスワードをユーザに設定する処理を
      正しく行なうことができません。
      この問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3">&man.xl.4;</bridgehead>

    <para>&man.xl.4; ドライバには、
      インタフェースの初期化を行なう際にカーネルパニック
      (や、その他の問題) を引き起こす、
      タイミングに関連するバグが含まれています。
      この問題は、&release.current; で修正されました。</para>

    <bridgehead renderas="sect3">ISC DHCP</bridgehead>

    <para><application>ISC DHCP</application> がバージョン
      3.0.1rc11 に更新されました。
      実際に更新が行なわれたのは &os;
      &release.prev; だったのですが、
      リリースノートの記載忘れだったようです。</para>

    <bridgehead renderas="sect3">&man.amd.8;
      の相互運用性</bridgehead>

    <para>&release.prev; における非ブロッキング RPC コードには、バグが含まれています。
      このバグによる最も大きな影響に、&release.prev; が動作している
      NFS サーバ上のマウントポイントを、&man.amd.8;
      を使ってマウントすることができないというものがあります。
      このバグは &release.current; で修正されました。</para>

    <bridgehead renderas="sect3">nsswitch</bridgehead>

    <para><application>nsswitch</application>
      に対応したことを記載したリリースノートには、
      従来のリゾルバの設定ファイル名に誤りがありました。
      正しくは <filename>/etc/host.conf</filename> です。</para>

    <bridgehead renderas="sect3">Mailman</bridgehead>

    <para>最近になって、メーリングリストが majordomo から変更され、
      Mailman リストサーバを使うようになりました。
      この新しいメーリングリストに関する詳細は、
      <ulink url="http://www.FreeBSD.org/mailman/listinfo/">FreeBSD
      Mailman Info Page</ulink> をご覧ください。</para>
]]>
  </sect1>
</article>
