<!--
The FreeBSD Russian Documentation Project

$FreeBSD$
$FreeBSDru: frdp/release/doc/ru_RU.KOI8-R/installation/common/install.sgml,v 1.7 2005/04/14 13:30:11 den Exp $

Original revision: 1.27.2.3

install.sgml

This file has architecture-dependent installation instructions, culled
from {alpha,i386}/INSTALL.TXT.

-->

<sect1 id="install">
  <title>Установка &os;</title>

  <para>Этот раздел описывает процесс установки новой системы &os;.
    Особое внимание уделено получению дистрибутива &os; &release.current;
    и началу процедуры установки.  Глава <ulink
    url="&url.books.handbook;/install.html"><quote>Установка
    FreeBSD</quote></ulink> <ulink
    url="&url.books.handbook;/">Руководства
    FreeBSD</ulink> предоставляет более подробную информацию о самой
    программе установке, включая пошаговую инструкцию по установке
    с иллюстрациями.</para>

  <para>Если вы обновляете предыдущий релиз &os;, ознакомьтесь с
    <xref linkend="upgrading">, где находятся инструкции по
    обновлению.</para>

  <sect2 id="getting-started">
    <title>Перед установкой</title>

    <para>Возможно наиболее важным действием, которое должно быть выполнено
      перед установкой, является чтение различных инструкций, поставляемых
      с &os;.  Обзор документов, поставляемых с этим релизом &os;, можно
      найти в <filename>README.TXT</filename>, который обычно находится
      там же, где и этот файл; большинство таких документов (информация
      о релизе, список совместимого оборудования) доступны также из меню
      Documentation программы установки.</para>

    <para>Он-лайн версии &os; <ulink
      url="&url.books.faq;/">FAQ</ulink> и
      <ulink
      url="&url.books.handbook;/">Handbook</ulink>
      доступны также с <ulink url="&url.base;/ru/">веб сайта
      Проекта FreeBSD</ulink>, если у вас есть подключение к интернет.</para>

    <para>Этот набор документов может показаться сложным, но время,
      потраченное на их чтение, окупится многократно.  Ознакомление с
      доступными ресурсами также может помочь в случае проблем при
      установке.</para>

    <para>Даже правильные действия иногда приводят к неудаче, так что
      если вы столкнулись с проблемами, обратитесь к <xref linkend="trouble">,
      где находится информация по решению проблем.  Вам также понадобится
      прочесть свежую копию файла <filename>ERRATA.TXT</filename> перед
      установкой, он предупредит вас о проблемах, которые были обнаружены
      за время существования данного релиза.</para>

    <important>
      <para>Хотя &os; уделяет основное внимание предотвращению
	потери данных, все же более чем возможна
	<emphasis>потеря всех данных на диске</emphasis>
	при ошибке во время установки.  Не переходите к
	последнему меню установки &os; до тех пор, пока не
	было выполнено резервное копирование важных данных.</para>
    </important>
  </sect2>

  <sect2>
    <title>Требования к аппаратному обеспечению</title>

<!-- i386/pc98 text starts here -->

    <para arch="i386,pc98">&os; для &arch.print; для установки и работы
      требуется 486 процессор или выше (хотя с другим ядром &os; может
      работать на процессорах 386), как минимум 24&nbsp;мегабайт оперативной
      памяти.  Вам потребуется как
      минимум 150MB свободного места на жестком диске для минимальной
      установки.  Ниже дана информация по урезанию существующего
      раздела DOS для установки &os;.</para>

<!-- alpha text starts here -->

    <para arch="alpha">&os; для &arch.print; поддерживает платформы,
      описанные в <filename>HARDWARE.TXT</filename>.</para>

    <para arch="alpha">Вам потребуется отдельный диск для &os;/alpha.
      На данный момент совместное использование диска с другой операционной
      системой невозможно.  Этот диск должен быть подключен к SCSI
      контроллеру, поддерживаемому SRM firmware или к IDE контроллеру,
      если загрузка с IDE дисков поддерживается.</para>

    <para arch="alpha">Корневая файловая система ОБЯЗАТЕЛЬНО должна быть
      первым разделом (раздел <literal>a</literal>) на диске для,
      чтобы стала возможной загрузка.</para>

    <para arch="alpha">Вам потребуется firmware SRM консоли для вашей
      платформы.  В отдельных случаях возможно переключение между
      AlphaBIOS (или ARC) firmware и SRM.  В других потребуется загрузка
      нового firmware с веб сайта поставщика оборудования.</para>

<!-- sparc64 text starts here -->

    <para arch="sparc64">&os; для &arch.print; поддерживает платформы,
      описанные в <filename>HARDWARE.TXT</filename>.</para>

    <para arch="sparc64">Вам потребуется отдельный диск для &os;/sparc64.
      На данный момент совместное использование диска с другой операционной
      системой невозможно.</para>

<!-- amd64 text starts here -->
    <para arch="amd64">&os; для &arch.print; работает с процессорами
      Athlon64, Athlon64-FX, Opteron или выше.</para>

    <para arch="amd64">Если ваш компьютер основан на
      nVidia nForce3 Pro-150, вам НЕОБХОДИМО использовать BIOS setup для
      выключения IO APIC.  Если соответствующий параметр отсутствует,
      вам скорее всего потребуется выключить ACPI.  В чипсете Pro-150
      есть ошибки, для которых мы еще не нашли обходного пути.</para>

<!-- generic text starts here -->

    <para>Если вы не знакомы с настройкой оборудования для &os;,
      обязательно прочтите файл <filename>HARDWARE.TXT</filename>;
      в нем содержится важная информация по оборудованию, поддерживаемому
      &os;.</para>
  </sect2>

  <sect2 id="floppies">
    <title>Инструкции по созданию дискет</title>

    <para arch="i386,alpha,pc98">В зависимости от способа установки &os;,
      вам может потребоваться создание набора дискет (обычно трех)
      для начала процесса установки.  Этот раздел кратко описывает
      как создать эти диски с установочного CDROM или из интернет.
      Обратите внимание, что в общем случае установки &os; с CDROM
      на компьютере, поддерживающем загрузочные CDROM, этот шаг не
      требуется и может быть пропущен.</para>

    <para arch="i386,alpha">Для большинства установок с CDROM или по сети,
      вам потребуются скопировать образы дискет
      <filename>boot.flp</filename> и <filename>kern<replaceable>X</replaceable>.flp</filename>
      из каталога <filename>floppies/</filename> (для 1.44MB дискет).</para>

    <para arch="pc98">Для обычной установки с CDROM или по сети, вам
      потребуется скопировать образы дискет <filename>boot.flp</filename>
      и <filename>kern<replaceable>X</replaceable>.flp</filename> из каталога
      <filename>floppies/</filename> (для 1.44MB дискет) или
      <filename>boot-small.flp</filename> и
      <filename>kern-small.flp</filename> (для 1.2MB дискет).</para>

    <para arch="i386,alpha,pc98">Получить эти образы по сети просто.
      Загрузите
      <replaceable>release</replaceable><filename>/floppies/boot.flp</filename>
      и все
      <replaceable>release</replaceable><filename>/floppies/kern<replaceable>X</replaceable>.flp</filename>
      с <ulink url="&release.url;"></ulink> или с одного из зеркал,
      перечисленных в разделе <ulink
      url="&url.books.handbook;/mirrors-ftp.html">FTP
      зеркала</ulink> Руководства или, или на страницах
      <ulink url="http://mirrorlist.FreeBSD.org/"></ulink>.</para>

    <para arch="i386,alpha">Возьмите несколько чистых,
      только что отформатированных
      дискет и поместите образ <filename>boot.flp</filename> на первую,
      а <filename>kern<replaceable>X</replaceable>.flp</filename> на остальные.  Эти образы
      <emphasis>не</emphasis> DOS файлы.  Вы не можете просто скопировать
      их на DOS или UFS дискету как обычные файлы, потребуется
      размещение образов на диске с помощью <filename>fdimage.exe</filename>
      под DOS (находится в каталоге <filename>tools</filename> на CDROM
      или на FTP зеркалах &os;) или с помощью команды &man.dd.1;
      в UNIX.</para>

    <para arch="pc98">Возьмите несколько чистых,
      только что отформатированных
      дискет и поместите образ <filename>boot.flp</filename> на первую,
      а <filename>kern<replaceable>X</replaceable>.flp</filename> на остальные.  Эти образы
      <emphasis>не</emphasis> DOS файлы.  Вы не можете просто скопировать
      их на DOS или UFS дискету как обычные файлы, потребуется
      размещение образов на диске с помощью <filename>rawrite.exe</filename>
      под DOS (находится в каталоге <filename>tools</filename> на CDROM
      или на FTP зеркалах &os;) или с помощью команды &man.dd.1;
      в UNIX.</para>

    <para arch="i386,alpha,pc98">Например, для создания дискеты с образом ядра
      под DOS, вам потребуется выполнить примерно такую команду:</para>

    <screen arch="i386,alpha"><prompt>C></prompt> <userinput>fdimage boot.flp a:</userinput></screen>
    <screen arch="pc98"><prompt>A></prompt> <userinput>rawrite</userinput></screen>

    <para arch="i386,alpha">Предполагается, что вы скопировали
      <filename>fdimage.exe</filename> и <filename>boot.flp</filename>
      в отдельный каталог.  Для файлов <filename>kern<replaceable>X</replaceable>.flp</filename>
      действия будут аналогичны.</para>

    <para arch="pc98">Предполагается, что вы скопировали
      <filename>rawrite.exe</filename> и <filename>boot.flp</filename>
      в отдельный каталог.  Для файлов <filename>kern<replaceable>X</replaceable>.flp</filename>
      действия будут аналогичны.</para>

    <para arch="i386,alpha,pc98">Если вы создаете загрузочную дискету на
      компьютере UNIX, используйте команду:</para>

    <screen arch="i386,alpha">&prompt.root; <userinput>dd if=floppies/boot.flp of=/dev/rfd0</userinput></screen>
    <screen arch="pc98">&prompt.root; <userinput>dd if=floppies/boot.flp of=/dev/rfd0.1440</userinput></screen>

    <para arch="i386,alpha">или</para>

    <screen arch="i386,alpha">&prompt.root; <userinput>dd if=floppies/boot.flp of=/dev/fd0</userinput></screen>

    <para arch="i386,alpha,pc98">или</para>

    <screen arch="i386,alpha">&prompt.root; <userinput>dd if=floppies/boot.flp of=/dev/floppy</userinput></screen>
    <screen arch="pc98">&prompt.root; <userinput>dd if=floppies/boot-small.flp of=/dev/rfd0.1200</userinput></screen>

    <para arch="i386,alpha,pc98">в зависимости от имеющегося оборудования
      и операционной системы (различные версии UNIX по-разному именуют
      устройства гибких дисков).</para>

    <para arch="amd64">Установка с дискеты не поддерживается в
      &os;/&arch;.</para>
  </sect2>

  <sect2 id="start-installation">
    <title>Установка &os; с CDROM или через интернет</title>

<!-- i386/pc98 text starts here -->

    <para arch="i386,amd64">Проще всего выполнить установку с CDROM.
      Если у вас есть поддерживаемый привод CDROM и установочный
      CD &os;, существует два способа установки с него:
      <itemizedlist>
	<listitem>
	  <para>Если ваша система поддерживает стандарт <quote>CDBOOT</quote>
	    загрузочных CDROM и загрузка с CD включена, просто поместите
	    установочный CD &os; в привод и загрузите систему для начала
	    установки.</para>
	</listitem>
	<listitem>
	  <para>Создайте набор загрузочных дискет &os; из каталога
	    <filename>floppies/</filename> дистрибутива &os;.
	    Прочтите <xref linkend="floppies"> с более
	    подробной информацией по созданию загрузочных дискет
	    под различными операционными системами.  Затем просто
	    загрузитесь с первой дискеты, и вскоре начнется установка
	    &os;.</para>
	</listitem>
      </itemizedlist>
    </para>

    <para arch="pc98">Проще всего выполнить установку с CDROM.
      Если у вас есть поддерживаемый привод CDROM и установочный
      CD &os;, существует следующий способ установки с него:
      <itemizedlist>
	<listitem>
	  <para>Создайте набор загрузочных дискет &os; из каталога
	    <filename>floppies/</filename> дистрибутива &os;.
	    Прочтите <xref linkend="floppies"> с более подробной
	    информацией по созданию загрузочных дискет под различными
	    операционными системами.  Затем просто загрузитесь с первой
	    дискеты, и вскоре начнется установка &os;.</para>
	</listitem>
      </itemizedlist>
    </para>

    <para arch="i386">Если у вас нет CDROM (или ваш компьютер не
      поддерживает загрузку с CDROM), вы можете просто выполнить установку
      через сеть, используя PPP, SLIP или выделенное соединение.
      Начните установку, создав набор загрузочных дискет &os;
      из файлов <filename>floppies/boot.flp</filename> и
      <filename>floppies/kern<replaceable>X</replaceable>.flp</filename>, используя инструкции
      в <xref linkend="floppies">.  Перезагрузите компьютер,
      диск <filename>boot.flp</filename>; после запроса вставьте
      последовательно остальные диски.  Прочтите
      <xref linkend="ftpnfs"> с дополнительной информацией по установке
      через FTP или NFS.</para>

    <para arch="pc98">Если у вас нет CDROM, вы можете просто выполнить
      установку через сеть, используя PPP, SLIP или выделенное соединение.
      Начните установку, создав набор загрузочных дискет &os;
      из файлов <filename>floppies/boot.flp</filename> и
      <filename>floppies/mfsroot.flp</filename>, используя инструкции
      в <xref linkend="floppies">.  Перезагрузите компьютер,
      диск <filename>kern.flp</filename>; после запроса вставьте
      последовательно остальные диски.  Прочтите
      <xref linkend="ftpnfs"> с дополнительной информацией по установке
      через FTP или NFS.</para>

<!-- alpha text starts here -->

    <para arch="alpha">Проще всего выполнить установку с CDROM.
      Если у вас есть поддерживаемый привод CDROM и установочный
      CD &os;, то вы можете загрузить &os; непосредственно с него.
      Вставьте диск в привод и наберите следующую команду для
      начала установки (подставив другое имя CDROM если
      потребуется):</para>

    <screen arch="alpha">&gt;&gt;&gt;<userinput>boot dka0</userinput></screen>

    <para arch="alpha">В качестве альтернативы вы можете начать установку
      с дискеты.  Для начала вам потребуется создать набор загрузочных
      дискет из <filename>floppies/boot.flp</filename> и файлов
      <filename>floppies/kern<replaceable>X</replaceable>.flp</filename>, используя инструкции из
      <xref linkend="floppies">.  Вставьте <filename>boot.flp</filename>,
      для запуска установки из приглашения SRM консоли
      (<literal>&gt;&gt;&gt;</literal>) наберите следующую команду:</para>

    <screen arch="alpha">&gt;&gt;&gt;<userinput>boot dva0</userinput></screen>

    <para arch="alpha">Вставьте остальные дискеты
      когда появится приглашение и после загрузки появится первое
      окно программы установки.</para>

<!-- sparc64 text starts here -->

    <para arch="sparc64">Большинство систем &arch; настроены для
      автоматической загрузки с диска.  Для установки &os; вам потребуется
      загрузиться из сети или с CDROM, что требует входа в PROM
      (OpenFirmware).</para>

    <para arch="sparc64">Для этого перегрузите систему и ждите появления
      загрузочного сообщения.  Оно зависит от модели, но должно выглядеть
      примерно так:</para>

    <screen arch="sparc64">Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.</screen>

    <para arch="sparc64">Если после этого сообщения ваша система начинает
      загрузку, потребуется нажать <keycombo
      action="simul"><keycap>L1</keycap><keycap>A</keycap></keycombo>
      или <keycombo
      action="simul"><keycap>Stop</keycap><keycap>A</keycap></keycombo>
      на клавиатуре, или отправить <command>BREAK</command> через
      последовательную консоль (например, используя <command>~#</command>
      в &man.tip.1; или &man.cu.1;) для получения приглашения PROM.
      Оно выглядит примерно так:</para>

    <screenco arch="sparc64">
      <areaspec>
	<area id="prompt-single" coords="1 5">
	<area id="prompt-smp" coords="2 5">
      </areaspec>

      <screen><prompt>ok     </prompt>
<prompt>ok {0} </prompt></screen>

      <calloutlist>
	<callout arearefs="prompt-single">
	  <para>Это приглашение используется на системах с одним
	    CPU.</para>
	</callout>

	<callout arearefs="prompt-smp">
	  <para>Это приглашение используется на системах SMP, цифра
	    показывает число активных CPU.</para>
	</callout>
      </calloutlist>
    </screenco>

    <para arch="sparc64">После этого поместите CDROM в привод и из
      приглашения PROM наберите <command>boot cdrom</command>.</para>

  </sect2>

  <sect2>
    <title>Детальная информация по различным типам установки</title>

    <para>Как только появится первый экран программы установки,
      вы сможете следовать различным меню этой программы.
      Если вы никогда раньше не использовали программу установки
      &os;, вы можете также прочесть некоторую документацию из
      подменю Documentation, как и общие инструкции <quote>Usage</quote>
      из первого меню.</para>

    <note>
      <para>Если вы встретились с затруднениями, нажмите клавишу
	<keycap>F1</keycap> для вызова онлайн документации, относящейся
	к этому разделу.</para>
    </note>

    <para>Если вы никогда раньше не устанавливали &os;, или даже если
      устанавливали, рекомендуемым способом установки является
      <quote>Standard</quote>, поскольку он гарантирует выполнение всех
      наиболее важных пунктов установки.  Если вы хорошо знакомы с
      процессом установки &os; и <emphasis>точно</emphasis> знаете, что
      нужно делать, используйте установку <quote>Express</quote> или
      <quote>Custom</quote>.  Если вы обновляете существующую систему,
      используйте параметр <quote>Upgrade</quote>.</para>

    <para>Программа установки &os; поддерживает непосредственное
      использование дискет, разделов DOS, NFS, UFS, лент и CDROM в качестве
      дистрибутивных носителей; дальнейшие инструкции по установке с каждого
      из этих носителей приведены ниже.</para>

    <para arch="alpha">Как только процедура установки будет завершена, вы
      сможете запустить &os;/&arch; путем набора в приглашении SRM
      примерно следующей команды:</para>

    <screen arch="alpha">&gt;&gt;&gt;<userinput>boot dkc0</userinput></screen>

    <para arch="alpha">Она указывает firmware загружаться с указанного диска.
      Для поиска SRM имен дисков на компьютере, используйте команду
      <literal>show device</literal>:</para>

    <screen arch="alpha">&gt;&gt;&gt;<userinput>show device</userinput>
dka0.0.0.4.0               DKA0           TOSHIBA CD-ROM XM-57  3476
dkc0.0.0.1009.0            DKC0                       RZ1BB-BS  0658
dkc100.1.0.1009.0          DKC100             SEAGATE ST34501W  0015
dva0.0.0.0.1               DVA0
ewa0.0.0.3.0               EWA0              00-00-F8-75-6D-01
pkc0.7.0.1009.0            PKC0                  SCSI Bus ID 7  5.27
pqa0.0.0.4.0               PQA0                       PCI EIDE
pqb0.0.1.4.0               PQB0                       PCI EIDE</screen>

    <para arch="alpha">Этот пример взят с Digital Personal Workstation 433au
      и показывает три диска, подключенных к машине.  Первый это CDROM,
      называющийся <devicename>dka0</devicename>, а другие два диска
      называются <devicename>dkc0</devicename> и
      <devicename>dkc100</devicename> соответственно.</para>

    <para arch="alpha">Вы можете указать какой файл ядра загружать и какие
      параметры загрузки использовать параметрами <option>-file</option>
      и <option>-flags</option>, например:</para>

    <screen arch="alpha"><prompt>&gt;&gt;&gt;</prompt> <userinput>boot -file kernel.old -flags s</userinput></screen>

    <para arch="alpha">Для автоматической загрузки &os;/&arch;, используйте
      следующие команды:</para>

    <screen arch="alpha"><prompt>&gt;&gt;&gt;</prompt> <userinput>set boot_osflags a</userinput>
<prompt>&gt;&gt;&gt;</prompt> <userinput>set bootdef_dev dkc0</userinput>
<prompt>&gt;&gt;&gt;</prompt> <userinput>set auto_action BOOT</userinput></screen>

    <sect3>
      <title>Установка с CDROM по сети</title>

      <para>Если вы просто хотите установить систему с локального привода
	CDROM, прочтите <xref linkend="start-installation">.  Если в вашей
	системе нет привода CDROM и вы хотите использовать CDROM на другой
	системе, к которой у вас есть подключение по сети, существует
	несколько способов чтобы сделать это:</para>

      <itemizedlist>
	<listitem>
	  <para>Если у вас есть возможность установки &os; через FTP
	    непосредственно с CDROM на другом компьютере &os;, это очень
	    просто: убедитесь, что FTP сервер работает и добавьте следующую
	    строку в файл паролей (используя &man.vipw.8;):</para>

	  <screen>ftp:*:99:99::0:0:FTP:/cdrom:/sbin/nologin</screen>

	  <para>На компьютере, где вы производите установку, перейдите
	    к меню Options и установите имя релиза в <literal>any</literal>.
	    Затем вы можете выбрать тип носителя <literal>FTP</literal>,
	    <filename>ftp://<replaceable>machine</replaceable></filename>
	    после выбора <quote>URL</quote> в меню ftp сайтов.</para>

	  <warning>
	    <para>Это позволит любому в локальной сети (или интернет)
	      создавать <quote>анонимные</quote> FTP соединения с
	      этим компьютером, что может быть нежелательно.</para>
	  </warning>
	</listitem>

	<listitem>
	  <para>Если вместо этого вы хотите использовать NFS для
	    непосредственного экспорта содержимого CDROM на компьютер,
	    с которого будет вестись установка, сначала потребуется
	    добавить запись в файл <filename>/etc/exports</filename>
	    (на компьютере, где находится привод CDROM).  Пример ниже
	    позволяет компьютеру <hostid
	    role="hostname">ziggy.foo.com</hostid> смонтировать CDROM
	    во время установки непосредственно через NFS:</para>

	  <screen>/cdrom          -ro             ziggy.foo.com</screen>

	  <para>Конечно, компьютер с CDROM должен быть также настроен
	    в качестве NFS сервера, и если вы не уверены как сделать это,
	    NFS вероятно не лучший выбор для вас, пока вы не прочтете
	    &man.rc.conf.5; и не настроите все правильно.  Предполагая,
	    что эта часть прошла нормально, вы должны ввести:
	    <filename><replaceable>cdrom-host</replaceable>:/cdrom</filename>
	    в качестве пути к NFS компьютеру, где находится дистрибутив,
	    например <filename>wiggy:/cdrom</filename>.</para>
	</listitem>
      </itemizedlist>
    </sect3>

    <sect3>
      <title>Установка с дискет</title>

      <para>Если вам необходимо выполнять установку с дискет, или из-за
	неподдерживаемого оборудования, или потому, что вам нравится
	делать все сложным способом, необходимо сначала подготовить
	дискеты.</para>

      <para>Сначала подготовьте дискеты, как описано в
	<xref linkend="floppies">.</para>

      <para>Затем, внимательно прочтите <xref linkend="layout"> и обратите
	особое внимание на раздел <quote>Distribution Format</quote>,
	поскольку он описывает файлы, которые необходимо поместить на
	дискеты и те, которые вы можете пропустить.</para>

      <para>Затем вам потребуется, как минимум, столько 1.44MB дискет, сколько
	необходимо для вмещения всех файлов из каталога
	<filename>bin</filename> (binary distribution).  Если вы
	подготавливаете эти дискеты под DOS, они <emphasis>должны</emphasis>
	быть отформатированы с использованием команды MS-DOS
	<filename>FORMAT</filename>.  Если вы используете
	Windows, воспользуйтесь командой format из
	Windows File Manager.</para>

      <important>
	<para>Зачастую диски поставляются уже отформатированными.
	  Хотя это удобно, многие проблемы, о которых сообщали пользователи,
	  стали причиной использования неправильно отформатированных
	  носителей.  Переформатируйте их самостоятельно, просто для
	  уверенности.</para>
      </important>

      <para>Если вы создаете дискеты на другом компьютере с &os;,
	форматирование все еще может потребоваться, хотя нет необходимости
	создавать файловую систему DOS на каждой дискете.  Вы можете
	использовать команды &man.disklabel.8; и &man.newfs.8; для
	создания на дискетах файловой системы UFS, что проиллюстрировано
	в следующей последовательности команд:</para>

      <screen>&prompt.root; <userinput>fdformat -f 1440 fd0</userinput>
&prompt.root; <userinput>disklabel -w fd0 floppy3</userinput>
&prompt.root; <userinput>newfs -i 65536 /dev/fd0</userinput></screen>

      <para>После форматирования дискет для DOS или UFS, вам потребуется
	скопировать на них файлы.  Файлы дистрибутива разделены на
	части такого размера, чтобы на каждую дискету помещался один файл.
	Каждый дистрибутивный
	набор должен располагаться на дискете в своем собственном каталоге,
	т.е.: <filename>a:\bin\bin.inf</filename>,
	<filename>a:\bin\bin.aa</filename>,
	<filename>a:\bin\bin.ab</filename>, ...</para>

      <important>
	<para>Файл <filename>bin.inf</filename> также необходимо поместить
	  на первую дискету набора <filename>bin</filename>, поскольку
	  он читается программой установки для определения количества
	  дополнительных частей, которые необходимо объединить в
	  дистрибутивный набор.  При помещении дистрибутивных наборов на
	  дискеты, файл <filename>distname.inf</filename>
	  <emphasis>должен</emphasis> помещаться на первую дискету
	  каждого дистрибутивного набора.</para>
      </important>

      <para>Как только в программе установки появится экран Media,
	выберите <quote>Floppy</quote> и продолжайте установку.</para>
    </sect3>

    <sect3 arch="i386,pc98,amd64">
      <title>Установка с раздела DOS</title>

      <para arch="i386,amd64">Для подготовке к установке с раздела MS-DOS
	вы должны просто скопировать файлы из дистрибутива в каталог
	<filename>FREEBSD</filename> на основном разделе DOS
	(<devicename>C:</devicename>).  Например, для выполнения
	минимальной установки &os; с раздела DOS, используя файлы,
	скопированные с CDROM, вы можете сделать примерно следующее:</para>

      <screen arch="i386,amd64"><prompt>C:\></prompt> <userinput>MD C:\FREEBSD</userinput>
<prompt>C:\></prompt> <userinput>XCOPY /S E:\BASE C:\FREEBSD\BASE</userinput></screen>
      <screen arch="pc98"><prompt>A:\></prompt> <userinput>MD A:\FREEBSD</userinput>
<prompt>A:\></prompt> <userinput>XCOPY /S E:\BASE A:\FREEBSD\BASE</userinput></screen>

      <para>Предполагается, что на <devicename>E:</devicename> смонтирован
	CD.</para>

      <para arch="i386,amd64">Для всех дистрибутивных наборов, которые
	вы хотите установить с раздела DOS (и для которых у вас есть
	свободное место), выполните копирование в каталог
	<filename>C:\FREEBSD</filename> &mdash; минимально необходимый
	набор это <filename>BIN</filename>.</para>

      <para arch="pc98">Для всех дистрибутивных наборов, которые
	вы хотите установить с раздела DOS (и для которых у вас есть
	свободное место), выполните копирование в каталог
	<filename>A:\FREEBSD</filename> &mdash; минимально необходимый
	набор это <filename>BIN</filename>.</para>

      <para>Как только вы скопировали каталоги, просто запустите установку
	с дискет как обычно и выберите <quote>DOS</quote> в качестве
	носителя когда придет время.</para>
    </sect3>

    <sect3>
      <title>Установка с QIC/SCSI ленты</title>

      <para>При установке с ленты, программа установки предполагает, что
	файлы помещены на нее с помощью &man.tar.1;,
	поэтому после загрузки всех файлов дистрибутивных наборов,
	которые вам нужны, используйте <command>tar</command> для
	помещения их на ленту с помощью примерно такой команды:</para>

      <screen>&prompt.root; <userinput>cd <replaceable>/where/you/have/your/dists</replaceable></userinput>
&prompt.root; <userinput>tar cvf /dev/sa0 <replaceable>dist1</replaceable> .. <replaceable>dist2</replaceable></userinput></screen>

      <para>При установке вы также должны убедиться, что оставлено
	достаточно места во временном каталоге (который вам будет предложено
	выбрать) для помещения <emphasis>полного</emphasis> содержимого
	созданной ленты.  В связи с невозможностью произвольного доступа
	к содержимого ленты, этот метод установки требует места во
	временном хранилище.  Отведите столько места, сколько потребуется
	для распаковки дистрибутивных наборов, помещенных на ленту.</para>

      <note>
	<para>Для установки лента должна быть помещена в привод
	  <emphasis>до</emphasis> загрузки с дискет.  Иначе программа
	  установки может не найти ее во время тестирования устройств.</para>
      </note>

      <para>Теперь создайте загрузочные дискеты, как описано в
	<xref linkend="floppies"> и приступайте к установке.</para>
    </sect3>

    <sect3 id="ftpnfs">
      <title>Установка по сети через FTP или NFS</title>

      <para>После создания загрузочных дискет, как описано в первом
	разделе, вы можете загрузить остальные файлы по сети, используя
	3 типа соединения: последовательный порт, параллельный порт
	или Ethernet.</para>

      <sect4>
	<title>Последовательный порт</title>

	<para>Поддержка SLIP довольно примитивна, и ограничена в основном
	  постоянными соединениями, такими как последовательный кабель
	  между двумя компьютерами.  Соединение должно быть постоянным,
	  поскольку программа SLIP на данный момент не предоставляет
	  возможности дозвона.  Если вам требуется дозвон по модему
	  или иной способ подготовки соединения перед его установкой,
	  используйте PPP.</para>

	<para>При использовании PPP, убедитесь, что у вас есть IP адрес
	  провайдера и сведения о DNS, так как они понадобятся на
	  ранней стадии процесса установки.  Вам также может потребоваться
	  знать собственный IP адрес, поскольку PPP поддерживает
	  динамическое согласование адресов и может получить эту
	  информацию непосредственно от провайдера, если он предоставляет
	  такую возможность.</para>

	<para>Вам также могут понадобиться сведения об использовании различных
	  <quote>AT команд</quote> вашей модели модема, поскольку
	  программа дозвона PPP предоставляет только очень простой
	  эмулятор терминала.</para>
      </sect4>

      <sect4>
	<title>Параллельный порт</title>

	<para>Если доступно аппаратное подключение к другому компьютеру
	  &os; или Linux, вы можете также провести установку через
	  параллельный <quote>laplink</quote> кабель.  Скорость передачи
	  данных через параллельный порт гораздо выше, чем это обычно возможно
	  через последовательную линию (до 50к/сек), в результате установка
	  проходит быстрее.  Обычно не требуется использовать
	  <quote>настоящий</quote> IP адрес при PPP соединении таким способом
	  и вы можете использовать адреса RFC 1918 для концов соединения
	  (например <hostid role="ipaddr">10.0.0.1</hostid>,
	  <hostid role="ipaddr">10.0.0.2</hostid>, и т.д.).</para>

	<important>
	  <para>Если вы используете компьютер с Linux, а не с &os; в
	    качестве удаленной стороны PLIP, потребуется также указать
	    <option>link0</option> в окне настройки TCP/IP, поле
	    <quote>extra options for ifconfig</quote>, для обеспечения
	    совместимости с несколько иначе реализованным PLIP
	    протоколом Linux.</para>
	</important>

      </sect4>

      <sect4>
	<title>Ethernet</title>

	<para>&os; поддерживает большинство широко распространенных
	  карт Ethernet; таблица совместимых карт является частью
	  информации об оборудовании (<filename>HARDWARE.TXT</filename>
	  в меню Documentation на загрузочной дискете или в корневом
	  каталоге CDROM).  Если вы используете одну из поддерживаемых
	  PCMCIA Ethernet карт, убедитесь также, что она подключена
	  <emphasis>до</emphasis> включения лэптопа.  К сожалению,
	  &os; не поддерживает определение PCMCIA карт <quote>на ходу</quote>
	  во время установки.</para>

	<para>Вам также потребуется узнать ваш IP адрес в сети,
	  сетевую маску для вашей подсети, и имя вашего компьютера.
	  Ваш системный администратор может подсказать вам, какие
	  значения подойдут для данной настройки.  Если вы будете
	  обращаться к другим хостам по имени вместо IP адреса,
	  вам также потребуется сервер имен и возможно адрес шлюза
	  (если вы используете PPP, это IP адрес вашего провайдера).
	  Если вы хотите выполнить установку с FTP через HTTP прокси
	  (см. ниже), потребуется также адрес прокси.</para>

	<para>Если вы не знаете ответа на эти вопросы, вам возможно
	  лучше поговорить с системным администратором
	  <emphasis>перед</emphasis> началом этого типа установки.
	  Использование произвольно выбираемых IP адресов или сетевых
	  маск в действующей сети почти наверняка не будет работать
	  и возможно вам придется выслушать лекцию от рассерженного
	  системного администратора.</para>

	<para>Как только вы настроили какой-либо тип сетевого подключения,
	  установка может быть продолжена через NFS или FTP.</para>
      </sect4>

      <sect4>
	<title>Советы по установке через NFS</title>

	<para>Установка через NFS довольно проста: скопируйте
	  необходимые файлы дистрибутива &os; куда-либо на сервер и
	  укажите на них при выборе NFS типа носителя.</para>

	<para>Если этот сервер поддерживает доступ только через
	  <quote>привилегированные порты</quote> (обычно это режим по
	  умолчанию для рабочих станций Sun и Linux), вам может
	  потребоваться
	  установить соответствующий параметр в меню Options перед
	  началом установки.</para>

	<para>Если ваша Ethernet карта плохого качества и скорость
	  передачи данных очень низка, вы возможно также захотите
	  установить соответствующий флаг в Options.</para>

	<para>Для установки через NFS, сервер также должен поддерживать
	  <quote>subdir mounts</quote>, т.е. если каталог вашего дистрибутива
	  &os; находится в
	  <filename>wiggy:/usr/archive/stuff/FreeBSD</filename>,
	  <hostid role="hostname">wiggy</hostid> должен позволять
	  непосредственное монтирование
	  <filename>/usr/archive/stuff/FreeBSD</filename>,
	  а не только <filename>/usr</filename> или
	  <filename>/usr/archive/stuff</filename>.</para>

	<para>В файле &os; <filename>/etc/exports</filename> это поведение
	  управляется параметром <option>-alldirs</option>.  Другие сервера
	  NFS могут иметь другие соглашения.  Если вы получаете сообщения
	  сервера <literal>Permission Denied</literal>, скорее всего эта
	  возможность не включена.</para>
      </sect4>

      <sect4>
	<title>Советы по установке через FTP</title>

	<para>FTP установка может быть выполнена с любого зеркалирующего
	  сервера, содержащего свежую версию &os;.  Полный список,
	  позволяющий выбрать зеркало почти для любого региона мира,
	  появляется во время установки через FTP.</para>

	<para>Если вы выполняете установку с FTP сайта, не входящего в этот
	  список, или существует проблема с настройкой сервера имен,
	  вы можете также задать собственный URL путем выбора
	  <quote>URL</quote> в этом меню.  URL может содержать имя хоста
	  или IP адрес, так что при отсутствии сервера имен подойдет URL
	  вроде этого:</para>

	<screen>ftp://216.66.64.162/pub/FreeBSD/releases/&arch;/4.2-RELEASE</screen>

	<para>Существует три типа FTP установки, которые вы можете
	  использовать:
	  <itemizedlist>
	    <listitem>
	      <para>FTP:  Этот метод использует стандартный
		<quote>активный</quote> режим передачи данных, в котором
		сервер устанавливает соединение с клиентом.  Этот метод не
		будет работать через большинство брандмауэров, но зачастую
		лучше работает со старыми FTP серверами, которые не
		поддерживают пассивный режим.  Если соединение обрывается
		в пассивном режиме, попробуйте этот режим.</para>
	    </listitem>
	    <listitem>
	      <para>FTP Passive:  Устанавливает <quote>пассивный</quote>
		режим, который не позволяет серверу устанавливать соединение
		с клиентом.  Этот параметр отлично подходит пользователям,
		находящимся за брандмауэрами, которые не разрешают входящих
		соединений по произвольным адресам портов.</para>
	    </listitem>
	    <listitem>
	      <para>FTP через HTTP прокси: Этот параметр указывает &os;
		использовать HTTP для выполнения через прокси всех FTP
		операций.  Прокси будет транслировать запросы и отправлять
		их серверу FTP.  Это позволяет пользователю проходить через
		брандмауэры, которые вообще не разрешают использование FTP,
		но предоставляют HTTP прокси.  Вы должны указать имя хоста
		прокси в дополнение к FTP серверу.</para>

	      <para>В редких случаях, когда FTP прокси не работает через
		HTTP, вы можете указать URL примерно так:</para>

	      <screen><userinput>ftp://foo.bar.com:<replaceable>port</replaceable>/pub/FreeBSD</userinput></screen>

	      <para>В URL выше, <replaceable>port</replaceable>
		это номер порта FTP прокси сервера.</para>
	    </listitem>
	  </itemizedlist>
	</para>

      </sect4>
    </sect3>
    <sect3 arch="i386,alpha,amd64">
      <title>Советы для последовательной консоли</title>

      <para>Если вы предпочитаете устанавливать &os; на компьютер,
	использующий только последовательный порт (т.е. не имеющий
	VGA карты), следуйте данной инструкции:</para>

      <procedure>
	<step>
	  <para>Подключите любой ANSI (vt100) совместимый терминал или
	    программу эмуляции терминала к <devicename>COM1</devicename>
	    порту PC, на который вы устанавливаете &os;.</para>
	</step>
	<step>
	  <para>Отключите клавиатуру (да, это правильно!) и попробуйте
	    загрузиться с дискеты или дистрибутивного CDROM, в зависимости
	    от типа имеющегося дистрибутивного носителя, с отключенной
	    клавиатурой.</para>
	</step>
	<step>
	  <para>Если вы не видите ничего на последовательной консоли,
	    подключите клавиатуру опять.
	    Если вы загружаетесь с CDROM, выполните <xref
	    linkend="hitspace"> после получения сигналов.</para>
	</step>
	<step>
	  <para>При загрузке с дискет, после остановки чтения с диска
	    вставьте первый диск <filename>kern<replaceable>X</replaceable>.flp</filename> и нажмите
	    <keycap>Enter</keycap>.  После остановки чтения с диска
	    вставьте следующий диск <filename>kern<replaceable>X</replaceable>.flp</filename> и нажмите
	    <keycap>Enter</keycap>, и так далее для всех дисков
	    <filename>kern<replaceable>X</replaceable>.flp</filename>.  Когда загрузка завершится,
	    вставьте опять <filename>boot.flp</filename> и нажмите
	    <keycap>Enter</keycap>.</para>
	</step>
	<step id="hitspace">
	  <para>После звукового сигнала нажмите цифру <keycap>6</keycap>,
	    затем введите</para>

	  <screen><userinput>boot -h</userinput></screen>

	  <para>и теперь информация должна выводиться в последовательный
	    порт.  Если это все еще не работает, проверьте последовательный
	    кабель и настройки программы эмуляции терминала или терминального
	    устройства.  Они должны быть включены на 9600 кбит, 8 бит, без
	    проверки четности.</para>
	</step>
      </procedure>
    </sect3>
  </sect2>

  <sect2>
    <title>Вопросы и ответы для пользователей &arch.print;</title>

    <qandaset arch="i386,amd64">
      <qandaentry>
	<question>
	  <para>Помогите!  У меня нет места!  Нужно ли сначала все
	    удалить?</para>
	</question>
	<answer>
	  <para>Если на вашем компьютере уже установлена DOS и для установки
	    &os; нет или недостаточно места, еще не все потеряно!
	    Вам может помочь утилита <application>FIPS</application>,
	    находящаяся в каталоге <filename>tools/</filename> &os; CDROM
	    или на различных ftp сайтах &os;.</para>

	  <para><application>FIPS</application> позволяет вам разделить
	    существующее пространство DOS на две части, сохраняя
	    имеющиеся данные и делая возможной установку на вторую
	    свободную часть.  Сначала необходимо выполнить дефрагментацию
	    раздела DOS, используя утилиту <filename>DEFRAG</filename>
	    из DOS 6.xx или <application>Norton Disk Tools</application>,
	    затем запустите FIPS.  Он запросит всю необходимую информацию.
	    Затем вы можете перегрузиться и установить &os; в новый раздел.
	    Учтите также, что FIPS создаст второй раздел как
	    <quote>клон</quote> первого, получатся два основных раздела DOS.
	    Не волнуйтесь!  Вы можете просто удалить второй первичный раздел
	    DOS (убедившись, что это именно тот раздел, проверив его
	    размер).</para>

	  <para><application>FIPS</application> в настоящее время
	    НЕ работает с разделами NTFS.  Для работы с такими разделами
	    вам потребуется коммерческий продукт, такой как
	    <application>Partition Magic</application>.
	    Это становится проблемой только в том случае, если раздел
	    Windows занимает весь диск и вы не хотите выполнять установку
	    с нуля.</para>

	  <para><application>FIPS</application> не работает с расширенными
	    разделами DOS.  Поддерживаются основные разделы Windows
	    95/98/ME FAT32.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Могу я использовать сжатые файловые системы DOS из
	  &os;?</para>
	</question>

	<answer>
	  <para>Нет.  Если вы используете такую утилиту как
	    <application>Stacker</application>(tm) или
	    <application>DoubleSpace</application>(tm), &os; сможет
	    использовать только ту часть файловой системы, которую
	    вы оставили несжатой.  Остальная часть файловой системы будет
	    показана в виде одного большого файла (файл
	    stacked/dblspaced!).  <emphasis>Не удаляйте этот
	    файл</emphasis>!</para>

	  <para>Возможно лучше создать другой несжатый расширенный DOS раздел
	    и использовать его для передачи файлов между DOS и &os;, если
	    это требуется.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Могу ли я смонтировать расширенные разделы DOS?</para>
	</question>

	<answer>
	  <para>Да.  Расширенные разделы DOS именуются после других
	    <quote>слайсов</quote> &os;, т.е. <devicename>D:</devicename>
	    может стать <filename>/dev/da0s5</filename>,
	    <devicename>E:</devicename> &mdash; <filename>/dev/da0s6</filename>
	    и т.д.  В этом примере предполагается, что расширенный раздел
	    находится на диске SCSI 0.  Для дисков IDE замените
	    <literal>da</literal> на <literal>ad</literal> соответственно.
	    Иными словами, расширенные разделы монтируются так же, как и
	    любые другие DOS диски, т.е.:</para>

	  <screen>&prompt.root; <userinput>mount -t msdos /dev/da0s5 /dos_d</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Могу ли я запускать исполняемые файлы DOS в &os;?</para>
	</question>

	<answer>
	  <para>Хотя еще имеются некоторые острые углы, во многих случаях
	    может подойти утилита &man.doscmd.1;, работа над которой
	    продолжается.  Порт/пакет <filename
	    role="package">emulators/doscmd</filename> можно найти в
	    коллекции портов &os;.  Если вы заинтересованы в работе над
	    этой утилитой,
	    отправьте письмо в &a.emulation; и укажите, что вы
	    заинтересованы в этой продолжающейся работе!</para>

	  <para>Порт/пакет <filename role="package">emulators/pcemu</filename>
	    в коллекции портов &os; эмулирует 8088 и BIOS сервисы для
	    запуска текстовых приложений DOS.  Для работы ему требуется
	    X Window System (XFree86).</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Могу ли я запускать в &os; приложения
	    &microsoft.windows;?</para>
	</question>

	<answer>
	  <para>Существуют несколько портов/пакетов в коллекции портов
	    &os;, которые могут сделать возможным использование многих
	    приложений &windows;.  Порт/пакет <filename
	    role="package">emulators/wine</filename> предоставляет уровень
	    совместимости над &os;, который позволяет многим
	    &windows; приложениям работать в X Windows (XFree86).</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Могу ли я запускать в &os; другие операционные системы?</para>
	</question>

	<answer>
	  <para>В коллекции портов находятся несколько портов/пакетов, которые
	    имитируют <quote>виртуальные машины</quote> и позволяют другим
	    операционным системам работать поверх &os;.  Порт/пакет
	    <filename role="package">emulators/bochs</filename> позволяет
	    &microsoft.windows;, Linux и даже другим копиям &os; работать
	    внутри окна рабочего стола &os;.  Порты/пакеты <filename
	    role="package">emulators/vmware2</filename> и <filename
	    role="package">emulators/vmware3</filename> позволяют запускать
	    в &os; коммерческие виртуальные машины VMware.</para>
	</answer>
      </qandaentry>
    </qandaset>

    <qandaset arch="alpha">
      <qandaentry>
	<question>
	  <para>Могу ли я загрузиться с ARC или Alpha BIOS консоли?</para>
	</question>

	<answer>
	  <para>Нет.  &os;, так же как Compaq Tru64 и VMS, загружается
	    только с SRM консоли.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Помогите!!  У меня нет места!  Должен ли я сначала
	    все удалить??</para>
	</question>

	<answer>
	  <para>К сожалению, да.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Могу ли я смонтировать расширенные разделы Compaq Tru64 или
	    VMS?</para>
	</question>

	<answer>
	  <para>В данное время нет.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Что насчет поддержки бинарных файлов Compaq Tru64
	    (OSF/1)?</para>
	</question>

	<answer>
	  <para>&os; очень хорошо запускает приложения Tru64 с помощью
	    пакета/порта <filename
	    role="package">emulators/osf1_base</filename>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Что насчет поддержки исполняемых файлов Linux?</para>
	</question>

	<answer>
	  <para>&os; может выполнять бинарные файлы AlphaLinux с помощью
	    порта/пакета <filename
	    role="package">emulators/linux_base</filename>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question>
	  <para>Что насчет поддержки бинарных файлов NT Alpha?</para>
	</question>

	<answer>
	  <para>&os; не может выполнять приложения NT, хотя и может
	    монтировать разделы NT.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </sect2>
</sect1>
