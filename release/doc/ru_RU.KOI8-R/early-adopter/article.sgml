<!--
   The FreeBSD Russian Documentation Project

   $FreeBSD$
   $FreeBSDru: frdp/release/doc/ru_RU.KOI8-R/early-adopter/article.sgml,v 1.6 2004/08/12 08:31:34 den Exp $

   Original revision: 1.21
-->

<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % articles.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Articles Entity Set//EN">
%articles.ent;

<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;

<!ENTITY release.4x "4.<replaceable>X</replaceable>">
<!ENTITY release.5x "5.<replaceable>X</replaceable>">
<!ENTITY release.4last "4.10-RELEASE">
<!ENTITY release.5branchpoint "5.3-RELEASE">
]>

<article lang="ru">
  <articleinfo>
    <title>Руководство для новых пользователей &os; &release.current;</title>

    <authorgroup>
      <corpauthor>Группа подготовки релизов &os;</corpauthor>
    </authorgroup>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <holder role="mailto:re@FreeBSD.org">Группа подготовки релизов
	&os;</holder>
    </copyright>

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.intel;
      &tm-attrib.microsoft;
      &tm-attrib.sparc;
      &tm-attrib.general;
    </legalnotice>

    <abstract>
      <para>Эта статья разъясняет статус &os; &release.current;
	с точки зрения тех пользователей, которые только начинают
	работать с серией релизов &release.5x; или с &os; вообще.
	Она содержит некоторую внутреннюю информацию о процессе
	подготовки релизов, информацию об отдельных новых
	возможностях, и о проблемах, которые могут возникнуть
	у новых пользователей.  Описаны также планы относительно
	дальнейшей разработки релизов ветви 4-STABLE и приемы
	обновления существующих систем.</para>
    </abstract>
  </articleinfo>

  <sect1 id="intro">
    <title>Введение</title>

    <para>&os; &release.5x; стала новой основной версией &os; за
      последние более чем два года.  Помимо множества новых возможностей,
      она содержит также многочисленные разработки во внутренней
      системной архитектуре.  Наряду с этими преимуществами,
      в систему пришел большой объем нового, мало протестированного кода.
      По сравнению с существующей линейкой релизов &release.4x;,
      первые несколько релизов &release.5x; могут иметь меньшую стабильность,
      производительность, и иногда меньшую функциональность.</para>

    <para>По этим причинам, &a.re; особо предостерегает пользователей
      от обновления старых релизов &os; до &release.current;,
      пока они не узнают о возможных недостатках новых релизов
      (и приготовятся к ним).  Специально для более консервативных
      пользователей мы рекомендуем работать с &release.4x; (например, с
      &release.4last;) в ближайшем будущем.  Мы считаем, что таким
      пользователям возможно лучше всего обновиться до &release.5x;
      только после создания ветви разработки 5-STABLE; это может
      произойти во время выпуска &release.5branchpoint;.</para>

    <para>(&os; &release.5x; страдает от так называемой проблемы
      <quote>курицы и яйца</quote>.  Цель всего проекта это выпуск
      релизов, которые стабильны и надежны настолько, насколько это
      возможно.  Стабильность и надежность требуют обширного тестирования,
      в частности новых возможностей системы.  Однако, в целях получения
      большого количества пользователей для тестирования системы, в данном
      случае необходимо сначала создать и распространить релиз!)</para>

    <para>В этой статье описываются некоторые проблемы, возникающие при
      установке и работе &os; &release.current;.  Мы начнем с краткого
      обзора процесса выпуска релизов &os;.  Затем мы представим некоторые
      наиболее заслуживающие внимания возможности &os; &release.current;,
      вместе с информацией о проблемных для неподготовленных пользователей
      местах.  Для пользователей, решивших остаться с релизами, основанными
      на 4-STABLE, мы опишем кратко- и среднесрочные планы для этой
      ветви разработки.  Наконец, мы представим заметки по обновлению
      существующих &release.4x; систем до &release.current;.</para>

  </sect1>

  <sect1 id="release-overview">
    <title>Обзор процесса выпуска релизов &os;</title>

    <para>&os; использует модель разработки, основанную на наличии
      множества ветвей разработки в репозитории исходных текстов.
      Основная ветвь называется <quote>CURRENT</quote>, и в репозитории
      CVS она означает тег <literal>HEAD</literal>.  Новые возможности
      сначала вносятся в эту ветвь; хотя это означает, что CURRENT
      первой получает новую функциональность, это также означает, что она
      периодически страдает от нарушений работоспособности при добавлении
      и отладке новых возможностей.</para>

    <para>Большинство релизов &os; выпускаются из одной или нескольких
      ветвей <quote>STABLE</quote>.  В эти ветви возможности добавляются
      только после некоторого тестирования в CURRENT.  На данный момент
      только одна ветвь STABLE находится в активной разработке; эта ветвь
      обозначается как <quote>4-STABLE</quote>, и все релизы &os;
      &release.4x; были выпущены из нее.  В репозитории CVS тег этой ветви
      <literal>RELENG_4</literal>.</para>

    <para>&os; 5.0, 5.1, 5.2 и 5.2.1 основаны на ветви CURRENT.  Первый из
      этих релизов был выпущен после более двух лет разработки (до них
      последним релизом, выпущенным из HEAD был &os; 4.0, в марте
      2000).</para>

    <para>Через некоторое время после выпуска &os; 5.0, в CVS репозитории
      &os; будет создана ветвь <quote>5-STABLE</quote> с тегом
      <literal>RELENG_5</literal>.  Последние две стабильные ветви
      (3-STABLE и 4-STABLE) были выпущены непосредственно после
      соответствующих <quote>точка-нуль</quote> релизов (3.0 и 4.0).
      Эта практика не дает достаточно времени для стабилизации
      CURRENT перед созданием новых ветвей.  Это приводит к потере времени
      на усилия по портированию исправлений между ветвями, а также на
      на некоторые архитектурные изменения, которые вообще не могут
      быть портированы между ветвями.</para>

    <para>Поэтому группа подготовки релизов создаст ветвь 5-STABLE в
      репозитории CVS только после достижения относительно стабильного
      состояния.  Перед этим будет выпущено несколько релизов из серии
      &release.5x;; мы ожидаем создания 5-STABLE приблизительно во
      время выпуска &release.5branchpoint;.</para>

    <para>Дополнительную информацию по процессу создания релизов &os;
      можно найти на <ulink
      url="&url.base;/releng/index.html">веб страницы
      выпуска релизов</ulink> и в статье <ulink
      url="&url.articles.releng;/index.html"><quote>Выпуск
      релизов &os;</quote></ulink>.  Специфичную информацию по
      будущей ветви разработки 5-STABLE можно найти в статье
      <ulink
      url="&url.articles.5-roadmap;/index.html"><quote>Дорога
      к 5-STABLE</quote></ulink>.</para>

  </sect1>

  <sect1 id="new">
    <title>Новые возможности</title>

    <para>&os; &release.5x; привлекает большим количеством новых
      возможностей.  Новые возможности и функциональность обычно вызывают
      серьезные архитектурные изменения, которые не могут быть портированы
      обратно в ветвь разработки &os; 4-STABLE (напротив, множество
      автономных расширений, таких как новые драйвера устройств или
      утилиты пользователя, уже были портированы).  Краткий, но не
      исчерпывающий список включает:</para>

    <itemizedlist>
      <listitem>
	<para>SMPng: <quote>Новое поколение</quote> поддержки SMP
	  компьютеров (находится в разработке).  Продолжается работа над
	  <quote>fine-grained locking</quote> различных подсистем
	  ядра для увеличения количества потоков выполнения, которые
	  могут работать в ядре.  Дополнительную информацию можно
	  найти на странице <ulink url="&url.base;/smp/index.html">FreeBSD
	  SMP проекта</ulink>.</para>
      </listitem>

      <listitem>
	<para>KSE:  Kernel Scheduled Entities позволяют одному процессу
	  иметь несколько потоков уровня ядра, подобно Scheduler
	  Activations.  Библиотеки потоков <filename>libkse</filename>
	  и <filename>libthr</filename> делают эти возможности доступными
	  многопоточным программам пользователя через API
	  &man.pthread.3;.</para>
      </listitem>

      <listitem>
	<para>Новые архитектуры:  Поддержка архитектур sparc64, ia64, и amd64
	  в дополнение к i386, pc98, alpha.</para>
      </listitem>

      <listitem>
	<para>GCC:  Набор инструментов компилятора теперь основан на
	  3.3.<replaceable>X</replaceable>, вместо GCC
	  2.95.<replaceable>X</replaceable>.</para>
      </listitem>

      <listitem>
	<para>MAC:  Поддержка расширяемых, загружаемых политик
	  Mandatory Access Control (принудительный контроль доступа).</para>
      </listitem>

      <listitem>
	<para>GEOM:  Гибкая подсистема трансформации запросов ввода/вывода
	  на диск.  Было реализовано основанное на GBDE шифрование
	  дисков.</para>
      </listitem>

      <listitem>
	<para>FFS: Файловая система FFS теперь поддерживает фоновые операции
	  &man.fsck.8; (для более быстрого восстановления после сбоев) и
	  снэпшоты файловой системы.</para>
      </listitem>

      <listitem>
	<para>UFS2:  Был добавлен новый дисковый формат UFS2, поддерживающий
	  расширенные файловые атрибуты и большие размеры файлов.
	  UFS2 теперь формат по умолчанию для &man.newfs.8;.  На всех
	  платформах, за исключением pc98, файловые системы, созданные
	  из &man.sysinstall.8;, используют UFS2 по умолчанию.</para>
      </listitem>

      <listitem>
	<para>Cardbus:  Поддержка для устройств Cardbus.</para>
      </listitem>

      <listitem>
	<para>Bluetooth:  Поддержка устройств Bluetooth.</para>
      </listitem>

    </itemizedlist>

    <para>Более полный список новых возможностей можно найти в информации
      о различных релизах &os; &release.5x;.</para>

  </sect1>

  <sect1 id="drawbacks">
    <title>Обратные стороны раннего перехода</title>

    <para>Вместе с новыми возможностями в &os; &release.5x; присутствуют
      некоторые проблемные или как минимум вызывающие неожиданное
      поведение части.  В основном причиной этого является то, что многие
      новые возможности находятся в работе.  Неполный список этих
      частей включает:</para>

    <itemizedlist>

      <listitem>
	<para>Многие новые возможности еще не были завершены.  Примеры из
	  списка новых возможностей включают SMPng и KSE.  Хотя они
	  подходят для тестирования и экспериментов, для реальных
	  задач они еще не готовы.</para>
      </listitem>

      <listitem>
	<para>Вследствие изменения в структурах данных ядра и ABI/API,
	  сторонние бинарные драйвера устройств должны быть изменены
	  для корректной работы в &os; 5.0.  Возможны дополнительные
	  изменения в ABI/API перед созданием ветви 5-STABLE, в частности
	  на новых аппаратных архитектурах.  В некоторых (надеемся редких)
	  случаях могут измениться видимые пользователю структуры,
	  что потребует перекомпиляции приложений или переустановки
	  портов/пакетов.</para>
      </listitem>

      <listitem>
	<para>Некоторые части функциональности базовой системы &os;
	  были перемещены в коллекцию портов.  Примеры таких приложений
	  <application>Perl</application>, <application>UUCP</application>,
	  и большинство (но не все) игры.  Хотя эти программы все еще
	  поддерживаются, удаление их из базовой системы может причинить
	  некоторые неудобства.</para>
      </listitem>

      <listitem>
	<para>Некоторые части базовой системы &os; стали неработоспособны
	  по причине малого количества пользователей и отсутствия поддержки.
	  Они были удалены.  Отдельные примеры включают поколение
	  исполняемых файлов a.out, поддержку сетей XNS и драйвер
	  контроллера X-10.</para>
      </listitem>

      <listitem>
	<para>Большое количество портов и пакетов не компилируются или не
	  работают корректно в &os; &release.5x;, в отличие от &os;
	  4-STABLE.  Обычно причина этих проблем в изменениях компилятора
	  или включаемых файлов.  В некоторых случаях они вызываются
	  изменениями в ядре или устройствах.</para>
      </listitem>

      <listitem>
	<para>Многие возможности &os; &release.5x; реализованы
	  впервые.  Некоторые из этих возможностей (такие как
	  SMPng) серьезно влияют на работу ядра и определить их
	  влияние на на стабильность и производительность сложно.</para>
      </listitem>

      <listitem>
	<para>Определенное количество отладочного и диагностического кода
	  все еще присутствует для выявления проблем в новом коде
	  &os; &release.5x;.  Это может вызвать понижение производительности
	  по сравнению с 4-STABLE.</para>
      </listitem>

      <listitem>
	<para>В ветвь разработки 4-STABLE новые возможности добавляются
	  только после тестирования в -CURRENT.  &os; &release.5x;
	  не имеет стабилизирующего влияния ветви -STABLE (вероятно, что
	  ветвь разработки 5-STABLE будет создана около времени создания
	  &release.5branchpoint;.)</para>
      </listitem>

      <listitem>
	<para>Документация (такая как <ulink
	  url="&url.books.handbook;/index.html">Руководство</ulink>
	  &os; и <ulink
	  url="&url.books.faq;/index.html">FAQ</ulink>)
	  могут не отражать изменения, недавно внесенные в &os;
	  &release.5x;.</para>
      </listitem>

    </itemizedlist>

    <para>Поскольку большое количество недостатков влияет на стабильность
      системы, группа подготовки релизов рекомендует более консервативным
      сайтам и пользователям оставаться на релизах, основанных на
      ветви 4-STABLE до того, как серия &release.5x; станет более
      стабильной.  Хотя мы верим, что многие первоначальные проблемы со
      стабильностью были исправлены, некоторые вопросы производительности
      все еще находятся в работе.  Мы также обращаем внимание, что
      наилучшая общая практика системного администрирования требует
      обновления операционной системы в тестовом режиме перед
      обновлением системы под нагрузкой.</para>

  </sect1>

  <sect1 id="plans-stable">
    <title>Планы для ветви 4-STABLE</title>

    <para>Важно заметить, что не смотря на выпуск релизов серии
      &release.5x;, поддержка релизов &release.4x; продолжится еще
      некоторое время.  На самом деле, &os; 4.8 была выпущена
      двумя месяцами после 5.0, в апреле 2003, затем 4.9 в октябре 2003
      и 4.10 в мае 2004.
      Следующие релизы из ветви 4-STABLE будут зависеть от нескольких
      факторов.  Наиболее важный из них это существование и стабильность
      ветви 5-STABLE.  Если CURRENT недостаточно стабильна для создания
      5-STABLE, возможно потребуются дополнительные релизы из
      4-STABLE.  До последнего релиза из ветви 4-STABLE новые возможности
      могут переноситься из <literal>HEAD</literal>, на усмотрение
      разработчиков и в соответствии с существующей политикой подготовки
      релизов.</para>

    <para>До некоторой степени группа подготовки релизов (как и
      сообщество разработчиков в целом) учтет потребности пользователей
      в будущих релизах 4-STABLE.  Тем не менее эти потребности
      необходимо будет сбалансировать с ресурсами (в частности время
      разработчиков, вычислительные ресурсы и объем зеркалируемых
      архивов).  Мы обращаем внимание, что в целом сообщество
      &os; (пользователи и разработчики) предпочитают использовать
      новые возможности в &release.5x; в связи с трудностями, возникающими
      при портировании новой функциональности на &release.4x;.</para>

    <para>&a.security-officer; продолжит поддержку релизов, выпущенных
      их ветви 4-STABLE в соответствии с опубликованной политикой,
      которую можно найти на <ulink
      url="&url.base;/ru/security/index.html">странице
      безопасности</ulink> веб сайта &os;.  Обычно два последних
      релиза из ветви поддерживаются в соответствии с сообщениями
      и исправлениями безопасности.  По собственному усмотрению
      группа может вносить определенные исправления и в другие релизы.</para>

    <para>На данный момент у группы подготовки релизов нет определенных
      планов по дальнейшим релизам из ветви разработки 4-STABLE,
      и мы решили продолжать поддержку 4.10-RELEASE в качестве
      <quote>ветви исправлений</quote> (<quote>Errata Branch</quote>).
      Ранее ветвь, из которой выпускался релиз, поддерживалась 
      &a.security-officer; в качестве <quote>ветви безопасности</quote>
      (<quote>Security Branch</quote>) в течение определенного периода,
      и в нее вносились только критически важные исправления безопасности.
      Для FreeBSD 4.10-RELEASE набор исправлений будет расширен
      для включения исправлений локальных DoS, а также других
      ключевых и хорошо протестированных исправлений, которые могут
      не относиться к безопасности.  Хотя эти исправления скорее всего
      не будут опубликованы в качестве <quote>релиза</quote> из ветви,
      сообщения о проблемах &os; будут включать их подобно
      сообщениям безопасности &os;.</para>
  </sect1>

  <sect1 id="upgrade">
    <title>Заметки по обновлению с &os; &release.4x;</title>

    <para>Для пользователей системы &os; этот раздел предоставляет
      несколько заметок по обновлению &os; &release.4x; до
      &release.5x;.  Как и при любом обновлении &os;, необходимо
      прочесть информацию о релизе и список исправлений к новому
      релизу, а также <filename>src/UPDATING</filename> при
      обновлении из исходных текстов.</para>

    <sect2>
      <title>Бинарные обновления</title>

      <para>Возможно наиболее прямой способ это <quote>сохранить все,
	переформатировать, переустановить, и восстановить все</quote>.
	Это исключает проблемы с несовместимыми или отсутствующими
	в новой версии исполняемыми файлами или файлами настройки,
	захламляющими новую систему.  Это позволяет создать новые
	файловые системы с новой функциональностью (наиболее значимая
	&mdash; UFS2 по умолчанию).</para>

      <para>На данный момент опция бинарного обновления в меню
	&man.sysinstall.8; не была достаточно протестирована для
	обновлений между основными ветвями.  Использование этой
	возможности не рекомендуется.  В частности, бинарное
	обновление не касается множества файлов, существующих в
	&release.4x;, но отсутствующих в &release.5x;.  Эти
	более не нужные файлы могут создать некоторые проблемы.
	Пример таких файлов &mdash; старые заголовки C++, перемещенные
	в коллекцию портов программы, или совместно используемые
	библиотеки, которые были перемещены для поддержки
	динамически загружаемых исполняемых файлов в корневой файловой
	системе.</para>

      <para>На платформах &i386; и pc98 в 4-STABLE имеется утилита
	UserConfig, позволяющая во время загрузки настраивать
	устройства ISA при загрузке с установочного дистрибутива.
	В &os; &release.5x; эта функциональность была частично
	замещена механизмом &man.device.hints.5; (он позволяет указывать
	те же параметры, но интерфейс сильно отличается).</para>

      <para>Для установки с дискет может понадобиться третья, новая дискета,
	на которую копируются дополнительные драйвера устройств в модулях
	ядра.  Эту дискету <filename>drivers.flp</filename>
	обычно можно найти там же, где и
	<filename>kern.flp</filename> и
	<filename>mfsroot.flp</filename>.</para>

      <para>CDROM установки на архитектуру &i386; теперь используют
	<quote>не-эмулирующий</quote> загрузчик.  Это позволяет,
	помимо прочего, использовать <literal>GENERIC</literal>
	ядро вместо урезанного ядра на дискетах.  В теории, любая система,
	способная загрузиться с установочных компакт дисков
	&microsoft; &windowsnt; 4, должна быть способна загрузиться
	с компакт дисков &release.5x;.</para>

    </sect2>

    <sect2>
      <title>Обновление из исходных текстов</title>

      <para>Прочтение <filename>src/UPDATING</filename> абсолютно
	необходимо.  Раздел, озаглавленный <quote>To upgrade from
	4.x-stable to current</quote> содержит пошаговую процедуру
	обновления.  Эта процедура должна быть в точности выполнена,
	без <quote>сокращений</quote>, которые зачастую применяют
	некоторые пользователи.</para>

    </sect2>

    <sect2>
      <title>Общие замечания</title>

      <para><application>Perl</application> был удален из основной системы
	и должен быть установлен или из готового пакета или из
	коллекции портов.  Наличие Perl в базовой системе создавало
	множество сложностей с обновлением.  Утилиты базовой системы,
	использовавшие Perl, были или переписаны (если они были нужны)
	или удалены (если они больше не требовались).  &man.sysinstall.8;
	теперь устанавливает пакет Perl как часть большинства
	дистрибутивных наборов, так что большинство пользователей
	не заметят этого изменения.</para>

      <para>Обычно возможна работа старых исполняемых файлов
	&release.4x; в &release.5x;, но это требует установки
	дистрибутивного набора <filename>compat4x</filename>.
	Использование старых портов возможно в некоторых случаях,
	хотя известно много случаев обратной несовместимости.
	Например, порты
	<filename role="package">devel/gnomevfs2</filename>,
	<filename role="package">mail/postfix</filename>, и
	<filename role="package">security/cfs</filename> необходимо
	перекомпилировать из-за изменений в структуре
	<literal>statfs</literal>.</para>

      <para>При установке или обновлении поверх существующей системы,
	основанной на 4-STABLE, крайне важно удалить старые файлы
	заголовков в <filename>/usr/include</filename>.  Переименование
	или перемещение этого каталога перед бинарной установкой или
	<literal>installworld</literal> обычно достаточно.  Невыполнение
	этого шага может привести к ошибке, поскольку компилятор станет
	работать со смешанным набором из устаревших и новых
	файлов заголовков.</para>

      <para><filename>MAKEDEV</filename> более не существует и не
	требуется.  FreeBSD &release.5x; использует файловую систему
	устройств, которая автоматически создает устройства при
	необходимости.  За дополнительной информацией обращайтесь к
	&man.devfs.5;.</para>

      <para>UFS2 это формат по умолчанию для файловых систем, созданных
	с помощью &man.newfs.8;.  Для всех платформ за исключением
	pc98, это также формат по умолчанию для файловых систем,
	созданных с помощью программы разметки диска из
	&man.sysinstall.8;.  Поскольку &os; &release.4x;
	распознает только UFS1 (а не UFS2), дисковые разделы, к которым
	требуется доступ из &release.5x; и &release.4x;, должны быть
	созданы с UFS1.  Этот формат может быть задан параметром
	<option>-O1</option> или из программы разметки дисков в
	&man.sysinstall.8;.  Такая ситуация чаще всего возникает на
	компьютере с двойной загрузкой &os; &release.4x; и &os; &release.5x;.
	Обратите внимание, что нет способа конвертации файловых систем
	между двумя дисковыми форматами (кроме резервного копирования,
	воссоздания файловой системы и восстановления).</para>

    </sect2>
  </sect1>

  <sect1 id="summary">

    <title>Итоги</title>

    <para>Хотя в &os; &release.current; имеется множество новых и
      замечательных возможностей, она не подходит на данный момент для
      всех пользователей.  В этом документе мы представили немного
      внутренней информации по разработке релизов, некоторые из наиболее
      заметных новых возможностей серии &release.5x;, и отдельные
      недостатки раннего перехода.  Мы также представили планы на
      ветвь разработки 4-STABLE и заметки по обновлению.</para>

  </sect1>
</article>
