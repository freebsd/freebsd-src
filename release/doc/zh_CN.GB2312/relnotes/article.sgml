<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % articles.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Articles Entity Set//EN">
%articles.ent;

<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;

<!-- The FreeBSD Simplified Chinese Project -->
<!-- Original Revision: 186643 -->
]>

<article>
  <articleinfo>
    <title>&os; &release.current; 发行说明</title>

    <corpauthor>The &os; Project</corpauthor>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <year>2007</year>
      <year>2008</year>
      <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
    </copyright>

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.ibm;
      &tm-attrib.ieee;
      &tm-attrib.intel;
      &tm-attrib.sparc;
      &tm-attrib.general;
    </legalnotice>

    <abstract>
      <para>这份 &os; &release.current; 的发行说明， 概括了 &os; 基本系统在
	&release.branch; 开发线上所做的改动。
	本文档列举了自前一发行版本以来所有适用的安全公告， 以及对于
	&os; 内核以及系统附带的应用程序所做的重要修改。
	对在升级时需要注意的一些问题， 也进行了简略的介绍。</para>
    </abstract>
  </articleinfo>

  <sect1 id="intro">
    <title>简介</title>

    <para>这篇文档包括了 &os;
      &release.current; 的发行说明。 它描述了最近刚刚加入、
      修改或删除了的 &os; 特性的说明。 同时，
      它也将给出如何从先前的 &os; 版本完成升级的说明。</para>

<![ %release.type.current [
    <para>这篇文档所介绍的 &release.type; 软件包，
      介绍了 &release.branch; 开发分支自 &release.branch;
      创建以来的进展。 关于这一分支上预编译的、 二进制版本的
      &release.type; 软件包， 可以在 <ulink url="&release.url;"></ulink>
      找到。</para>
]]>

<![ %release.type.snapshot [
    <para>这份说明所说的 &release.type; 版本，
      是在 &release.branch; 开发分支上 &release.prev; 到未来的 &release.next;
      上的一点。 这一开发分支上预编译的二进制形式的 &release.type;
      安装包， 可以在 <ulink url="&release.url;"></ulink> 找到。</para>
]]>

<![ %release.type.release [
    <para>这是一份 &os; &release.current; 的
      &release.type; 发布包。 您可以从
      <ulink url="&release.url;"></ulink> 或其他镜像那里得到它的副本。
      关于这个 (或其他) &release.type; 发布包的更多信息，可以在
      <ulink url="&url.books.handbook;/">&os; 手册</ulink>
      中的 <ulink url="&url.books.handbook;/mirrors.html"
		  ><quote>如何获得 &os;</quote> 附录</ulink>
      中找到。</para>
]]>

  <para>我们鼓励所有的用户在开始安装 &os;
    之前首先参考这一版本所对应的勘误信息。
    勘误文档将随时更新，以便为用户提供在发布工程后期或该版本发布之后
    <quote>新发现的</quote> 问题和相关信息。
    通常，这包括已知的 bug，安全公告，以及对于文档的修订内容。
    最新的 &os; &release.current; 勘误信息可以从 &os; 网站获得。</para>
  </sect1>

  <sect1 id="new">
    <title>最新变动</title>

    <para>这一节描述了 &os;
      自从 &release.prev; 以来最明显的新功能和变化。</para>

    <para>发行说明中的绝大多数条目是在说明自从
      &release.prev;
      以来的安全公告、新的驱动程序或硬件支持、新的命令或是选项、
      重要的错误修补，以及基本系统中来自第三方的软件升级。
      重要的 ports 和 packages 变动，或关于交付工程的变动也会在这份文档中体现。
      显而易见地，发行说明不可能涵盖 &os; 版本之间的每一个微小变动；
      这篇文档主要关注的，仍然是安全公告，用户可以察觉的修改，
      以及重要的架构改良。</para>

    <sect2 id="security">
      <title>安全公告</title>

      <para>下列安全公告所描述的问题均已在这一版本中进行了修正。
	如欲了解进一步的信息， 请参阅位于
	<ulink url="http://security.FreeBSD.org/"></ulink> 的安全公告全文。</para>

      <informaltable frame="none" pgwide="0">
	<tgroup cols="3">
	  <colspec colwidth="1*">
	  <colspec colwidth="1*">
	  <colspec colwidth="3*">
	    <thead>
	      <row>
		<entry>公告</entry>
		<entry>日期</entry>
		<entry>主题</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
	        <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:05.openssh.asc"
			      >SA-08:05.openssh</ulink></entry>
		<entry>2008&nbsp;年&nbsp;4&nbsp;月&nbsp;17&nbsp;日</entry>
		<entry><para>OpenSSH X11-转发特权提升问题</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:06.bind.asc"
			      >SA-08:06.bind</ulink></entry>
		<entry>2008&nbsp;年&nbsp;7&nbsp;月&nbsp;13&nbsp;日</entry>
		<entry><para>DNS 缓存投毒问题</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:07.amd64.asc"
			      >SA-08:07.amd64</ulink></entry>
		<entry>2008&nbsp;年&nbsp;9&nbsp;月&nbsp;3&nbsp;日</entry>
		<entry><para>amd64 swapgs 本地特权提升问题</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:08.nmount.asc"
			      >SA-08:08.nmount</ulink></entry>
		<entry>2008&nbsp;年&nbsp;9&nbsp;月&nbsp;3&nbsp;日</entry>
		<entry><para>&man.nmount.2; 本地任意代码执行问题</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:09.icmp6.asc"
			      >SA-08:09.icmp6</ulink></entry>
		<entry>2008&nbsp;年&nbsp;9&nbsp;月&nbsp;3&nbsp;日</entry>
		<entry><para>IPv6 连接导致的远程内核崩溃问题</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:10.nd6.asc"
			      >SA-08:10.nd6</ulink></entry>
		<entry>2008&nbsp;年&nbsp;10&nbsp;月&nbsp;1&nbsp;日</entry>
		<entry><para>IPv6 邻居发现协议 (NDP) 路由漏洞</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:11.arc4random.asc"
			      >SA-08:11.arc4random</ulink></entry>
		<entry>2008&nbsp;年&nbsp;11&nbsp;月&nbsp;24&nbsp;日</entry>
		<entry><para>&man.arc4random.9; 可预测序列漏洞</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:12.ftpd.asc"
			      >SA-08:12.ftpd</ulink></entry>
		<entry>2008&nbsp;年&nbsp;12&nbsp;月&nbsp;23&nbsp;日</entry>
		<entry><para>&man.ftpd.8; 跨站请求伪造问题</para></entry>
	      </row>
	      <row>
		<entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:13.protosw.asc"
			      >SA-08:13.protosw</ulink></entry>
		<entry>2008&nbsp;年&nbsp;12&nbsp;月&nbsp;23&nbsp;日</entry>
		<entry><para>netgraph / bluetooth 特权提升问题</para></entry>
	      </row>
	    </tbody>
	</tgroup>
      </informaltable>
    </sect2>

    <sect2 id="kernel">
      <title>对内核的改动</title>

      <para>为 &man.clock.gettime.2; 和相关系统调用新增了符合 POSIX
	的时钟 ID <literal>CLOCK_THREAD_CPUTIME_ID</literal>。</para>

      <para>新增了 &man.cpuset.2; 系统调用。 这是用于将线程与 CPU 及
	CPU 资源组进行绑定和分配的 API。</para>

      <para>从 OpenSolaris 引入了 DTrace， 一套完整的动态跟踪框架以及
	&man.dtrace.1; 用户态工具。 DTrace 为管理员、
	开发人员以及支持工程师提供了用于回答操作系统和用户程序各类问题的强大的基础设施。 </para>
      <para>为内核调试器 &man.ddb.4; 新增了输出捕捉机制。
	来自 &man.ddb.4; 的输入和输出内容会自动捕捉到一个内存缓冲区，
	以便在随后通过 &man.sysctl.8; 或 textdump 来读取和分析。
	新增的 <command>capture</command> 命令可以控制这个功能。</para>

      <para>为 &man.ddb.4; 调试器新增了简单的脚本机制支持，
	使其能够支持一组经过命名的包含一系列 &man.ddb.4; 命令的脚本。
	这些脚本可以在 &man.ddb.4; 中， 或通过新增的 &man.ddb.8;
	来进行配置。 更多详情请参见联机手册 &man.ddb.4;。</para>

      <para>&man.ddb.4; 的 <command>ex</command> 命令新增了
	<option>/S</option> 模式， 用于将指定的符号解析成地址并打印其值。 例如
	<userinput>ex /S <replaceable>aio_swake</replaceable></userinput>
	可以显示出当前通过 <replaceable>aio_swake</replaceable> 挂钩注册的地址。</para>

      <para>为 &man.ddb.4; 新增了 <command>show conifhk</command> 命令。
	它能够列出在 <function>run_interrupt_driven_config_hooks()</function> 中等待的挂钩。</para>

      <para>&man.fcntl.2; 系统调用新增了
	<literal>F_DUP2FD</literal> 命令的支持。 它与
	&man.dup.2; 作用相同， 并与 Sun Solaris 和 IBM AIX 兼容。</para>

      <para>&os; 的 &man.linux.4; ABI 支持使用真正的 CPU 绑定配置原语实现了
	<function>sched_setaffinity()</function> 和
	<function>sched_getaffinity()</function>。</para>

      <para>&man.rpc.lockd.8; 客户端的功能在 &os; 内核中重新进行了实现。
	这个实现提供了正确的 &man.flock.2; 风格的锁语义，
	后者在命令行工具 &man.lockf.1; 和库函数 &man.pidfile.3;
	中有所使用。 它同时还提供了服务器重启时的恢复能力，
	并能够确保修改过的数据块在获得锁之前写入服务器
	(这使得多个不同的客户端能够安全地利用文件上锁来共享数据)。
	此外， 新增了内核选项
	<literal>options NFSLOCKD</literal> 并默认启用。
	如果启用了内核支持， 则 &man.rpc.lockd.8;
	会自动检测并使用这一功能。</para>

      <para>内核新增了 textdump 格式的主存内容转存能力。
	与传统主存内容转存方式不同， textdump
	通过一系列机械化的生成/提取调试输出来提供高一级的信息。
	这个机制即使在内核没有包含调试符号， 或源代码与内核不完全同步的情况下，
	仍然能够提供简明但内容丰富的调试信息。 关于这一机制的进一步详情请参见联机手册
	&man.textdump.4;。</para>

      <para>&man.wait4.2; 系统调用新增了
	<option>WNOWAIT</option> 标志以保持进程的可等待状态，
	以及与 <option>WUNTRACED</option> 等价的 <option>WSTOPPED</option>
	标志。</para>

      <para arch="amd64,i386,sparc64">&os; 内核支持将中断与 CPU 绑定了。</para>

      <para arch="amd64,i386">ULE
	调度器成为了 <filename>GENERIC</filename> 内核的默认进程调度器。</para>

      <para>新增了与内核选项
	<literal>COMPAT_FREEBSD[456]</literal> 对应的 sysctl
	变量 <varname>kern.features.compat_freebsd[456]</varname>。</para>

    <sect3 id="boot">
      <title>引导加载器的变化</title>

      <para arch="amd64,i386"> 对引导加载器使用的 BTX 内核进行了修改，
	使其在实模式下调用 BIOS 例程。 这一变动使得从 USB
	设备引导 &os; 成为了可能。</para>

      <para arch="amd64,i386"> 新增了用于支持从 GPT
	标签引导系统的 gptboot 引导加载器。 为
        &man.gpt.8; 工具新增了 <command>boot</command> 命令，
	其作用是通过写入引导加载器， 并根据需要创建新的引导分区来让
        GPT 磁盘能够引导系统。</para>
    </sect3>

    <sect3 id="proc">
      <title>硬件支持</title>

	<para>新增了用于支持 Omnikey CardMan 4040
	  PCMCIA 智能卡阅读器的 &man.cmx.4; 驱动。</para>

	<para arch="sparc64">新增了 &man.kbdmux.4; 驱动程序。
	  &man.sunkbd.4; 能够支持模拟 &man.atkbd.4; 的
	  &man.ukbd.4; 了。</para>

	<para><filename>nvram(4)</filename> 驱动是
	  MPSAFE 的了。</para>

	<para>不再支持用于 &man.puc.4;
	  驱动程序的 <literal>PUC_FASTINTR</literal> 选项。</para>

	<para>&man.psm.4; 驱动程序会首先尝试检测触摸板之后再检测 IntelliMouse。
	  一些触摸板会伪装成 IntelliMouse， 导致探测 IntelliMouse 正常，
	  而检测触摸板则无法正常工作。</para>

	<para>从 OpenBSD 引入了用于支持基于 Silicon
	  Laboratories CP2101/CP2102 USB 串口适配器的 &man.uslcom.4; 驱动。</para>

	<sect4 id="mm">
	  <title>多媒体支持</title>

	  <para>&man.agp.4; 驱动程序新增了 Intel G33 和
	    G45 的支持。</para>

	  <para arch="i386">新增了使用 VESA BIOS 的 DPMS 功能来完成挂起和恢复的
	    <filename>dpms(4)</filename> 驱动程序。</para>

	  <para>内核驱动程序 <application>DRM</application> 新增了 i915 GME 设备的支持。</para>
	</sect4>

	<sect4 id="net-if">
	  <title>网络接口支持</title>

	  <para>新增了用于支持
	    Atheros AR8121/AR8113/AR8114 千兆/百兆以太网控制器的 &man.ale.4; 驱动程序。
	    在这一版本中的 <filename>GENERIC</filename>
	    内核中默认并不包含此驱动。</para>

	  <para>将 &man.em.4; 驱动程序分拆成了两个共享部分代码的驱动程序。
	    &man.em.4; 驱动程序将继续支持高至 82575 的网卡以及新的针对客户机/桌面的网卡。
	    新增的 &man.igb.4; 驱动程序则用于支持新的服务器网卡。</para>

	  <para>对 &man.hme.4; 驱动程序进行了改进。</para>

	  <para>&man.ixgbe.4; 驱动程序更新到了来自 Intel 的
	    1.6.2 版本。</para>

	  <para>某些采用 &man.miibus.4; 支持的驱动程序的
	    IEEE 802.3 自动协商顺序不正确的问题得到了修正。
	    现在它会按照 Annex
	    288.3 描述的顺序正确地进行 IEEE 802.3 支持技术协商了。</para>

	  <para>为 &man.msk.4; 驱动程序添加了针对短帧 TCP/UDP 硬件校验和计算 bug
	    的 workaround。 注意对于需要硬件进行
	    VLAN tag 插入的帧而言， 这个 workaround 没有做用， 因为在 mbuf 中插入
	    VLAN tag 会导致校验和变化。 因此如果需要
	    VLAN 就必须禁用硬件校验和辅助计算。</para>

	  <para>对 &man.ndis.4; NDIS miniport 驱动封装程序进行了改进。</para>

	  <para>对 &man.sf.4; 驱动程序进行了改进， 它支持校验和辅助计算了。</para>

	  <para>&man.stge.4; 驱动程序支持 WOL (通过
	    LAN 唤醒) 了。</para>

	  <para>对 &man.vr.4; 驱动程序进行了改进。</para>

	  <para arch="amd64,i386"> 对 &man.wpi.4; 驱动程序进行了更新，
	    修正了一系列可靠性问题。</para>
	</sect4>
      </sect3>

      <sect3 id="net-proto">
	<title>网络协议</title>

	<para>&man.arp.8; 工具新增了 <literal>reject</literal>
	  和 <literal>blackhole</literal> 关键字。
	  对于标记为 <literal>reject</literal> 的项目，
	  发到主机的流量将被丢弃， 而发送者则会得到主机无法到达的回应。
	  对于标记为 <literal>blackhole</literal> 的项目，
	  则只是简单地丢弃这些流量。</para>

	<para>&man.bpf.4; 新增了
	  ioctl <literal>BIOCSETFNR</literal>。 这个功能和
	  <literal>BIOCSETF</literal> 类似， 但不丢弃描述符缓冲的所有包并重置统计数据。</para>

	<para>&man.if.bridge.4; 支持使用
	  &man.ifconfig.8; 的 <literal>ifmaxaddr</literal> 参数来限制网桥接口后面的源
	  MAC 数量了。</para>

	<para>修正了可能在 &man.carp.4; 接口配置时导致内核崩溃的 bug。</para>

	<para>&man.dummynet.4; 子系统新增了
	  <literal>fast</literal> 运行模式， 使得特定的包能够绕过 dummynet 调度器。
	  这能够降低延迟以及在包经过管道带宽限制时的开销， 并消除子系统内部的递归。
	  新增的 sysctl 变量
	  <varname>net.inet.ip.dummynet.io_fast</varname> 可以用来启用这一功能。</para>

	<para>&man.enc.4; 新增了用于决定防火墙或 &man.bpf.4; 能够看到进入或流出 IPsec
	  包的内部以及外部报头的一系列 sysctl 变量。</para>

	<para>&man.gre.4; 新增了
	  ioctl <literal>GRESKEY</literal>
	  和 <literal>GREGKEY</literal>， 用于设置和读取发出包时的 GRE
	  秘钥。</para>

	<para>修正了 &man.ipsec.4; 子系统中的一个导致在路由 MTU 比接口路由 MTU 低时 PMTU 失效的 bug。</para>

	<para>由于缺少多处理器支持， 删去了 netatm 子系统。</para>

	<para>&man.ng.nat.4; 能够通过 <filename>libalias</filename> 支持包的重定向了。
	  如欲了解进一步细节请参见联机手册。</para>

	<para>&man.ng.pptpgre.4; 新增了类似
	  &man.ng.l2tp.4; 的多重挂钩， 使用一对 pptpgre 和 ksocket 节点来完成两个断点的全部调用。</para>

	<para>&man.resolver.3; 允许在域名中出现下划线了。
	  尽管这违反 RFC 1034 [STD 13]， 但一些域名服务器和其他流行的操作系统的解析库都允许这种域名。</para>

	<para>新增了用于 TCP socket 的 socket 选项 <literal>TCP_CONGESTION</literal>。
	  它能够设置和读取拥塞控制算法。 选择这个名字的目的是与 Linux 兼容。</para>

	<para>在 <varname>inpcbinfo</varname> 和 <varname>inpcb</varname>
	  基础设施以及依赖这一基础设施的协议， 包括 UDP、 TCP
	  和 IP raw socket 中使用了 &man.rwlock.9; 来减少锁的冲撞。</para>
      </sect3>

      <sect3 id="disks">
	<title>磁盘和存储</title>

	<para>&man.aac.4; 驱动程序支持尺寸超过
	  2TB 的卷了。</para>

	<para>为 &man.ata.4; 驱动程序新增了引导加载器变量
	  <varname>hw.ata.ata_dma_check_80pin</varname>。 它可以用来在一些笔记本和 Soekris
	  的有问题的主板上禁止 80针 电缆检查。 默认配置是
	  <literal>1</literal>。</para>

	<para>修正了在 ServerWorks HT1000 芯片组上 &man.ata.4; 驱动程序导致的数据损坏问题。</para>

	<para>&man.ciss.4; 驱动程序新增了引导加载器变量
	  <varname>hw.ciss.nop_message_heartbeat</varname>
	  用于在 <function>ciss_periodic()</function> 中以
	  NOP-消息轮询。 这可以作为
	  <literal>ADAPTER HEARTBEAT FAILED</literal> 问题的 workaround。
	  默认配置为 <literal>0</literal> (禁用)。</para>

	<para><filename>geom_part</filename> GEOM 类 可以作为内核模块联编了。</para>

	<para><filename>geom_linux_lvm</filename> GEOM 类 可以作为内核模块联编了。</para>

	<para>&man.hptrr.4; 更新到了来自 Highpoint 的 1.2
	  版。</para>

	<para>修正了 &man.iir.4; 驱动程序中的一处缓冲区溢出。
	  这修正了大量关于这一驱动的怪异问题。</para>

	<para>&man.mpt.4; 驱动程序支持 <literal>mpt_user</literal>
	  个体了。</para>

	<para>&man.rr232x.4; 被
	  &man.hptrr.4; 驱动程序取代。</para>

	<para>&man.twa.4; 驱动程序针对大量内存和高 CPU 负载的机器进行了可靠性改进。</para>
      </sect3>

      <sect3 id="fs">
	<title>文件系统</title>

	<para>&man.fdescfs.5; 是 MPSAFE 的了。</para>

	<para>&man.gpart.8; 新增了 BSD 标签 (option
	  <literal>GEOM_PART_BSD</literal>) 和
	  VTOC8 标签 (option
	  <literal>GEOM_PART_VTOC8</literal>) 的支持。</para>

	<para>&man.gvinum.8; 新增了用于创建 plex 的 <replaceable>volume</replaceable>
	  参数。</para>

	<para>修正了 <filename>unionfs(7)</filename> 中 UNIX domain socket 路径名的一个查找 bug。</para>
      </sect3>
    </sect2>

    <sect2 id="userland">
      <title>用户环境变动</title>

      <para>&man.adduser.8; 工具新增了用于指定新用户主目录的
	<option>-M</option> 选项。</para>

      <para>&man.atacontrol.8; 工具新增了用于设置将设备置于减速状态超时时间的
	<command>spindown</command> 命令。</para>

      <para>&man.chflags.1; 新增了用于指定详细输出的 <option>-v</option> 选项，
	以及类似于 (例如) &man.chmod.1; 对应的忽略错误语义的 <option>-f</option> 选项。</para>

      <para>&man.cp.1; 新增了等价于 <option>-RpP</option> 的 <option>-a</option> 选项。</para>

      <para>修正了导致 &man.cp.1; 工具无法复制 POSIX.1e ACL (参见
	&man.acl.3;) 的 bug。</para>

      <para>&man.cron.8; 支持使用 <option>-m</option> 选项来指定默认的邮件收件人了。
	这一配置可以通过 <filename>crontab</filename> 文件中的 <literal>MAILTO=</literal>
	配置来覆盖。</para>

      <para>&man.dhclient.8; 新增了对于
	&man.dhcp-options.5; 中更多选项的支持。</para>

      <para>&man.dhclient.8; 新增了用于判断当前接口是否提供默认路由的
	<function>is_default_interface()</function> 函数。</para>

      <para>修正了导致 &man.dhclient.8; 无法删除默认路由的 bug。</para>

      <para>环境变量数组 &man.environ.7; 支持将变量的第一个字符设置为
	NUL 来删除变量了。 这一功能是一些第三方软件如
	<application>Dovecot</application>
	和 <application>Postfix</application> 所需要的。</para>

      <para>&man.fdisk.8; 新增了禁止显示警告的 <option>-q</option> 选项。</para>

      <para>&man.fetch.1; 程序和 <filename>libfetch</filename>
	函数库新增了对于 <varname>NO_PROXY</varname> 环境变量的支持。
	这个环境变量可以用来指定逗号或空格分开的主机名列表，
	令这些主机不使用代理。 如果使用星号， 则表示禁止使用代理。</para>

      <para>新增了 &man.ffsll.3; 和 &man.flsll.3; 函数。
	除了在 long long 类型上操作之外它们和 &man.ffs.3; 及 &man.fls.3; 功能相同。</para>

      <para>&man.fortune.6; 程序新增了对于使用
	<varname>FORTUNE_PATH</varname> 环境变量指定搜索 fortune 文件的支持。</para>

      <para>修正了导致 &man.fortune.6; 程序的
	<option>-e</option> 选项无法配合多个文件工作的 bug。</para>

      <para>&man.freebsd-update.conf.5; 新增了
	<literal>IDSIgnorePaths</literal> 语句。</para>

      <para>&man.fwcontrol.8; 工具新增了用于在下次总线复位时将
	<replaceable>node</replaceable> 指定为根节点的 <option>-f
	  <replaceable>node</replaceable></option> 选项。</para>

      <para arch="sparc64">&man.gcc.1; 能够正确处理 <option>-mcpu</option> 选项了。
	之前它是硬编码的 <option>-mcpu=ultrasparc</option>。</para>

      <para>&man.gpt.8; 支持 ZFS 了。</para>

      <para>&man.ifconfig.8; 新增了显示 WPS IE
	(Wireless Provisioning Services Information Element) 的支持。</para>

      <para>&man.kgdb.1; 新增了用于定位 &man.kld.4; 及其符号的
	<command>add-kld <replaceable>kld</replaceable></command> 命令。</para>

      <para>&man.kgdb.1; 新增了动态连接库后端， 将 &man.kld.4; 视为动态连接库，
	并在启动时自动为 &man.kld.4; 加载符号。</para>

      <para>&man.kgdb.1; 新增了 <command>tid</command> 命令以及其他与内核模块相关的命令，
	并可以远程工作。</para>

      <para>新增了用于获得全局 CPU 时间统计的 &man.kvm.getcptime.3; 函数。</para>

      <para><filename>libalias</filename> 函数库支持小写的 FTP 命令
	<literal>PORT</literal> 和
	<literal>EPRT</literal> 了。</para>

      <para>&man.man.1; 新增了对于
	&man.bzip2.1; 压缩的联机手册的有限支持。</para>

      <para>&man.mdconfig.8; 新增了 <option>-v</option>
	(详细) 选项， 用于配合 <option>-l</option> 命令使用。
	它可以显示所有 &man.md.4; 设备的尺寸和后端存储。</para>

      <para>新增了 &man.memrchr.3; 函数。 它和 &man.memchr.3; 的不同之处在于它是从后匹配字符。</para>

      <para>修正了 &man.morse.6; 程序输出中的语法错误。</para>

      <para>&man.mountd.8; 工具新增了用于指定绑定 TCP 和 UDP 请求的 IP 地址的 <option>-h
	  <replaceable>bindip</replaceable></option> 选项。 这个选项可以指定多次。 如果没有指定
	<option>-h</option> 选项则表示使用
	<literal>INADDR_ANY</literal> 。 如果通过这个选项指定 IP 地址，
	它会自动将 <literal>127.0.0.1</literal> 加入列表；
	如果启用了 IPv6， 则 <literal>::1</literal> 也会自动加入列表。</para>

      <para>&man.moused.8; 工具新增了用于改变滚轮速度的 <option>-L</option>
	选项以及只影响滚轮阈值的
	<option>-U</option> 选项。</para>

      <para>&man.mv.1; 在将目录移动到跨设备的另一个已经存在的目录时遵循 POSIX 规范。</para>

      <para>&man.periodic.8; 新增了 &man.periodic.conf.5; 配置变量
	<varname>daily_status_mail_rejects_shorten</varname>。
	它表示按照黑名单来给出拒收列表而不给出具体的发送人主机。
	默认的配置则保持原先的输出格式不变。</para>

      <para>&man.ping6.8; 采用与 &man.ping.8; 相同的返回码
	<literal>0</literal> 和 <literal>2</literal> 了。</para>

      <para>&man.ping6.8; 新增了使其在收到一个回应包之后正常退出的 <option>-o</option> 选项。</para>

       <para>&man.ping6.8; 新增了和
	&man.ping.8; 的 <option>-a</option> 和 <option>-A</option> 等价的
	<option>-r</option> 和 <option>-R</option> 选项。</para>

      <para>将 &man.ping6.8; 允许的最小间隔从 0.01 减少到了 0.000001。</para>

      <para>&man.realpath.1; 新增了用于禁止给出警告信息的
	<option>-q</option> 选项； 此外， 它能够接受多个路径作为命令行参数了。</para>

      <para>&man.rfcomm.pppd.8; 新增了 <option>-D</option>
	选项用于在 LAN (LAN Access Using PPP) 服务之外注册
	DUN (Dial-Up Networking) 服务。</para>

      <para>&man.sdpd.8; 新增了 <literal>NAP</literal>,
	<literal>GN</literal> 和 <literal>PANU</literal>
	配置文件。</para>

      <para>&man.setkey.8; 支持将
	<literal>esp</literal> 作为 <command>spdadd</command> 命令的协议名了。</para>

      <para>修正了 &man.telnetd.8; 在指定了 <option>-a off</option> 时仍然试图进行身份验证的 bug。</para>

      <para>&man.top.1; 和 &man.vmstat.8; 新增了显示每个 CPU 统计的
	<option>-P</option> 选项。</para>

      <para>&man.traceroute.8; 新增了用于显示每跳 IP 对应的 AS 编号的
	<option>-a</option> 选项。 它会从 <option>-A</option> 选项指定的
	WHOIS 服务器进行查询。 如果没有指定 <option>-A</option> 选项，
	则默认使用 <hostid>whois.radb.net</hostid>。</para>

      <para>新增了用于编码和解码 UUID 二进制形式的 &man.uuid.enc.le.3;、 &man.uuid.dec.le.3;、
	&man.uuid.enc.be.3; 和 &man.uuid.dec.be.3; 函数。</para>

      <para>&man.watch.8; 支持同时超过 10 个
	&man.snp.4; 设备了。</para>

      <para>&man.ypserv.8; 新增了用于指定监听端口的 <option>-P</option> 参数。</para>

      <sect3 id="rc-scripts">
	<title><filename>/etc/rc.d</filename> 脚本</title>

	<para>&man.rc.conf.5; 新增了当
	  <varname>firewall_enable</varname> 为 <literal>YES</literal> 时自动加载
	  &man.dummynet.4; 内核模块的
	  <varname>dummynet_enable</varname> 变量。</para>

	<para><filename>ntpd</filename> &man.rc.8; 脚本可以在没有
	  <filename>/etc/ntp.conf</filename> 配置文件的情况下工作了。</para>

	<para><filename>ppp</filename> &man.rc.8; 脚本支持多份实例了。
	  如欲了解细节， 请参阅 &man.rc.conf.5; 的
	  <varname>ppp_profile</varname> 变量。</para>

	<para><filename>sysctl</filename> &man.rc.8; 脚本新增了在
	  <filename>/etc/sysctl.conf</filename> 基础上加载
	  <filename>/etc/sysctl.conf.local</filename> 的支持。</para>

	<para>&man.rc.conf.5; 新增了为网卡和附加设备， 通过
	  <filename>rc.firewall</filename> 规则集配置
	  <varname>firewall_type</varname> 是 <literal>simple</literal> 或
	  <literal>client</literal> 防火墙的支持。 请参阅
	  <varname>firewall_client_net</varname>、
	  <varname>firewall_simple_iif</varname>、
	  <varname>firewall_simple_inet</varname>、
	  <varname>firewall_simple_oif</varname>、 和
	  <varname>firewall_simple_onet</varname>。</para>
      </sect3>
    </sect2>

    <sect2 id="contrib">
      <title>基本系统中的第三方软件</title>

      <para><application>am-utils</application> 从 6.0.10p1 版升级到了 6.1.5 版。</para>

      <para><application>ISC BIND</application> 升级到了 9.4.2-P2 版。</para>

      <para><application>awk</application> 从 2007 年 5 月 1 日版升级到了
	2007 年 10 月 23 日版。</para>

      <para><application>bzip2</application> 从 1.0.4
        升级到了 1.0.5。</para>

      <para><application>CVS</application> 更新到了 1.11.22.1。</para>

      <para><application>hostapd</application> 更新到了
	0.5.10 版 + radius ACL 支持。</para>

      <para><filename>libarchive</filename> 更新到了
	2.5.5 版。</para>

      <para><application>ncurses</application> 库更新到了 5.6-20080503 版。</para>

      <para><application>NTP</application> 更新到了
	4.2.4p5 版。</para>

      <para><application>OpenPAM</application> 从
        Figwort 版升级到了 Hydrangea 版。</para>

      <para><application>OpenSSH</application> 从
	4.5p1 版升级到了 5.1p1 版。</para>

      <para>&man.resolver.3; 库更新到了 <application>ISC BIND</application> 9.4.3。</para>

      <para><application>sendmail</application> 从
	8.14.2 版升级到了 8.14.3 版。</para>

      <para>时区数据库从
	<application>tzdata2007h</application> 版升级到了
	<application>tzdata2008b</application> 版。</para>

      <para><application>wpa_supplicant</application> 更新到了
	0.5.10 版 + syslog 支持。</para>
    </sect2>

    <sect2 id="releng">
      <title>发布工程与系统集成</title>

      <para>支持的
        <application>GNOME</application> 桌面环境
        (<filename role="package">x11/gnome2</filename>) 从
        2.20.1 升级到了 2.22。</para>

      <para>支持的
	<application>KDE</application> 桌面环境
	(<filename role="package">x11/kde3</filename>) 从
	3.5.8 升级到了 3.5.10。</para>
    </sect2>
  </sect1>

  <sect1 id="upgrade">
    <title>从先前版本的 &os; 升级</title>

    <para arch="amd64,i386"> 从 &os; 6.2-RELEASE 开始，
      系统已经能够通过使用 &man.freebsd-update.8; 来实现 RELEASE 版本之间
      (以及不同安全分支的快照版本) 的二进制升级。 二进制升级过程将更新未经修改的 userland
      工具， 以及随官方 &os; 发行版发布的、 未作修改的 GENERIC 内核。
      使用 &man.freebsd-update.8; 工具的主机，
      需要有可用的 Internet 连接。</para>

    <para>旧式的二进制升级， 则是通过随 CDROM 发行介质提供的 &man.sysinstall.8; 的
      <command>Upgrade</command> 选项来完成的。 这种二进制升级方式，
      对于 非-&arch.i386;、 非-&arch.amd64; 的，
      以及没有接入 Internet 的系统而言会比较有用。</para>

    <para>此外， 也可以使用源代码从较早版本升级的方式 (通过从源代码重新编译 &os;
      的基本系统)， 其操作方法请参见
      <filename>/usr/src/UPDATING</filename>。</para>

    <important>
      <para>很显然，升级 &os; 时，应该首先备份
	<emphasis>全部</emphasis> 数据和配置文件。</para>
    </important>
  </sect1>
</article>

