<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <corpauthor>The &os; Project</corpauthor>

  <pubdate>$FreeBSD$</pubdate>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <year>2004</year>
    <year>2005</year>
    <year>2006</year>
    <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
  </copyright>

  <legalnotice id="trademarks" role="trademarks">
    &tm-attrib.freebsd;
    &tm-attrib.ibm;
    &tm-attrib.ieee;
    &tm-attrib.intel;
    &tm-attrib.sparc;
    &tm-attrib.general;
  </legalnotice>

  <abstract>
    <para>The release notes for &os; &release.current; contain a summary
      of the changes made to the &os; base system on the
      &release.branch; development line.
      This document lists applicable security advisories that were issued since
      the last release, as well as significant changes to the &os;
      kernel and userland.
      Some brief remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes recently added, changed, or deleted features of &os;.
    It also provides some notes on upgrading
    from previous versions of &os;.</para>

<![ %release.type.current [

  <para>The &release.type; distribution to which these release notes
    apply represents the latest point along the &release.branch; development
    branch since &release.branch; was created.  Information regarding pre-built, binary
    &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.snapshot [

  <para>The &release.type; distribution to which these release notes
    apply represents a point along the &release.branch; development
    branch between &release.prev; and the future &release.next;.
    Information regarding
    pre-built, binary &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.release [

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="&url.books.handbook;/mirrors.html"><quote>Obtaining
    &os;</quote> appendix</ulink> to the <ulink
    url="&url.books.handbook;/">&os;
    Handbook</ulink>.</para>

]]>

  <para>All users are encouraged to consult the release errata before
    installing &os;.  The errata document is updated with
    <quote>late-breaking</quote> information discovered late in the
    release cycle or after the release.  Typically, it contains
    information on known bugs, security advisories, and corrections to
    documentation.  An up-to-date copy of the errata for &os;
    &release.current; can be found on the &os; Web site.</para>

</sect1>

<sect1 id="new">
  <title>What's New</title>

  <para>This section describes
    the most user-visible new or changed features in &os;
    since &release.prev;.</para>

  <para>Typical release note items
    document recent security advisories issued after
    &release.prev;,
    new drivers or hardware support, new commands or options,
    major bug fixes, or contributed software upgrades.  They may also
    list changes to major ports/packages or release engineering
    practices.  Clearly the release notes cannot list every single
    change made to &os; between releases; this document focuses
    primarily on security advisories, user-visible changes, and major
    architectural improvements.</para>

  <sect2 id="security">
    <title>Security Advisories</title>

    <para>A temporary file vulnerability in &man.texindex.1;, which
      could allow a local attacker to overwrite files in the context
      of a user running the &man.texindex.1; utility, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:01.texindex.asc">FreeBSD-SA-06:01.texindex</ulink>.</para>

    <para>A temporary file vulnerability in the &man.ee.1; text
      editor, which could allow a local attacker to overwrite files in
      the context of a user running &man.ee.1;, has been fixed.  For
      more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:02.ee.asc">FreeBSD-SA-06:02.ee</ulink>.</para>

    <para>Several vulnerabilities in the &man.cpio.1; utility have
      been corrected.  For more
      details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:03.cpio.asc">FreeBSD-SA-06:03.cpio</ulink>.</para>

    <para>An error in &man.ipfw.4; IP fragment handling, which could
      cause a crash, has been fixed.  For more
      details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:04.ipfw.asc">FreeBSD-SA-06:04.ipfw</ulink>.</para>

    <para>A potential buffer overflow in the IEEE 802.11 scanning code
      has been corrected.  For more
      details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:05.80211.asc">FreeBSD-SA-06:05.80211</ulink>.</para>

    <para>Two instances in which portions of kernel memory could be
      disclosed to users have been fixed.  For more details see
      security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:06.kmem.asc">FreeBSD-SA-06:06.kmem</ulink>.</para>

    <para>A logic bug in the IP fragment handling in &man.pf.4;, which
      could cause a crash under certain circumstances, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:07.pf.asc">FreeBSD-SA-06:07.pf</ulink>.</para>

    <para>A logic bug in the NFS server code, which could cause a crash when
      the server received a message with a zero-length payload, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:10.nfs.asc">FreeBSD-SA-06:10.nfs</ulink>.</para>

    <para>A programming error in the &man.fast.ipsec.4; implementation
      results in the sequence number associated with a Security
      Association not being updated, allowing packets to unconditionally
      pass sequence number verification checks, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:11.ipsec.asc">FreeBSD-SA-06:11.ipsec</ulink>.</para>

    <para>A logic bug that could cause &man.opiepasswd.1; to allow an unprivileged
      user to configure OPIE authentication for the root user under certain
      circumstances, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:12.opie.asc">FreeBSD-SA-06:12.opie</ulink>.</para>

    <para>An asynchronous signal handling vulnerability in &man.sendmail.8;,
      which could allow a remote attacker to execute arbitrary code with the
      privileges of the user running sendmail, typically <username>root</username>, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:13.sendmail.asc">FreeBSD-SA-06:13.sendmail</ulink>.</para>

    <para arch="i386,amd64">An information disclosure issue found in the
      &os; kernel running on 7th- and 8th-generation AMD processors
      has been fixed.  For more details see security advisory <ulink
       url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:14.fpu.asc">FreeBSD-SA-06:14.fpu</ulink>.</para>

  </sect2>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para>The &man.ddb.4; debugger now supports the <literal>show lock</literal>
      command.  If the argument has a valid lock class,
      this displays various information about the lock and calls a
      new function pointer in lock_class (lc_ddb_show) to dump class-specific
      information about the lock as well (such as the owner of a mutex or
      xlock'ed sx lock).</para>

    <para><filename>DEFAULTS</filename> kernel configuration files
      for each platform have been added.</para>

    <para>The &man.firmware.9; subsystem has been added.  This allows
      to load binary data into the kernel via a specially crafted module.</para>

    <para>The &man.random.4; entropy device driver is now MPSAFE.</para>

    <para>A new sysctl variable <varname>security.mac.biba.interfaces_equal</varname>
      which makes all network interfaces be created with the label
      <literal>biba/equal(equal-equal)</literal>, has been added.
      This is useful where programs such as &man.dhclient.8; and &man.ppp.8;.
      which initialize network interfaces do not have any labeling support.
      This variable is set as <literal>0</literal>(disabled) by default.</para>

    <!-- Above this line, sort kernel changes by manpage/keyword-->

    <sect3 id="boot">
      <title>Boot Loader Changes</title>

      <para arch="i386,amd64">A new loader tunable
	<varname>comconsole_speed</varname> to change
	the serial console speed has been added.
	If the previous stage boot loader requested a serial console
	then the default speed is determined from the current serial port
	speed, and otherwise it is set to 9600 or the value of
	the kernel option <literal>BOOT_COMCONSOLE_SPEED</literal>
	at compile time.</para>

      <!-- Above this line, order boot loader changes by keyword-->

    </sect3>

    <sect3 id="proc">
      <title>Hardware Support</title>

      <para>The &man.acpi.thermal.4; driver now supports
	passive cooling.</para>

      <para arch="i386,pc98">The &man.ce.4; driver, which supports
	Cronyx Tau-PCI/32 adapters, has been added.</para>

      <para>The &man.kbdmux.4; driver has been integrated into &man.syscons.4; and
	the <devicename>kbd</devicename> device driver.
	By default &man.syscons.4; will look for the &man.kbdmux.4;
	keyboard first, and then, if not found, look for any keyboard.
	Switching to &man.kbdmux.4; can be done at boot time by loading
	the <literal>kbdmux</literal> kernel module via &man.loader.8;,
	or at runtime via &man.kldload.8; and releasing the active
	keyboard.</para>

      <para arch="i386">The &man.kbdmux.4; driver has been included in the
	<filename>GENERIC</filename> kernel by default.
	Also, the <quote>Boot FreeBSD with USB keyboard</quote>
	menu item in the boot loader menu has been removed
	since this fixes USB keyboard probing problems.
	</para>

      <sect4 id="mm">
	<title>Multimedia Support</title>

	<para>The &man.agp.4; driver now supports ATI IGP chipsets.</para>

	<para>The &man.sound.4; driver now supports
	  wider range sampling rate, multiple precisions choice,
	  and 24/32 bit PCM format conversion.</para>

	<para>The &man.snd.atiixp.4; driver has been added.
	  This supports ATI IXP 200/300/400 series audio controllers.</para>

	<para>The &man.snd.als4000.4; driver is now MPSAFE.</para>

	<para>The &man.snd.es137x.4; driver is now MPSAFE.</para>

	<para>The &man.snd.ich.4; driver is now MPSAFE.</para>

	<para>The &man.snd.solo.4; driver is now MPSAFE.</para>

	<para arch="amd64">The &man.speaker.4; driver now supports &os;/amd64.</para>

	<para>The &man.snd.via8233.4; driver is now MPSAFE.</para>

	<para>The &man.snd.via82c686.4; driver is now MPSAFE.</para>

      </sect4>

      <sect4 id="net-if">
	<title>Network Interface Support</title>

	<para>The &man.ath.4; driver has been updated to
	  version 0.9.16.16.</para>

	<para arch="i386,amd64">The &man.bce.4; driver, which supports Broadcom
	  NetXtreme II (BCM5706/BCM5708) PCI/PCIe Gigabit Ethernet controllers,
	  has been added.  For more details, see &man.bce.4;.</para>

	<para>A bug which prevents the &man.bfe.4; driver from working
	  on a system with over 1GB RAM has been fixed.</para>

	<para>The &man.bge.4; driver now supports &man.polling.4; mode.</para>

	<para>The &man.em.4; driver now supports big-endian
	  architectures such as sparc64.</para>

	<para>The &man.le.4; driver, which supports AMD Am7900 LANCE
	  and Am79C9xx PCnet NICs and is based on NetBSD's implementation,
	  has been added.  While the &man.lnc.4; driver also supports these
	  NICs, this driver has several advantages over it such as
	  MPSAFE, ALTQ, VLAN_MTU, ifmedia, and 32-bit DMA for PCI
	  variants.</para>

	<para>The &man.lge.4; driver is now MPSAFE.</para>
      </sect4>
    </sect3>

    <sect3 id="net-proto">
      <title>Network Protocols</title>

      <para>The &man.arp.8; retransmission algorithm has been
	rewritten as that ARP requests are retransmitted without
	suppression, while there is demand for such ARP entry.
	Due to this change, a sysctl variable
	<varname>net.link.ether.inet.host_down_time</varname>
	has been removed.</para>

      <para>The &man.arp.8; now supports a sysctl variable
	<varname>net.link.ether.inet.log_arp_permanent_modify</varname>
	to suppress logging of attempts to modify
	permanent ARP entries.</para>

      <para>The &man.if.bridge.4; bridge driver now supports
	creating span ports, which transmit a copy of every frame
	received by the bridge.  This feature can be enabled
	by using &man.ifconfig.8;.</para>

      <para>The &man.if.bridge.4; bridge driver now supports
	RFC 3378 EtherIP.  This change makes it possible to
	add &man.gif.4; interfaces to bridges, which will then
	send and receive IP protocol 97 packets.
	Packets are Ethernet frames with an EtherIP header prepended.</para>

      <para>The &man.ipfw.4; IP packet filter now supports IPv6.
	The &man.ip6fw.8; packet filter is deprecated and will be removed
	in the future releases.</para>

      <para>The &man.ipfw.4; now supports substitution of the action
	argument with the value obtained from table lookup,
	which allows some optimization of rulesets.
	This is now applicable only to <literal>pipe</literal>,
	<literal>queue</literal>,
	<literal>divert</literal>,
	<literal>tee</literal>,
	<literal>netgraph</literal>,
	and <literal>ngtee</literal> rules.
	For example, the following rules will throw different
	packets to different pipes:</para>

      <programlisting>pipe 1000 config bw 1000Kbyte/s
pipe 4000 config bw 4000Kbyte/s
table 1 add x.x.x.x 1000
table 1 add x.x.x.y 4000
pipe tablearg ip from table(1) to any</programlisting>

      <para>A bug has been fixed in which NFS over TCP would not reconnect
	when the server sent a FIN.  This problem had occurred
	with Solaris NFS servers.</para>

      <para>The &man.ng.iface.4; Netgraph node now supports &man.altq.4;.</para>

      <para>The path MTU discovery for multicast packets in the &os;
	&man.ip6.4; stack has been disabled by default because
	notifying path MTU by a lot of routers in multicast
	can be a kind of distributed Denial-of-Service attack to a router.
	This feature can be re-enabled by using a new sysctl variable
	<varname>net.inet6.ip6.mcast_pmtu</varname>.</para>

      <para>The TCP bandwidth-delay product limiting feature has
	been disabled when the RTT is below a certain threshold.
	This optimization does not make sense on a LAN as it has
	trouble figuring out the maximal bandwidth due to the coarse
	tick granularity.  A new sysctl variable
	<varname>net.inet.tcp.inflight.rttthresh</varname> specifies
	the threshold in milliseconds below which this feature
	will disengage.  It defaults to 10ms.</para>
    </sect3>

    <sect3 id="disks">
      <title>Disks and Storage</title>

      <para>The &man.amr.4; driver has been improved on its performance
	and now supports full 64-bit DMA.  While this feature is
	enabled by default, this can be forced off by setting the
	<varname>hw.amr.force_sg32</varname> loader tunable for
	debugging purpose.</para>

      <para>The &man.amr.4; driver now supports &man.ioctl.2; requests
	necessary for Linux LSI MegaRaid tools on &os;'s Linux emulation
	environment.</para>

      <para>The &man.ata.4; driver now supports a workaround
	for some controllers whose DMA does not work properly
	in 48bit mode.  For the suspicious controllers
	the PIO mode will be used for access to over 137GB areas.</para>

      <para>The &man.ata.4; driver now supports the ITE IT8211F IDE controller,
	and Promise PDC40718 and PDC40719 chip found in Promise
	Fasttrak TX4300.</para>

      <para>The &man.ata.4; driver now supports DMA for kernel crash dump
	and crash dumping to &man.ataraid.4; device.</para>

      <para>The &man.ataraid.4; driver now supports
	JMicron ATA RAID metadata.</para>

      <para>The <literal>GEOM_LABEL</literal> class now supports
	Ext2FS, NTFS, and ReiserFS.</para>

      <para>The <literal>GEOM_MIRROR</literal> class now supports
	kernel crash dump to the GEOM providers.</para>

      <para>The <literal>GEOM_MIRROR</literal> and <literal>GEOM_RAID3</literal>
	classes now support sysctl variables
	<varname>kern.geom.mirror.disconnect_on_failure</varname>
	and
	<varname>kern.geom.graid3.disconnect_on_failure</varname>
	to control whether failed components will be disconnected or not.
	The default value is <literal>1</literal> to preserve the current
	behavior, and if it is set to <literal>0</literal> such components
	are not disconnected and the kernel will try to still use them
	(only first error will be logged).
	This is helpful for the case of multiple broken components (in
	different places), so actually all data is available.
	The broken components will be visible in <command>gmirror list</command>
	or <command>graid3 list</command> output with flag
	<literal>BROKEN</literal>.</para>

      <para>The <literal>GEOM_MIRROR</literal> and <literal>GEOM_RAID3</literal>
	classes now use parallel I/O request for synchronization
	to improve the performance.  New sysctl variables
	<varname>kern.geom.mirror.sync_requests</varname> and
	<varname>kern.geom.raid3.sync_requests</varname>
	define how many parallel I/O requests should be used.
	Also, sysctl variables
	<varname>kern.geom.mirror.reqs_per_sync</varname>,
	<varname>kern.geom.mirror.syncs_per_sec</varname>,
	<varname>kern.geom.raid3.reqs_per_sync</varname>, and
	<varname>kern.geom.raid3.syncs_per_sec</varname>
	are deprecated and have been removed.</para>

      <para>A new GEOM class <literal>GEOM_ZERO</literal> has been added.
	It creates very huge provider (41PB) <filename>/dev/gzero</filename>
	and mainly for performance testing.
	On <literal>BIO_READ</literal> request it zero-fills
	<varname>bio_data</varname> and on <literal>BIO_WRITE</literal>
	it does nothing.</para>

      <para>The &man.twa.4; driver has been updated to the 9.3.0.1
	release on the 3ware Web site.</para>

      <para>The &man.geli.8; now supports loading keyfiles before root
	file system is mounted.
	For example, the following entries
	can be used in <filename>/boot/loader.conf</filename> to enable
	it:</para>

      <programlisting>geli_da0_keyfile0_load="YES"
geli_da0_keyfile0_type="da0:geli_keyfile0"
geli_da0_keyfile0_name="/boot/keys/da0.key0"
geli_da0_keyfile1_load="YES"
geli_da0_keyfile1_type="da0:geli_keyfile1"
geli_da0_keyfile1_name="/boot/keys/da0.key1"
geli_da0_keyfile2_load="YES"
geli_da0_keyfile2_type="da0:geli_keyfile2"
geli_da0_keyfile2_name="/boot/keys/da0.key2"

geli_da1s3a_keyfile0_load="YES"
geli_da1s3a_keyfile0_type="da1s3a:geli_keyfile0"
geli_da1s3a_keyfile0_name="/boot/keys/da1s3a.key"</programlisting>

      <para>The &man.mfi.4; driver, which supports
	the LSI MegaRAID SAS controller family, has been added.</para>
    </sect3>

    <sect3 id="fs">
      <title>File Systems</title>

      <para></para>
    </sect3>

    <sect3>
      <title>Contributed Software</title>

      <para><application>DRM</application> has
	been updated to a snapshot from DRI CVS as of 20051202.</para>
    </sect3>
  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>The &man.bsnmpd.1; utility now supports the Host Resources
      MIB described in RFC 2790.</para>

    <para>The &man.config.8; utility now supports the <literal>nocpu</literal>
      directive, which cancels the effect of a
      previous <literal>cpu</literal> directive.</para>

    <para>The &man.config.8; utility now reads <filename>DEFAULTS</filename>
      kernel configuration file if it exists in the current directory
      before the specified configuration file.</para>

    <para>The &man.csh.1; utility now supports NLS catalog.
      Note that this requires installing
      the <filename role="package">shells/tcsh_nls</filename> port.</para>

    <para>The &man.devd.8; utility now supports a <option>-f</option> option
      to specify a configuration file.</para>

    <para>The &man.ln.1; utility now supports
      an <option>-F</option> flag which allows to delete existing
      empty directories, when creating symbolic links.</para>

    <para>The &man.locate.1; utility now supports
      a <option>-0</option> flag to make this utility
      interoperable with &man.xargs.1;'s <option>-0</option> flag.</para>

    <para>The &man.ls.1; utility now supports
      an <option>-I</option> flag to disable the automatic
      <option>-A</option> flag for the superuser.</para>

    <para>The &man.ftpd.8; utility now creates a PID file
      <filename>/var/run/ftpd.pid</filename> even when
      no <option>-p</option> option is specified.</para>

    <para>The &man.getfacl.1; utility now supports
      a <option>-q</option> flag to suppress the per-file header
      comment listing the file name, owner, and group.</para>

    <para>The &man.gvinum.8; utility now supports commands
      to rename objects and to move a subdisk from
      one drive to another.</para>

    <para>The &man.jail.8; utility supports a <option>-J
	<replaceable>jid_file</replaceable></option> option to
      write out a JidFile, similar to a PidFile, containing
      the jailid, path, hostname, IP and the command used to start
      the jail.</para>

    <para>The &man.kdump.1; utility now supports a <option>-H</option>
      flag, which causes kdump to print an additional field holding
      the threadid.</para>

    <para>The &man.kdump.1; program now supports a <option>-s</option>
      flag to suppress the display of I/O data.</para>

    <para>The &man.mergemaster.8; utility now supports
      an <option>-A</option> option to explicitly specify
      an architecture to pass through to the underlying makefiles.</para>

    <para>The &man.moused.8; daemon now supports an <option>-H</option> flag
      to enable horizontal virtual scrolling similar to a
      <option>-V</option> flag for vertical virtual scrolling.</para>

    <para>The &man.netstat.1; utility now supports
      printing &man.ipsec.4; protocol statistics if the
      kernel was compiled with <literal>FAST_IPSEC</literal>
      rather than the KAME IPSEC stack.
      Note that the output of <command>netstat -s -p ipsec</command>
      differs depending on which stack is compiled into
      the kernel since they each keep different statistics.</para>

    <para>The &man.periodic.8; daily script now supports
      display of the status of &man.gmirror.8;, &man.graid3.8;,
      &man.gstripe.8;, and &man.gconcat.8; devices.
      Note that these are disabled by default.</para>

    <para>A new function, &man.pidfile.3;, which provides reliable
      pidfiles handling, has been implemented in
      <filename>libutil</filename>.</para>

    <para>The &man.rfcomm.sppd.1; now supports service name
      in addition to <option>-c</option> option with channel number.
      The supported names are: DUN (Dial-Up Networking), FAX (Fax),
      LAN (LAN Access Using PPP), and SP (Serial Port).</para>

    <para>The &man.snapinfo.8; utility, which shows snapshot locations
      on UFS filesystems, has been added.</para>

    <para>The &man.strtonum.3; library function has been implemented
      based on OpenBSD's implementation.  This is an improved version of
      &man.strtoll.3;.</para>

    <para>The &man.xargs.1; utility now supports a <option>-r</option>
      flag which makes the command execution when the standard input
      does not contain any non-whitespace-characters.</para>

    <para>A bug in the &man.ypwhich.1; utility which causes
      the <option>-m</option> option to produce an incorrect
      list of available named maps has been fixed.</para>

    <sect3 id="rc-scripts">
      <title><filename>/etc/rc.d</filename> Scripts</title>

      <para>The <filename>bluetooth</filename> script
	has been added.  This script will be called from
	&man.devd.8; in response to device attachment/detachment
	events and to stop/start particular device without unplugging
	it by hand.  The configuration parameters are in
	<filename>/etc/defaults/bluetooth.device.conf</filename>,
	and can be overridden by using
	<filename>/etc/bluetooth/<replaceable>$device</replaceable>.conf</filename>
	(where <replaceable>$device</replaceable> is <devicename>ubt0</devicename>,
	<devicename>btcc0</devicename>, and so on.)
	For more details, see &man.bluetooth.conf.5;.</para>

      <para>The <filename>hcsecd</filename> and
	<filename>sdpd</filename> scripts have been added
	for &man.hcsecd.8; and &man.sdpd.8; daemons.
	These daemons can run even if no Bluetooth devices
	are attached to the system, but both daemons depend on
	Bluetooth socket layer and thus disabled by default.
	Bluetooth sockets layer must be either loaded
	as a module or compiled into kernel before the daemons can run.</para>

      <para>The <filename>hostapd</filename> script for
	&man.hostapd.8; has been added.</para>

      <para>The <filename>netif</filename> script now supports
	<varname>ipv4_addrs_<replaceable>ifn</replaceable></varname>,
	which adds one or more IPv4 address from a ranged list in
	CIRD notation.  For example:</para>

      <programlisting>ipv4_addrs_ed0="192.168.0.1/24 192.168.1.1-5/28"</programlisting>

    <para>The <filename>ppp-user</filename> script has been renamed to
      <filename>ppp</filename>.</para>
    </sect3>
  </sect2>

  <sect2>
    <title>Contributed Software</title>

    <para><application>BIND</application> has been updated from 9.3.1
      to 9.3.2.</para>

    <para><application>hostapd</application>
      has been updated from version 0.3.9 to version 0.4.8.</para>

    <para><application>GNU Troff</application>
      has been updated from version 1.19 to version 1.19.2.</para>

    <para><application>sendmail</application> has been updated from
      8.13.4 to 8.13.6.</para>

    <para>The timezone database has been updated from the
      <application>tzdata2005l</application> release to the
      <application>tzdata2005r</application> release.</para>

    <para><application>WPA Supplicant</application>
      has been updated from version 0.3.9 to version 0.4.8.</para>
  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages Collection Infrastructure</title>

    <para>The &man.pkg.add.1; command now supports an <option>-P</option>
      flag, which is the same as the <option>-p</option> flag
      except that the given prefix is also used recursively for the
      dependency packages if any.</para>

    <para>The &man.pkg.add.1; and &man.pkg.create.1; utilities now support
      a <option>-K</option> flag to save packages to the current directory
      (or <varname>PKGDIR</varname> if defined) by default.</para>

    <para>The &man.pkg.create.1; program now supports an <option>-x</option>
      flag to support basic regular expressions for package name,
      an <option>-E</option> flag for extended regular
      expressions, and a <option>-G</option> for exact matching.</para>

    <para>The &man.pkg.version.1; utility now supports an <option>-o</option>
      flag to show the origin recorded on package generation
      instead of the package name, and an <option>-O</option> flag
      to list packages whose registered origin is origin only.</para>

    <para>The &man.portsnap.8; utility (<filename>sysutils/portsnap</filename>)
      has been added into the &os; base system.  This is a secure,
      easy to use, fast, lightweight, and generally good way for
      users to keep their ports trees up to date.</para>

    <para>A incorrect handling of <varname>HTTP_PROXY_AUTH</varname>
      in the &man.portsnap.8; utility has been fixed.</para>

    <para>The startup scripts from the <varname>local_startup</varname>
      directory now evaluated by using &man.rcorder.8; with scripts
      in the base system.</para>

    <para>The suffix of startup scripts from the Ports Collection
      has been removed.  This means <filename>foo.sh</filename>
      is renamed to <filename>foo</filename>, and now
      scripts whose name is something like
      <filename>foo.ORG</filename> will also be invoked.
      You are recommended to reinstall packages which install
      such scripts and remove extra files in the
      <varname>local_startup</varname> directory.</para>

    <para>New <filename>rc.conf</filename> variables,
      <varname>ldconfig_local_dirs</varname> and
      <varname>ldconfig_local32_dirs</varname> have been added.
      These hold lists of local &man.ldconfig.8; directories.</para>

    <para>The <command>@cwd</command> command in
      <filename>pkg-plist</filename> now allows
      no directory argument.  If no
      directory argument is given, it will set current
      working directory to the first prefix given by the
      <command>@cwd</command> command.</para>
  </sect2>

  <sect2 id="releng">
    <title>Release Engineering and Integration</title>

    <para>The <filename>/var/audit</filename> directory and
      <literal>audit</literal> group have been added.
      These are for the TrustedBSD <application>OpenBSM</application>
      distribution, which will be imported in the future
      releases.</para>

    <para>The supported version of
      the <application>GNOME</application> desktop environment
      (<filename role="package">x11/gnome2</filename>) has been
      updated from 2.10.2 to 2.12.3.</para>

    <para>The supported version of
      the <application>KDE</application> desktop environment
      (<filename role="package">x11/kde2</filename>) has been
      updated from 3.4.2 to 3.5.1.</para>

    <para>The supported version of
      the <application>Perl</application> interpreter
      (<filename role="package">lang/perl5.8</filename>) has been updated
      from 5.8.7 to 5.8.8.</para>

    <para>The supported version of
      the <application>&xorg;</application> windowing system
      (<filename role="package">x11/xorg</filename>) has been updated
      from 6.8.2 to 6.9.0.</para>
  </sect2>

  <sect2 id="doc">
    <title>Documentation</title>

    <para></para>
  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>Upgrading from previous releases of &os;</title>

  <para>Source upgrades to &os; &release.current; are only supported
    from &os; 5.3-RELEASE or later.  Users of older systems wanting to
    upgrade &release.current; will need to update to &os; 5.3 or newer
    first, then to &os; &release.current;.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>
