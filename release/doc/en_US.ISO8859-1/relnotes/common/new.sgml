<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <pubdate>$FreeBSD$</pubdate>

  <corpauthor>The FreeBSD Project</corpauthor>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <year>2004</year>
    <holder role="mailto:doc@FreeBSD.org">The FreeBSD Documentation Project</holder>
  </copyright>

  <abstract>
    <para>The release notes for &os; &release.current; contain a
      summary of the changes made to the &os; base system since
      &release.prev;.  Both changes for kernel and userland are
      listed, as well as applicable security advisories for the base
      system that were issued since the last release.  Some brief
      remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes new features of &os; that have been added (or changed)
    since &release.prev;.  It also provides some notes on upgrading
    from previous versions of &os;.</para>

<![ %release.type.snapshot [

  <para>The &release.type; distribution to which these release notes
    apply represents a point along the &release.branch; development
    branch between &release.prev; and the future &release.next;.  Some
    pre-built, binary &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.release [

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors.html"><quote>Obtaining
    FreeBSD</quote></ulink> appendix in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

]]>
</sect1>

<!--
	The "What's New" section of the release notes. 

	Guidelines for new entries:

	1.  If there is some obvious "keyword" associated with an
	entry (such as a manpage entry or an application name), try to
	put it at the start of the sentence.

	2.  Within each subsection (i.e. kernel, security, userland),
	list items in alphabetical order by these keywords.

	Some entries will have no obvious keywords to help with
	ordering.  In sections containing these entries, put those
	containing (e.g.) manpage references first, then some
	suitable SGML comment line as a demarc, then the remaining
	entries.

-->

<sect1 id="new">
  <title>What's New</title>

  <para>This section describes the most user-visible new or changed
    features in &os; since &release.prev;.  Typical release note items
    document new drivers or hardware support, new commands or options,
    major bugfixes, or contributed software upgrades.  Security
    advisories for the base system that were issued after
    &release.prev; are also listed.</para>

  <sect2 id="security">
    <title>Security Advisories</title>

    <para>A potential denial of service in
      <application>BIND</application> has been fixed.  For more
      information, see security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:19.bind.asc">FreeBSD-SA-03:19</ulink>.</para>

    <para>A bug with the System V Shared Memory interface
      (specifically the &man.shmat.2; system call) has been fixed.
      This bug can cause a shared memory segment to reference
      unallocated kernel memory.  In turn, this can permit a local
      attacker to gain unauthorized access to parts of kernel memory,
      possibly resulting in disclosure of sensitive information,
      bypass of access control mechanisms, or privilege escalation.
      More details can be found in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:02.shmat.asc">FreeBSD-SA-04:02</ulink>.
      </para>

    <para>A potential low-bandwidth denial-of-service attack against
      the &os; TCP stack has been prevented by limiting the number of
      out-of-sequence TCP segments that can be held at one time.  More
      details can be found in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:04.tcp.asc">FreeBSD-SA-04:04</ulink>.
      </para>

    <para>A bug in <application>OpenSSL</application>'s SSL/TLS
      ChangeCipherSpec message processing could result in
      a null pointer dereference, has been fixed.
      This could allow a remote attacker to crash an
      <application>OpenSSL</application>-using
      application and cause a denial-of-service on the system.
      More details can be found in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:05.openssl.asc">FreeBSD-SA-04:05</ulink>.</para>

    <para>Two programming errors in <application>CVS</application>
      have been fixed.  They allow a server to overwrite arbitrary
      files on the client, and a client to read arbitrary files
      on the server when accessing remote CVS repositories.
      More details can be found in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:07.cvs.asc">FreeBSD-SA-04:07</ulink>.</para>
  </sect2>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para arch="i386">The &man.cx.4; driver for Cronyx Sigma synchronous /
      asynchronous serial adapters has been updated to version 4.4.0.</para>

    <para arch="i386">The &man.ctau.4; driver has been added for Cronyx-Tau
      synchronous serial adapters. This driver was known for a long time as
      <quote>ct</quote> in its previous life outside the &os; source tree.

      <note>
	<para>The driver name has changed, but the network interface still
	  has the <quote>ct</quote> name.</para>
      </note>
    </para>

    <para>The &man.dcons.4; <quote>dumb console</quote> driver has
      been added to provide a local and remote console.  It can be
      accessed over FireWire using the &man.dcons.crom.4; driver.  A
      &man.dconschat.8; utility provides user access to &man.dcons.4;
      devices.</para>

    <para>The &man.stl.4; driver has been updated to version 5.6.0b1.</para>

    <para>The &man.umct.4; driver, which provides support for USB to RS-232
      converters based on the Magic Control Technology USB-232 has been added.</para>

    <para>The &man.usb.4; support has been improved, which includes a lot of
      bug fixes and early support for some USB2 devices.

      <note>
	<para>&man.umodem.4; now uses <filename>/dev/ucom*</filename>
	  instead of <filename>/dev/umodem*</filename> device nodes.</para>
      </note>
    </para>

<!-- Above this line, kernel changes ordered by manpage/variable name -->

    <sect3 id="proc">
      <title>Platform-Specific Hardware Support</title>

      <para></para>

    </sect3>

    <sect3 id="boot">
      <title>Boot Loader Changes</title>

      <para></para>

<!-- Above this line, order boot loader changes by manpage/variable name-->

    </sect3>

    <sect3 id="net-if">
      <title>Network Interface Support</title>

      <para>A short hiccup in the &man.em.4; during parameter
	reconfiguration, has been fixed.</para>

      <para>A bug, which prevents VLAN support in the &man.nge.4; driver
        from working has been fixed.</para>

      <para>Several bugs related to &man.polling.4; support
        in the &man.rl.4; driver have been fixed.</para>

      <para>The &man.ste.4; driver now supports &man.polling.4;.</para>

      <para>The hardware TX checksum support of the &man.xl.4; driver
	has been disabled as it does not work correctly and slows down
	the transmission rate.</para>

<!-- Above this line, order network driver changes by manpage/variable name-->

    </sect3>

    <sect3 id="net-proto">
      <title>Network Protocols</title>

      <para>The <literal>DA_OLD_QUIRKS</literal> kernel option,
	which is for the CAM SCSI disk driver (&man.cam.4;)
	has been removed.</para>

      <para>The TCP implementation now includes partial (output-only)
	support for RFC 2385 (TCP-MD5) digest support.  This feature,
	enabled with the <literal>TCP_SIGNATURE</literal> and
	<literal>FAST_IPSEC</literal> kernel options, is a TCP option
	for authenticating TCP sessions.  &man.setkey.8; now includes
	support for the TCP-MD5 class of security associations.</para>

      <para>The &man.ng.vlan.4; NetGraph node type, which supports
        IEEE 802.1Q VLAN tagging has been added.</para>
    </sect3>

    <sect3 id="disks">
      <title>Disks and Storage</title>

      <para>The &man.amr.4; driver now has system crashdump support.</para>

      <para arch="i386">The &man.twa.4; driver, which supports
	3ware's 9000 series PATA/SATA RAID controllers has been added.</para>

      <para>The &man.umass.4; driver now supports the missing
	ATAPI MMC commands and handles the timeout properly.</para>
    </sect3>

    <sect3 id="fs">
      <title>File Systems</title>

      <para></para>

    </sect3>

    <sect3 id="pccard">
      <title>PCCARD Support</title>

      <para></para>

    </sect3>

    <sect3 id="mm">
      <title>Multimedia Support</title>

      <para></para>

    </sect3>
  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>&man.disklabel.8; now supports a <option>-f</option> option to
      work on regular files which contain disk images.</para>

    <para>&man.ifconfig.8; now supports a <option>staticarp</option>
      option for an interface, which disables the sending of ARP
      requests for that interface.</para>

    <para>&man.ifconfig.8; now prints the &man.polling.4; status
      on the interface.</para>

    <para>&man.killall.1; now supports a <option>-e</option> flag to
      make the <option>-u</option> operate on effective, rather than
      real, user IDs.</para>

    <para>The default mode for the <filename>lost+found</filename>
      directory of &man.fsck.8; is now <literal>0700</literal> instead
      of <literal>01777</literal>.</para>

    <para>The <filename>libalias</filename> library,
      &man.natd.8;, and &man.ppp.8; now support Cisco Skinny Station protocol,
      which is the protocol used by Cisco IP phones to talk to Cisco Call
      Managers.  Note that currently having the Call Manager behind
      the NAT gateway is not supported.</para>

    <para arch="i386"><filename>libdisk</filename> now uses the
      correct PC98 disk partition value for &os;.  This permits the
      &man.sysinstall.8; disk partition editor to correctly create a
      single &os; partition covering the entire disk.</para>

    <para>&man.makewhatis.1;, formerly a Perl script, has been
      reimplemented in C.</para>

    <para>&man.ps.1; compatibility with POSIX/SUSv3 has been improved.
      The changes include <option>-p</option> for a list of process IDs,
      <option>-t</option> for a list of terminal names,
      <option>-A</option> which is equivalent to <option>-ax</option>,
      <option>-G</option> for a list of group IDs,
      <option>-X</option> which is the opposite of <option>-x</option>,
      and some minor improvements.  For more information, see &man.ps.1;.</para>

    <para>&man.pw.8; now supports a <option>-H</option> option, which
      accepts an encrypted password on a file descriptor.</para>

    <para>&man.rtld.1; now has support for the dynamic mapping of
      shared object dependencies.  More information on using this
      feature can be found in &man.libmap.conf.5;.<para>

    <para arch="i386">The &man.sconfig.8; utility was added as a part of
      &man.cx.4; driver update. It replaces the cxconfig utility for managing
      &man.cx.4; devices. <para>

    <para>&man.stat.1; from <application>NetBSD</application>, as of 5
      June 2002 has, been imported.</para>

    <para>&man.which.1;, formerly a Perl script, has been
      reimplemented in C.</para>

<!-- Above this line, order userland changes by manpage/variable name-->

  </sect2>

  <sect2 id="contrib">
    <title>Contributed Software</title>

    <para><application>BIND</application> has been updated from
      version 8.3.4 to version 8.3.7.</para>

    <para><application>OpenSSL</application> has been updated from
      version 0.9.7c to version 0.9.7d.</para>

    <para><application>sendmail</application> has been updated
      from version 8.12.9 to version 8.12.11.</para>

  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages Collection Infrastructure</title>

    <para>The <literal>SIZE</literal> attribute for distfiles,
      which can be used for checking file sizes before fetching,
      has been added and enabled by default.
      <varname>DISABLE_SIZE</varname> is a user control knob
      to disable the distfile size checking.  This is especially
      useful on old &os; versions which didn't have &man.fetch.1;
      support for this, and for some FTP proxies which always
      report incorrect or bogus sizes.</para>

    <para>Two new files have been added to the ports tree to track
      note-worthy changes:  <filename>ports/CHANGES</filename> lists
      major changes to the Ports Collection and its infrastructure.
      <filename>ports/UPDATING</filename> describes some potential
      pitfalls that can be encountered when updating certain ports,
      analogous to <filename>src/UPDATING</filename> for the base
      system.</para>

  </sect2>

  <sect2 id="releng">
    <title>Release Engineering and Integration</title>

    <para>The supported release of <application>GNOME</application>
      has been updated from 2.4 to 2.6.

      <note>
	<para>If you are using the older <application>GNOME</application>
	  desktop itself (<filename role="package">x11/gnome2</filename>), simply upgrading it from the &os; Ports Collection
	  with
	  &man.portupgrade.1;
	  (<filename role="package">sysutils/portupgrade</filename>)
	  will cause serious problems.
	  If you are a <application>GNOME</application> desktop user,
	  please read the instructions carefully at
	  <ulink url="http://www.FreeBSD.org/gnome/docs/faq26.html"></ulink>,
	  and use the <filename>gnome_upgrade.sh</filename> script to
	  properly upgrade to <application>GNOME</application> 2.6.</para>

	<para>Note that if you are just a casual user of some of the
	  <application>GNOME</application> libraries,
	  &man.portupgrade.1; should be sufficient
	  to update your ports.</para>
      </note>
    </para>

    <para>The supported release of <application>KDE</application>
      has been updated from 3.1.4 to 3.2.1.</para>
  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>Upgrading from previous releases of &os;</title>

  <para>If you're upgrading from a previous release of &os;, you
    generally will have three options:

    <itemizedlist>
      <listitem>
	<para>Using the binary upgrade option of &man.sysinstall.8;.
	  This option is perhaps the quickest, although it presumes
	  that your installation of &os; uses no special compilation
	  options.</para>
      </listitem>
      <listitem>
	<para>Performing a complete reinstall of &os;.  Technically,
	  this is not an upgrading method, and in any case is usually less
	  convenient than a binary upgrade, in that it requires you to
	  manually backup and restore the contents of
	  <filename>/etc</filename>.  However, it may be useful in
	  cases where you want (or need) to change the partitioning of
	  your disks.
      </listitem>
      <listitem>
	<para>From source code in <filename>/usr/src</filename>.  This
	  route is more flexible, but requires more disk space, time,
	  and technical expertise.  More information can be found
	  in the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/makeworld.html"><quote>Using
	  <command>make world</command></quote></ulink> section of the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
	  Handbook</ulink>.  Upgrading from very old
	  versions of &os; may be problematic; in cases like this, it
	  is usually more effective to perform a binary upgrade or a
	  complete reinstall.</para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Please read the <filename>INSTALL.TXT</filename> file for more
    information, preferably <emphasis>before</emphasis> beginning an
    upgrade.  If you are upgrading from source, please be sure to read
    <filename>/usr/src/UPDATING</filename> as well.</para>

  <para>Finally, if you want to use one of various means to track the
    -STABLE or -CURRENT branches of &os;, please be sure to consult
    the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/current-stable.html"><quote>-CURRENT
    vs. -STABLE</quote></ulink> section of the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>

