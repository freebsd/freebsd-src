<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook XML V5.0-Based Extension//EN"
	"../../../share/xml/freebsd50.dtd" [
<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN" "release.ent">
 %release;
<!ENTITY % sponsor PUBLIC "-//FreeBSD//ENTITIES Sponsor Specification//EN" "sponsor.ent">
 %sponsor;
<!ENTITY % vendor PUBLIC "-//FreeBSD//ENTITIES Vendor Specification//EN" "vendor.ent">
 %vendor;
]>
<article xmlns="http://docbook.org/ns/docbook"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">

  <info>
    <title>&os; &release.current; Release Notes</title>

    <author>
      <orgname>The &os; Project</orgname>
    </author>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <year>2007</year>
      <year>2008</year>
      <year>2009</year>
      <year>2010</year>
      <year>2011</year>
      <year>2012</year>
      <year>2013</year>
      <year>2014</year>
      <holder role="mailto:doc@FreeBSD.org">The &os; Documentation
	Project</holder>
    </copyright>

    <legalnotice xml:id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.ibm;
      &tm-attrib.ieee;
      &tm-attrib.intel;
      &tm-attrib.sparc;
      &tm-attrib.general;
    </legalnotice>

    <abstract>
      <para>The release notes for &os; &release.current; contain
	a summary of the changes made to the &os; base system on the
	&release.branch; development line.  This document lists
	applicable security advisories that were issued since the last
	release, as well as significant changes to the &os; kernel and
	userland.  Some brief remarks on upgrading are also
	presented.</para>
    </abstract>
  </info>

  <sect1 xml:id="intro">
    <title>Introduction</title>

    <para>This document contains the release notes for &os;
      &release.current;.  It describes recently added, changed, or
      deleted features of &os;.  It also provides some notes on
      upgrading from previous versions of &os;.</para>

    <para releasetype="current">The &release.type; distribution to
      which these release notes apply represents the latest point
      along the &release.branch; development branch since
      &release.branch; was created.  Information regarding pre-built,
      binary &release.type; distributions along this branch can be
      found at <uri
	xlink:href="&release.url;">&release.url;</uri>.</para>

    <para releasetype="snapshot">The &release.type; distribution to
      which these release notes apply represents a point along the
      &release.branch; development branch between &release.prev; and
      the future &release.next;.  Information regarding pre-built,
      binary &release.type; distributions along this branch can be
      found at <uri
	xlink:href="&release.url;">&release.url;</uri>.</para>

    <para releasetype="release">This distribution of &os;
      &release.current; is a &release.type; distribution.  It can be
      found at <uri xlink:href="&release.url;">&release.url;</uri> or
      any of its mirrors.  More information on obtaining this (or
      other) &release.type; distributions of &os; can be found in the
      <link
	xlink:href="&url.books.handbook;/mirrors.html"><quote>Obtaining
	  &os;</quote> appendix</link> to the <link
	xlink:href="&url.books.handbook;/">&os;
	Handbook</link>.</para>

    <para>All users are encouraged to consult the release errata
      before installing &os;.  The errata document is updated with
      <quote>late-breaking</quote> information discovered late in the
      release cycle or after the release.  Typically, it contains
      information on known bugs, security advisories, and corrections
      to documentation.  An up-to-date copy of the errata for &os;
      &release.current; can be found on the &os; Web site.</para>
  </sect1>

  <sect1 xml:id="new">
    <title>What's New</title>

    <para>This section describes the most user-visible new or changed
      features in &os; since &release.prev;.</para>

    <para>Typical release note items document recent security
      advisories issued after &release.prev;, new drivers or hardware
      support, new commands or options, major bug fixes, or
      contributed software upgrades.  They may also list changes to
      major ports/packages or release engineering practices.  Clearly
      the release notes cannot list every single change made to &os;
      between releases; this document focuses primarily on security
      advisories, user-visible changes, and major architectural
      improvements.</para>

    <sect2 xml:id="security">
      <title>Security Advisories</title>

      <para>&nbsp;</para>

    </sect2>

    <sect2 xml:id="kernel">
      <title>Kernel Changes</title>

      <para revision="260431">A new &man.sysctl.8;,
	<literal>kern.panic_reboot_wait_time</literal>, has been
	added, which allows controlling how long the system will wait
	after &man.panic.9; before rebooting.</para>

      <para revision="262861">The &man.vt.4; driver has been merged
	from &os;-CURRENT.  To enable &man.vt.4;, enter
	<literal>set kern.vty=vt</literal> at the &man.loader.8;
	prompt during boot, or add <literal>kern.vty=vt</literal> to
	&man.loader.conf.5; and reboot the system.</para>

      <para revision="263122">Support for &man.hwpmc.4; has been added
	for &powerpc;&nbsp;970 class processors.</para>

      <para revision="263197">Support for ADT7460 and ADT7467 fan
	controllers found in newer PowerBooks&trade; and
	iBooks&trade; has been added to the &man.iicbus.4;
	driver.</para>

      <para revision="263256">A panic triggered by removing
	a &man.urtwn.4; device has been fixed.</para>

      <para revision="263799">A potential deadlock in the &man.usb.4;
	stack triggered by detaching USB devices that create character
	devices has been fixed.</para>

      <para revision="263869">Support for &amd;&nbsp;Family 16h sensor
	devices has been added to &man.amdtemp.4;.</para>

      <para revision="265610">The &man.uslcom.4; driver has been
	updated to support 26 new devices.</para>

      <para revision="266165">A kernel bug that inhibited proper
	functionality of the <literal>dev.cpu.0.freq</literal>
	&man.sysctl.8; on &intel; processors with Turbo
	Boost&trade; enabled has been fixed.</para>

      <para revision="266436">The &man.uart.4; driver has been
	updated to include support for the &intel;&nbsp;Lynx Point
	KT <acronym>AMT</acronym> serial port.</para>

      <para revision="266594">The <literal>radeonkms(4)</literal>
	driver has been updated to include 32-bit &man.ioctl.2;
	support, allowing 32-bit applications to run on a 64-bit
	system.</para>

      <para revision="266718">A bug that would prevent
	a &man.jail.8; from setting the correct IPv4 source address
	with some operations that required
	<literal>security.jail.allow_raw_sockets</literal> has been
	fixed.</para>

      <para revision="266911">The &man.hwpmc.4; driver has been
	updated to support core events from the Atom&trade;
	Silvermont architecture.</para>

      <para revision="268046">The &man.oce.4; driver has been updated
	with vendor-supplied fixes for big endian support, and 20GB/s
	and 25GB/s link speeds.</para>

      <para revision="270630">The &os;&nbsp;virtual memory subsystem
	has been updated to implement <quote>fast path</quote> for
	the page fault handler.</para>

      <sect3 xml:id="kernel-virtualization">
	<title>Virtualization Support</title>

	<para revision="259450">Support for &microsoft; Hyper-V
	  has been added to &os;/i386 as loadable modules, however
	  not available in the <filename>GENERIC</filename> kernel
	  configuration.</para>

	<para revision="261090">The &man.bhyve.4; hypervisor now
	  supports soft power-off functionality via the ACPI S5
	  state.</para>

	<para revision="267399">Support for &os;/i386 guests has been
	  added to &man.bhyve.4;.</para>

	<para revision="267427">Support for virtualized
	  <literal>XSAVE</literal> has been added to &man.bhyve.4;,
	  allowing guest operating systems to use
	  <literal>XSAVE</literal> and
	  <literal>XSAVE</literal>-enabled features, such as
	  <acronym>AVX</acronym>.</para>

	<para revision="268932">The &man.bhyve.4; hypervisor now
	  supports booting from a &man.zfs.8; filesystem.</para>

	<para revision="268933">A new driver, &man.virtio_random.4;,
	  has been added, which allows &os; virtual machines to
	  harvest entropy from the hypervisor.</para>

	<para revision="270159">The &man.bhyve.4; hypervisor has been
	  synced with the version in &os;-CURRENT.</para>

	<para>A number of enhancements have been added, and several
	  bug fixes, including:</para>

	<itemizedlist>
	  <listitem>
	    <para>Post-mortem debugging has been added when
	      a guest virtual machine exits with an
	      <quote><acronym>EPT</acronym> Misconfiguration</quote>
	      error.</para>
	  </listitem>

	  <listitem>
	    <para>The hypervisor &man.virtio.4; <acronym>API</acronym>
	      has been expanded from 32- to 64-bit.</para>
	  </listitem>

	  <listitem>
	    <para>Support for identifying capabilities of the virtual
	      <acronym>CPU</acronym> has been added.</para>
	  </listitem>

	  <listitem>
	    <para>Support for emulating legacy x86 task
	      switching has been added.</para>
	  </listitem>

	  <listitem>
	    <para>Support to list the VT-x features in base kernel
	      &man.dmesg.8; has been added.</para>
	  </listitem>

	  <listitem>
	    <para>Support for extended PCI configuration space
	      has been added.</para>
	  </listitem>
	</itemizedlist>
      </sect3>

      <sect3 xml:id="kernel-arm">
	<title>ARM Support</title>

	<para revision="259355">The <filename>WANDBOARD</filename>
	  kernel configuration file has been added.</para>

	<para revision="265067">Boot devices may now be specified by
	  setting a u-boot environment variable.  If a boot device is
	  not specified, the probe mechanism will be used.  To specify
	  the boot device, set the
	  <literal>loaderdev=<replaceable>device</replaceable></literal>
	  u-boot environment variable.</para>

	<para revision="266000">The <literal>nexus(4)</literal> driver
	  has been updated to include <quote>Flattened Device
	    Tree</quote> support, replacing the &man.fdtbus.4; driver
	  in most cases.</para>

	<para revision="266105">The &man.gpioiic.4; and
	  &man.gpioled.4; have been merged from &os;-CURRENT.</para>

	<para>Support for hardware floating point was added to the
	  kernel, and enabled by default in the configuration files
	  for all platforms that contain the required hardware.</para>

	<para><application>C++</application> exception handling now
	  works with <application>GCC</application>.</para>

	<para>Support for <acronym>SMP</acronym> was added to the
	  kernel, and enabled by default in the configuration files
	  for all platforms that contain multi-core CPUs.</para>

	<para>Support was added for:</para>

	<itemizedlist>
	  <listitem>
	    <para>CHROMEBOOK (Samsung Exynos 5250)</para>
	  </listitem>

	  <listitem>
	    <para>COLIBRI (Freescale Vybrid)</para>
	  </listitem>

	  <listitem>
	    <para>COSMIC (Freescale Vybrid)</para>
	  </listitem>

	  <listitem>
	    <para>IMX53-QSB (Freescale i.MX53)</para>
	  </listitem>

	  <listitem>
	    <para>QUARTZ (Freescale Vybrid)</para>
	  </listitem>

	  <listitem>
	    <para>RADXA (Rockchip rk30xx)</para>
	  </listitem>

	  <listitem>
	    <para>WANDBOARD (Freescale i.MX6)</para>
	  </listitem>
	</itemizedlist>

	<para>An <acronym>I2C</acronym> driver was added for
	  the RaspberryPi.</para>

	<para>Drivers have been added to support <acronym>TI</acronym>
	  platforms, such as BEAGLEBONE and PANDABOARD:</para>

	<itemizedlist>
	  <listitem>
	    <para>PRUSS (Programmable Realtime Unit Subsystem)</para>
	  </listitem>

	  <listitem>
	    <para>MBOX (Mailbox hardware)</para>
	  </listitem>

	  <listitem>
	    <para>SDHCI (new faster driver for
	      <acronym>MMC</acronym>/<acronym>SD</acronym>
	      storage)</para>
	  </listitem>

	  <listitem>
	    <para>PPS (Pulse Per Second input on a
	      <acronym>GPIO</acronym>/timer pin)</para>
	  </listitem>

	  <listitem>
	    <para>PWM (Pulse Width Modulation output)</para>
	  </listitem>

	  <listitem>
	    <para>ADC (Analog to Digital converter)</para>
	  </listitem>
	</itemizedlist>
      </sect3>

      <sect3 xml:id="boot">
	<title>Boot Loader Changes</title>

	<para revision="262701">A kernel selection menu has been added
	  to &man.loader.8;.  If the <quote>beastie menu</quote> is
	  enabled, the kernel to boot may be selected from the kernel
	  selection menu.  Additional kernels may be listed in
	  &man.loader.conf.5; as a comma- or space-separated list.  By
	  default, <literal>kernel</literal> and
	  <literal>kernel.old</literal> are listed.</para>
      </sect3>

      <sect3 xml:id="proc">
	<title>Hardware Support</title>

	<para>&nbsp;</para>

	<sect4 xml:id="mm">
	  <title>Multimedia Support</title>

	  <para>&nbsp;</para>

	</sect4>

	<sect4 xml:id="net-if">
	  <title>Network Interface Support</title>

	  <para revision="259453">Support for Ralink RT5370 and
	    RT5372 chipsets has been added to the &man.run.4;
	    driver.</para>

	  <para revision="260120">Firmware for the &man.run.4; driver
	    has been updated to version 0.33.</para>

	  <para revision="261868">Support for the Ralink RT3593
	    chipset has been added to the &man.run.4; driver.</para>

	  <para revision="261972">The &man.nve.4; driver is now
	    deprecated, and the &man.nfe.4; driver should be used
	    instead.</para>

	  <para revision="262137">Support for the &man.axge.4; driver
	    has been added.  This driver supports the ASIX AX88178A
	    and AX88179 USB ethernet adapters.  The AX88178A supports
	    USB 2.0, and the AX88179 supports USB 2.0 and 3.0.</para>

	  <para revision="262363">The &man.urndis.4; driver has been
	    imported from OpenBSD.</para>

	  <para revision="264866">Support for multiple
	    transmitter/receiver queues has been added to the
	    &man.vmx.4; driver.</para>

	  <note>
	    <para>The &os;&nbsp;guest operating system must have
	      <acronym>MSIX</acronym> enabled as a prerequisite for
	      multiple queues.</para>
	  </note>

	  <para revision="265345">Support for the ASUS USB-N10 Nano
	    wireless card has been added to the &man.urtwn.4;
	    driver.</para>

	  <para revision="266212">Transmission checksum offloading has
	    been disabled for the RTL8168C and RTL8168CP chipsets in
	    the &man.re.4; driver for TCP and UDP frames.  This is
	    due to a report of UDP datagrams with IP options
	    generating corrupt frames.</para>

	  <para revision="266578">Preliminary support has been added
	    to the &man.urtwn.4; driver for the Realtek RTL8188EUS and
	    RTL8188ETV chipsets.</para>

	  <para revision="267694">A bug in the fast receiver buffer
	    recycle path has been fixed in the &man.cxgbe.4;
	    driver.</para>

	  <para revision="267849" contrib="vendor"
	    vendor="&chelsio;">The bundled &man.cxgbe.4; firmware for
	    T4 and T5 cards has been updated to version
	    1.11.27.0.</para>

	  <para revision="269196">The &man.em.4; driver has been
	    updated to version 7.4.2.</para>

	  <para revision="269975">The &man.ixgbe.4; tunables have been
	    renamed to match their &man.sysctl.8; counterparts:</para>

	  <informaltable frame="none" pgwide="0">
	    <tgroup cols="2">
	      <colspec colwidth="1*"/>
	      <colspec colwidth="1*"/>
	      <thead>
		<row>
		  <entry>Old Name</entry>
		  <entry>New Name</entry>
		</row>
	      </thead>

	      <tbody>
		<row>
		  <entry><literal>hw.ixgbe.enable_aim</literal></entry>
		  <entry><literal>hw.ix.enable_aim</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.max_interrupt_rate</literal></entry>
		  <entry><literal>hw.ix.max_interrupt_rate</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.rx_process_limit</literal></entry>
		  <entry><literal>hw.ix.rx_process_limit</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.tx_process_limit</literal></entry>
		  <entry><literal>hw.ix.tx_process_limit</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.enable_msix</literal></entry>
		  <entry><literal>hw.ix.enable_msix</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.num_queues</literal></entry>
		  <entry><literal>hw.ix.num_queues</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.txd</literal></entry>
		  <entry><literal>hw.ix.txd</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.rxd</literal></entry>
		  <entry><literal>hw.ix.rxd</literal></entry>
		</row>

		<row>
		  <entry><literal>hw.ixgbe.unsupported_sfp</literal></entry>
		  <entry><literal>hw.ix.unsupported_sfp</literal></entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>

	  <para>Be sure to update &man.loader.conf.5; if using the
	    old tunables before upgrading to
	    &os;&nbsp;&release.current;.</para>

	  <para revision="270061">The &man.if.nf10bmac.4; driver has
	    been merged from &os;-CURRENT to support the NetFPGA-10G
	    Embedded CPU Ethernet Core.</para>

	  <para revision="270297">The &man.cxgbe.4; driver has been
	    updated to support &man.netmap.4; for the T5 10G/40G
	    cards.</para>

	  <para revision="270509">The &man.vtnet.4; driver has been
	    updated to support &man.netmap.4;.</para>

	  <para revision="270514">The &man.urtwn.4; driver has been
	    updated to support the ASUS USB-AC51 wireless card.</para>

	  <para revision="270631">The &intel;&nbsp;XL710 ethernet
	    controller driver, <literal>ixlv(4)</literal>, has been
	    merged from &os;-CURRENT.</para>
	</sect4>
      </sect3>

      <sect3 xml:id="net-proto">
	<title>Network Protocols</title>

	<para revision="265946">Support for the UDP-Lite protocol
	  (RFC 3828) has been added to the IPv4 and IPv6
	  stacks.</para>

	<para revision="267771">A bug in &man.sctp.4; that would allow
	  two listening sockets bound to the same port has been
	  fixed.</para>

	<para contrib="sponsor" sponsor="&ix;">Kernel RPC code, which
	  is a base of NFS server took multiple optimizations, that
	  significantly improved its performance and
	  <acronym>SMP</acronym> scapability.</para>

	<para revision="269065" contrib="sponsor" sponsor="&ff;">The
	  <acronym>iSCSI</acronym> initiator has been updated to
	  support redirection handling when an
	  <acronym>iSCSI</acronym> device is configured with multiple
	  <acronym>IP</acronym> addresses across different network
	  interfaces.  Previously, clients connecting to
	  such <acronym>iSCSI</acronym> devices could require
	  additional client-side configuration.</para>

	<para revision="265523" contrib="sponsor" sponsor="&ff;">A new
	  &man.sysctl.8;,
	  <literal>kern.iscsi.fail_on_disconnection</literal>, has
	  been added, which allows <acronym>iSCSI</acronym> clients to
	  remove the attached disk device when the connection to the
	  target is dropped, where previously I/O would stop until the
	  connection is restored.</para>

	<para revision="265524" contrib="sponsor" sponsor="&ff;">The
	  <acronym>iSCSI</acronym> transmit code has been optimized
	  to coalesce <acronym>PDUs</acronym> and avoid lock
	  contention.</para>

	<para revision="265524" contrib="sponsor"
	  sponsor="&ix;">Several performance optimizations have been
	  made to the <acronym>iSCSI</acronym> subsystem, including
	  deferring wakeup until enough data has been received to
	  read or write a file, reducing <acronym>CPU</acronym> usage
	  and throughput performance with large I/O workloads.</para>

	<para>New kernel-based iSCSI target and initiator code took
	  many fixes and performance optimizations.</para>
      </sect3>

      <sect3 xml:id="disks">
	<title>Disks and Storage</title>

	<para revision="260385" contrib="sponsor" sponsor="&ix;">The
	  &man.geom.4; subsystem has been updated to support I/O
	  direct dispatch.  When safety requirements are met, it
	  allows to avoid passing I/O requests to GEOM
	  <literal>g_up</literal>/<literal>g_down</literal> thread,
	  executing them directly in the caller context.  That allows
	  to avoid CPU bottlenecks in
	  <literal>g_up</literal>/<literal>g_down</literal> threads,
	  plus avoid several context switches per I/O.</para>

	<para revision="260385" contrib="sponsor" sponsor="&ix;">The
	  &man.geom.4; RAID driver has been
	  updated to support unmapped I/O.</para>

	<para revision="260387" contrib="sponsor" sponsor="&ix;">The
	  &man.cam.4; subsystem has been updated to support
	  finer-grained locking, direct dispatch and multi-queue.
	  Combined with &man.geom.4; direct dispatch that allows to
	  reduce lock congestion and improve <acronym>SMP</acronym>
	  scalability of the SCSI/ATA stack.</para>

	<para revision="260478">The &man.geom.8;
	  <literal>GEOM_MULTIPATH</literal> class has been updated to
	  support automatic live partition resizing.</para>

	<para revision="260857">The &man.virtio_blk.4; driver has been
	  updated to support unmapped I/O.</para>

	<para revision="260858">The &man.virtio_scsi.4; driver has
	  been updated to support unmapped I/O.</para>

	<para revision="264522">Support for LUN-based CD changers has
	  been removed from the &man.cd.4; driver.</para>

	<para revision="264732">Support for
	  <literal>BIO_DELETE</literal> has been added to &man.zfs.8;
	  <literal>zvol</literal> volumes.</para>

	<para revision="264734">Support for 9th generation HP host bus
	  adapter cards has been added to &man.ciss.4;.</para>

	<para revision="265388" contrib="sponsor" sponsor="&lsi;">The
	  &man.mpr.4; device has been added,
	  providing support for LSI Fusion-MPT 3 12Gb SCSI/SATA
	  controllers.</para>

	<para revision="265678">A new <literal>zvol</literal> property
	  <literal>volmode</literal> and  &man.sysctl.8;
	  <literal>vfs.zfs.vol.mode</literal> has been added to allow
	  switching <literal>zvol</literal> between three different
	  ways of exposing it to a user: <literal>geom</literal>,
	  <literal>dev</literal> and <literal>none</literal>.</para>

	<para revision="265922" contrib="sponsor" sponsor="&lsi;">The
	  &man.mrsas.4; driver has been added, providing support for
	  LSI MegaRAID SAS controllers.  The &man.mfi.4; driver will
	  attach to the controller, by default.  To enable
	  &man.mrsas.4; add <literal>hw.mfi.mrsas_enable=1</literal>
	  to <filename>/boot/loader.conf</filename>, which turns off
	  &man.mfi.4; device probing.</para>

	<note>
	  <para>At this time, the &man.mfiutil.8; utility and the &os;
	    version of <application>MegaCLI</application> and
	    <application>StorCli</application> do not work with
	    &man.mrsas.4;.</para>
	</note>

	<para revision="266608">Fixed accounting of
	  <literal>BIO_FLUSH</literal> operation in &man.geom.8;
	  <literal>GEOM_DISK</literal> class</para>

	<para revision="266610">The &man.gstat.8; utility now has an
	  <literal>-o</literal> option, to display
	  <quote>other</quote> operations, such as
	  <literal>BIO_FLUSH</literal>.</para>

	<para revision="267084">The &man.mfi.4; driver has been
	  updated to include support for unmapped I/O.</para>

	<para revision="267457">The &man.hpt27xx.4; driver has been
	  updated with various vendor-supplied bug fixes.</para>

	<para revision="270130" contrib="sponsor"
	  sponsor="&citrix.rd;">Support for unmapped I/O has been
	  added to the &man.xen.4; <literal>blkfront</literal>
	  driver.</para>

	<para revision="259328" contrib="sponsor" sponsor="&ff;">The
	  &man.geom.8; <literal>label</literal> class is now aware of
	  resized partitions.  This corrects an issue where
	  <command>geom resize</command> would resize the partition,
	  but the label provider in <filename
	    class="directory">/dev/gptid/</filename> would not be
	  resized.</para>

	<para revision="260502">The &man.gmirror.8;
	  utility now has a <literal>resize</literal> command, making
	  it easier to resize the size of a mirror when all of its
	  components have been replaced.</para>

	<para revision="262967">Support for MegaRAID Fury cards has
	  been added to the &man.mfi.4; driver.</para>

	<para revision="263024">The &man.aacraid.4; driver has been
	  updated to version 3.2.5.</para>

	<para revision="265536">The <literal>GEOM_VINUM</literal>
	  option is now able to be built both directly into the kernel
	  or as a &man.kldload.8; loadable module.</para>

	<para revision="265912">The &man.geom.8;
	  <literal>GEOM_PART</literal> class has been updated to
	  support automatic partition resizing.  Changes to the
	  partition size are not saved to disk until
	  <command>gpart commit</command> is run, and prior to saving,
	  can be reverted with <command>gpart undo</command>.</para>

	<para revision="266220">The &man.geom.uncompress.4; module is
	  built by default which, similar to &man.geom.uzip.4;,
	  provides support for compressed, read-only disk
	  images.</para>

	<para revision="268091">Support for the
	  <literal>disklabel64</literal> partitioning scheme has been
	  added to &man.gpart.8;.</para>

	<para revision="270552">A new &man.sysctl.8; and
	  &man.loader.8; tunable,
	  <literal>kern.geom.part.mbr.enforce_chs</literal> has been
	  added to the &man.geom.8; <literal>MBR</literal> partition
	  class.  When set to a non-zero value,
	  <literal>GEOM_PART_MBR</literal> will automatically
	  recalculate the user-specified offset and size for alignment
	  with the disk geometry.</para>

	<para contrib="sponsor" sponsor="&ix;">Many improvements to
	  the CAM Target Layer (CTL):</para>
	<itemizedlist>
	  <listitem>
	    <para>Support for <literal>UNMAP</literal>, <literal>WRITE
		SAME</literal>, <literal>COMPARE AND WRITE</literal>,
	      <literal>XCOPY</literal> and some other SCSI commands
	      was added to support VMWare VAAI and Microsoft ODX
	      storage acceleration.</para>
	  </listitem>
	  <listitem>
	    <para revision="265642">The
	      <literal>READ</literal>/<literal>WRITE</literal> size
	      limitations were removed by supporting multiple
	      data moves per command.</para>
	  </listitem>
	  <listitem>
	    <para revision="268556">Finer-grained per-LUN locking and
	      multiple worker threads for better
	      <acronym>SMP</acronym> scapability.</para>
	  </listitem>
	  <listitem>
	    <para revision="269297">Memory consumption reduced by
	      several times by disabling some never used
	      functionality.</para>
	  </listitem>
	  <listitem>
	    <para revision="269298">The maximum number of
	      <acronym>SCSI</acronym> ports increased from 32 to
	      128</para>
	  </listitem>
	  <listitem>
	    <para revision="269429">Improved <literal>zvol</literal>
	      integration for better performance.</para>
	  </listitem>
	</itemizedlist>
      </sect3>

      <sect3 xml:id="fs">
	<title>File Systems</title>

	<para revision="260338">The
	  <literal>vfs.zfs.zio.use_uma</literal> &man.sysctl.8; has
	  been re-enabled.  On multi-CPU machines with enough RAM,
	  this can easily double &man.zfs.8; performance or reduce CPU
	  usage in half.  It was originally disabled due to memory and
	  <acronym>KVA</acronym> exhaustion problem reports, which
	  should be resolved due to several change in the VM
	  subsystem.</para>

	<para revision="260178" contrib="vendor"
	  vendor="&netflix;">A new flag, <literal>-R</literal>,
	  has been added to the &man.fsck.ffs.8; utility.  When used,
	  &man.fsck.ffs.8; will restart itself when too many critical
	  errors have been detected.</para>

	<para revision="263407">The &man.zfs.8; filesystem has been
	  updated to implement <quote>bookmarks</quote>.  See
	  &man.zfs.8; for further details.</para>

	<para revision="266122">The &man.zfs.8; filesystem has been
	  updated to allow tuning the minimum <quote>ashift</quote>
	  value when creating new top-level virtual devices (vdevs).
	  To set the minimum ashift value, for example when creating
	  a &man.zpool.8; on <quote>Advanced Format</quote> drives,
	  set the <literal>vfs.zfs.min_auto_ashift</literal>
	  &man.sysctl.8; accordingly.</para>

	<para revision="266612">The <literal>libzfs</literal> thread
	  pool <acronym>API</acronym> has been imported from
	  OpenSolaris, and adapted for &os;.  This change allows
	  parallel disk scanning, which can reduce &man.zpool.8;
	  overall import time in some workloads.</para>

	<para revision="269651">The &man.restore.8; utility has been
	  updated to prevent assertion failures when restoring
	  a <acronym>UFS</acronym> filesystem dump to
	  a <acronym>ZFS</acronym> filesystem by writing restored
	  files in block sizes that are a multiple of 1024.</para>

	<para revision="269774">Two &man.sysctl.8;s have been added
	  to the &man.zfs.8; filesystem:</para>

	<itemizedlist>
	  <listitem>
	    <para>
	      <literal>vfs.zfs.mg_fragmentation_threshold</literal>:&nbsp;The
	      percentage of the metaslab group size that should be
	      considered eligible for allocation, unless all metaslab
	      groups within the metaslab class have also crossed this
	      threshold.</para>
	  </listitem>

	  <listitem>
	    <para>
	      <literal>vfs.zfs.metaslab.fragmentation_threshold</literal>:&nbsp;The
	      maximum percentage of metaslab fragmentation level to
	      keep their active state</para>
	  </listitem>
	</itemizedlist>

	<para revision="269846">The default &man.zfs.8;
	  <acronym>ARC</acronym> hash table size has been increased,
	  and a new &man.loader.8; tunable,
	  <literal>vfs.zfs.arc_average_blocksize</literal>, has been
	  added.  Previously, the hash table could be too small, which
	  would lead to long hash chains and limit performance for
	  cached reads.  The
	  <literal>vfs.zfs.arc_average_blocksize</literal> tunable
	  allows overriding the default block size.  The previous
	  default was 65536, and default of the new &man.loader.8;
	  tunable is 8192.</para>

	<para revision="270157">The Fast File System
	  (<acronym>FFS</acronym>) has been updated to support
	  multi-threaded soft updates.  Previously, soft updates were
	  handled by a single thread, and as of this change, now have
	  one thread per <acronym>FFS</acronym> mountpoint.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="userland">
      <title>Userland Changes</title>

      <para revision="260177" contrib="sponsor"
	sponsor="&netflix;">A new flag is added to &man.camcontrol.8;,
	<literal>-b</literal>, which outputs the existing buses and
	their parents.</para>

      <para revision="262075">The &man.newsyslog.8; utility has been
	updated to rotate files based on the actual file size instead
	of the blocks on disk.  This matches the behavior documented
	in &man.newsyslog.conf.5;.</para>

      <para revision="262384">The location of the &man.rctl.8;
	configuration file can now be overridden in &man.rc.conf.5;.
	To use a non-default location, set
	<literal>rctl_rules</literal> in &man.rc.conf.5; to the
	location of the file.</para>

      <para revision="262855">The <application>ATF</application> test
	suite has been updated to version 0.20.  The test suite is
	disabled by default in &os;&nbsp;10.1, and can be enabled by
	adding <literal>WITH_TESTS=yes</literal> to
	&man.src.conf.5;.</para>

      <para revision="263019">The <literal>libucl</literal> library
	(Unified Configuration Library) has been merged from
	&os;-CURRENT.</para>

      <para revision="263020">The &man.pkg.7; bootstrapping utility
	has been synced with the version in &os;-CURRENT.</para>

      <para revision="263403">The &man.zfs.8; userland utility has
	been updated to include aliases for
	<command>snapshot</command>, which allows use of <command>zfs
	  list -t snap</command> and <command>zfs
	  snap</command>.</para>

      <para revision="263405">The &man.zfs.8; userland utility has
	been updated to include a new flag to <command>zfs
	  list</command>, <literal>-p</literal>, which when specified,
	prints the output in a parsable format.</para>

      <para revision="263783">The Blowfish password format
	implementation updated.  Support for &dollar;2b&dollar; has
	been added, allowing use of passwords greater than 256
	characters long.</para>

      <para revision="264497">The &man.iconv.3; library has been
	updated to match NetBSD, providing several bug fixes.</para>

      <para revision="265265">The &man.date.1; utility has been
	updated to include a new flag, <literal>-R</literal>, which
	prints the date and time output as specified in RFC
	2822.</para>

      <para revision="265533">The &man.bc.1; utility has been updated
	to version 1.1, in sync with the version in OpenBSD.</para>

      <para revision="265604" contrib="vendor"
	vendor="&netflix;">The &man.pmcstat.8; utility has been
	updated to include a new flag, <literal>-a</literal>, which
	when specified, produces a full stack track on the sampled
	points.</para>

      <para revision="265701">The &man.netstat.8; and &man.route.8;
	utilities have been updated to include a shorthand equivalent
	to the <literal>-f inet</literal> and <literal>-f
	  inet6</literal> address specifiers, <literal>-4</literal>
	and <literal>-6</literal>, respectively.</para>

      <para revision="265879">The &man.crypt.3; library now defaults
	to SHA512 for password hashing.</para>

      <para revision="266014">The &man.gvinum.8; utility has been
	updated to allow forceful configuration reset with the
	<literal>-f</literal> flag.  Additionally, a bug that would
	prevent <literal>-f</literal> from properly creating
	a &man.gvinum.8; configuration has been fixed.</para>

      <para revision="266029">The &man.login.conf.5; file now takes
	precedence over the shell-specific environment files.  In
	particular, the <literal>PATH</literal>,
	<literal>BLOCKSIZE</literal> variables are commented from
	<filename>/usr/share/skel/dot.profile</filename>, and the
	<literal>path</literal>, <literal>BLOCKSIZE</literal>, and
	<literal>umask</literal> variables have been commented from
	<filename>/usr/share/skel/dot.cshrc</filename>.</para>

      <para revision="266272">The &man.binmiscctl.8; userland utility
	and related image activator features have been merged from
	&os;-CURRENT.</para>

      <para revision="266279">The &man.ps.1; utility has been
	updated to include the <literal>-J</literal> flag, used to
	filter output by matching &man.jail.8; IDs and names.
	Additionally, argument <literal>0</literal> can be used to
	<literal>-J</literal> to only list processes running on the
	host system.</para>

      <para revision="266280">The &man.top.1; utility has been updated
	to filter by &man.jail.8; ID or name, in followup to the
	&man.ps.1; change in <literal>r265229</literal>.</para>

      <para revision="266610">The &man.gstat.8; utility has been
	updated to include a new flag, <literal>-o</literal>.  When
	set, &man.gstat.8; will display statistics for operations
	such as <literal>BIO_FLUSH</literal>.</para>

      <para revision="266632">The &man.fetch.3; library has been
	updated to look for root <acronym>SSL</acronym> certificates
	in <filename class="directory">/usr/local/etc/ssl/</filename>
	before <filename
	  class="directory">/etc/ssl/</filename>.</para>

      <para revision="266715">The &man.clang.1;/llvm suite has been
	updated to version 3.4.1.</para>

      <para revision="266816">The Blowfish password format
	has been changed to &dollar;2b&dollar; by default.</para>

      <para revision="266888">The amount of data collected for
	&man.hwpmc.4; has been updated to work with modern processors
	and larger amounts of available memory.</para>

      <para revision="266890">The &man.pmcstat.8; utility has been
	updated to include a new flag, <literal>-l</literal>, which
	ends event collection after the specified number of
	seconds.</para>

      <para revision="266953">The &man.mergemaster.8; utility has
	been updated to avoid printing
	<quote><filename>/var/tmp/temproot</filename>
	  disappeared</quote> if there is nothing to compare.</para>

      <para revision="267056">The &os; installer, &man.bsdinstall.8;,
	has been updated to include optional
	&man.geli.8;-encrypted or &man.gmirror.8;-mirrored swap
	devices when installing onto a full &man.zfs.8; filesystem.
	Additionally, the parent &man.zfs.8; dataset is now configured
	with <literal>lz4</literal> compression enabled.</para>

      <para revision="267113">The default &man.newsyslog.conf.5; now
	includes files in the
	<filename>/etc/newsyslog.conf.d/</filename> and
	<filename>/usr/local/etc/newsyslog.conf.d/</filename>
	directories by default for &man.newsyslog.8;.</para>

      <para revision="267161">The &man.realpath.1; utility has been
	updated to return <literal>ENOTDIR</literal> on paths
	components <quote>.</quote> and <quote>..</quote> that are
	not directories, such as <filename
	  class="directory">/dev/null/.</filename> or <filename
	  class="directory">/dev/null/..</filename>.</para>

      <para revision="267236">A new flag, <quote>onifconsole</quote>
	has been added to <filename>/etc/ttys</filename>.  This allows
	the system to provide a login prompt via serial console if the
	device is an active kernel console, otherwise it is equivalent
	to <literal>off</literal>.</para>

      <para revision="267341">Support for legacy
	<acronym>PCI</acronym> devices has been removed from
	&man.bhyve.8;.</para>

      <para revision="267450">The &man.bhyve.8; userland utility
	has been updated to include SMBIOS support.  A new flag has
	been added, <literal>-U</literal>, which allows specifying the
	UUID of the guest in the System Information structure.</para>

      <para revision="267734">The &os;&nbsp;Project has migrated
	from the <application>GNATS</application> bug tracking system
	to <application>Bugzilla</application>.  The &man.send-pr.1;
	utility used for submitting problem reports has been replaced
	with a stub shell script that instructs to use the Bugzilla
	web interface.</para>

      <para revision="267747">The &man.patch.1; utility has been
	updated to include a <literal>--dry-run</literal> flag, which
	is equivalent to <literal>--check</literal> and
	<literal>-C</literal>.</para>

      <para revision="267878">A bug in &man.bsdgrep.1; that would
	prevent patterns from being matched under certain conditions
	has been fixed.</para>

      <para revision="267979">The &man.procstat.1; utility has been
	updated to include two new flags, <literal>-r</literal> and
	<literal>-H</literal>.  When <literal>-r</literal> is
	specified, &man.procstat.1; will print current resource usage
	about the process(es).  When <literal>-H</literal> is
	specified, &man.procstat.1; will print information about
	threads rather than the process(es).</para>

      <note>
	<para>The <literal>-H</literal> flag is currently only used
	  with <literal>-r</literal> to display resource usage for
	  individual threads, rather than the entire process.</para>
      </note>

      <para revision="268019">The &man.sed.1; utility has been
	updated to include a new flag, <literal>-u</literal>, which
	enables unbuffered output when specified.</para>

      <para revision="268161">The &man.mkimg.1; utility has been
	merged from &os;-CURRENT.</para>

      <para revision="268700" contrib="sponsor"
	sponsor="&spectralogic;">The &man.camcontrol.8; has been
	updated to include a new <literal>persist</literal> command,
	which allows issuing <command>SCSI PERSISTENT RESERVE
	  IN</command> and <command>SCSI PERSISTENT RESERVE
	  OUT</command>.</para>

      <para revision="268791">The &man.gstat.8; utility has been
	updated to include a new flag, <literal>-p</literal>, which
	displays only physical providers when specified.</para>

      <para revision="268903">The &man.kldstat.8; utility has been
	updated to allow <literal>-q</literal> to be specified when
	also specifying <literal>-n
	  <replaceable>module.ko</replaceable></literal>.</para>

      <para revision="269177">The &man.mkimg.1; utility has been
	updated to include support for both fixed- and
	dynamically-allocated images for the <acronym>VHD</acronym>
	and <acronym>VMDK</acronym> formats.</para>

      <para revision="269220">The &man.random.4; entropy collection
	script, <filename>/usr/libexec/save-entropy</filename>, no
	longer runs within &man.jail.8; environments.</para>

      <para revision="269397">The &man.bhyve.8; wrapper script,
	<filename>/usr/share/examples/bhyve/vmrun.sh</filename>,
	has been synced with &os;-CURRENT.</para>

      <para>This update includes:</para>

      <itemizedlist>
	<listitem>
	  <para>A new flag, <literal>-e</literal>, has been added,
	    which is used to set &man.loader.8; environment
	    variables.</para>
	</listitem>

	<listitem>
	  <para>A new flag, <literal>-C</literal>, has been added,
	    which is used to specify the guest console device.</para>
	</listitem>

	<listitem>
	  <para>A new flag, <literal>-H</literal>, has been added,
	    which is used to pass the host path to
	    &man.bhyveload.8;.</para>
	</listitem>

	<listitem>
	  <para>Support for multiple disk and &man.tap.4; devices
	    has been added.</para>
	</listitem>

	<listitem>
	  <para>The <literal>-I</literal> flag has been
	    removed.</para>
	</listitem>
      </itemizedlist>

      <para revision="269398">The &man.nfsd.8; server update to 4.1,
	adding support for RFC5661, has merged from
	&os;-CURRENT.</para>

      <para revision="269432" arch="ia64">The serial terminals
	<filename>ttyu0</filename> and <filename>ttyu1</filename> have
	been updated to <literal>onifconsole</literal> by default in
	&man.ttys.5;, which either can be the serial console,
	depending on the platform.</para>

      <para revision="269800">The &man.ping6.8; utility has been
	updated to reset <literal>itimer</literal> when the maximum
	number of packets to send have been reached.  This prevents
	&man.ping6.8; from exiting when the interval in set to a small
	value and a low number of packets to send has been
	specified.</para>

      <para revision="269805">The &man.jail.8; utility has been
	updated to support extra &man.ifconfig.8; arguments for the
	<literal>ip4.addr</literal> and <literal>ip6.addr</literal>
	parameters.  This change allows &man.carp.4; interfaces to
	be used within the &man.jail.8;.</para>

      <para revision="269946">Support for generating and compiling
	<acronym>USDT</acronym> <application>DTrace</application>
	probes has been improved.  <application>DTrace</application>
	<acronym>USDT</acronym> files are now handled similar to
	&man.lex.1; and &man.yacc.1; files, meaning support for
	handling <application>D</application> files as part of the
	build process is built into the <literal>SRCS</literal>
	&man.make.1; environment variable.</para>

      <para revision="269968">The &man.iscsictl.8; utility has been
	updated to include a new flag, <literal>-M</literal>, which
	allows modifying the <acronym>iSCSI</acronym> session
	parameters without requiring the session to be removed and
	added back.</para>

      <para revision="270043">The &man.mount.nfs.8; utility has been
	updated to support specifying the NFS version as
	a <literal>key=<replaceable>value</replaceable></literal> pair
	argument to the <literal>-o</literal> flag.  For example, to
	specify NFS version 4, the syntax to use is
	<literal>-o&nbsp;vers=4</literal>.</para>

      <para revision="270242" contrib="sponsor"
	sponsor="&spectralogic;">The &man.devd.8; client socket type
	has been changed to <literal>SOCK_SEQPACKET</literal>,
	providing sequential packet support.</para>

      <para revision="270401">Support for the <quote>account</quote>
	facility has been added to the &man.pam.group.8;
	module.</para>

      <sect3 xml:id="rc-scripts">
	<title><filename>/etc/rc.d</filename> Scripts</title>

	<para revision="264438">The <filename>network.subr</filename>
	  &man.rc.8; script has been updated to loosen the requirement
	  of listing network aliases in numeric order.  Previously,
	  a network alias of
	  <literal>_alias<replaceable>2</replaceable></literal>
	  would not be created if
	  <literal>_alias<replaceable>1</replaceable></literal> was
	  not defined.</para>

	<para revision="268098">The &man.service.8; utility has been
	  updated to check that the &man.rc.d.8; directory exists
	  before traversing the directory.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="contrib">
      <title>Contributed Software</title>

      <para revision="263285">The &man.xz.1; utility has been updated
	to a post-5.0.5 snapshot.</para>

      <para revision="264377"><application>OpenSSH</application> has
	been updated to version 6.6p1.</para>

      <para revision="264911">The &man.nc.1; utility has been updated
	to match the version in OpenBSD 5.5.</para>

      <para revision="266692"><application>Sendmail</application>
	has been updated to 8.14.9.</para>

      <para revision="268515">The &man.file.1; utility and
	&man.libmagic.3; library have been updated to 5.19.</para>

      <para revision="268899">The &man.byacc.1; parser has been
	updated to version 20140422.</para>

      <para revision="269024" contrib="sponsor"
	sponsor="&darpa_afrl;">The &man.lldb.1; debugging library has
	been updated to the r202189 snapshot.</para>

      <para revision="269257">The &man.unbound.8; caching resolver and
	<literal>ldns</literal> have been updated to version
	1.4.22.</para>

      <para revision="269686"><application>OpenSSL</application> has
	been updated to version 1.0.1i.</para>

      <para revision="269847">The <quote>lite</quote> version of
	<application>Subversion</application> included in the
	&os;&nbsp;base system and its dependencies have been
	updated:</para>

      <itemizedlist>
	<listitem>
	  <para><application>apr</application> has been
	    updated to version 1.5.1.</para>
	</listitem>

	<listitem>
	  <para><application>apr-util</application> has been
	    updated to version 1.5.3.</para>
	</listitem>

	<listitem>
	  <para><application>serf</application> has been
	    updated to version 1.3.7.</para>
	</listitem>

	<listitem>
	  <para><application>svnlite</application> has been
	    updated to version 1.8.10.</para>
	</listitem>
      </itemizedlist>

      <para revision="270026">The &man.nvi.1; editor has been
	update to version 2.1.2-c80f493b038.</para>

      <para revision="270031">The &man.fparseln.3; library has
	been updated to version 1.7.</para>

      <para revision="270415">The <application>lukemftpd</application>
	<acronym>FTP</acronym> server has been removed from the
	&os;&nbsp;base system.</para>

      <para revision="270817">The timezone database has been updated
	to version tzdata2014f.</para>
    </sect2>

    <sect2 xml:id="ports">
      <title>Ports/Packages Collection Infrastructure</title>

      <para>&nbsp;</para>

    </sect2>

    <sect2 xml:id="releng">
      <title>Release Engineering and Integration</title>

      <para revision="263028">The &man.services.mkdb.8; utility has
	been updated to include endianness awareness, allowing the
	<filename>services.db</filename> database to be created as
	part of the release build, regardless of native- or
	cross-built releases.</para>
    </sect2>

    <sect2 xml:id="doc">
      <title>Documentation</title>

      <para>&nbsp;</para>

    </sect2>
  </sect1>

  <sect1 xml:id="upgrade">
    <title>Upgrading from Previous Releases of &os;</title>

    <para arch="amd64,i386">Binary upgrades between RELEASE versions
      (and snapshots of the various security branches) are supported
      using the &man.freebsd-update.8; utility.  The binary upgrade
      procedure will update unmodified userland utilities, as well as
      unmodified <filename>GENERIC</filename> kernel distributed as
      a part of an official &os; release.  The &man.freebsd-update.8;
      utility requires that the host being upgraded have Internet
      connectivity.</para>

    <para>Source-based upgrades (those based on recompiling the &os;
      base system from source code) from previous versions are
      supported, according to the instructions in
      <filename>/usr/src/UPDATING</filename>.</para>

    <important>
      <para>Upgrading &os; should only be attempted after
	backing up <emphasis>all</emphasis> data and configuration
	files.</para>
    </important>
  </sect1>
</article>
