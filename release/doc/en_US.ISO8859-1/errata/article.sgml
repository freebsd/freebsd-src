<!--
	FreeBSD errata document.  Unlike some of the other RELNOTESng
	files, this file should remain as a single SGML file, so that
	the dollar FreeBSD dollar header has a meaningful modification
	time.  This file is all but useless without a datestamp on it,
	so we'll take some extra care to make sure it has one.

	(If we didn't do this, then the file with the datestamp might
	not be the one that received the last change in the document.)

-->

<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % articles.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Articles Entity Set//EN">
%articles.ent;

<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;
<!ENTITY release.bugfix "6.0-RELEASE">
]>

<article>
  <articleinfo>
    <title>&os; &release.bugfix; Errata</title>

    <corpauthor>
    The &os; Project
    </corpauthor>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
    </copyright>

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.intel;
      &tm-attrib.sparc;
      &tm-attrib.general;
    </legalnotice>
  </articleinfo>

  <abstract>
    <para>This document lists errata items for &os; &release.bugfix;,
      containing significant information discovered after the release
      or too late in the release cycle to be otherwise included in the
      release documentation.
      This information includes security advisories, as well as news
      relating to the software or documentation that could affect its
      operation or usability.  An up-to-date version of this document
      should always be consulted before installing this version of
      &os;.</para>

    <para>This errata document for &os; &release.bugfix;
      will be maintained until the release of &os; &release.next;.</para>
  </abstract>

  <sect1 id="intro">
    <title>Introduction</title>

    <para>This errata document contains <quote>late-breaking news</quote>
      about &os; &release.bugfix;.
      Before installing this version, it is important to consult this
      document to learn about any post-release discoveries or problems
      that may already have been found and fixed.</para>

    <para>Any version of this errata document actually distributed
      with the release (for example, on a CDROM distribution) will be
      out of date by definition, but other copies are kept updated on
      the Internet and should be consulted as the <quote>current
      errata</quote> for this release.  These other copies of the
      errata are located at <ulink
      url="http://www.FreeBSD.org/releases/"></ulink>, plus any sites
      which keep up-to-date mirrors of this location.</para>

    <para>Source and binary snapshots of &os; &release.branch; also
      contain up-to-date copies of this document (as of the time of
      the snapshot).</para>

    <para>For a list of all &os; CERT security advisories, see <ulink
      url="http://www.FreeBSD.org/security/"></ulink> or <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/"></ulink>.</para>

  </sect1>

  <sect1 id="late-news">
    <title>Update Information</title>

    <para>No news.</para>
  </sect1>

  <sect1 id="security">
    <title>Security Advisories</title>

    <para>The following security advisories pertain to &os; &release.bugfix;.
      For more information, consult the individual advisories available from
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/"></ulink>.</para>

    <informaltable frame="none" pgwide="0">
      <tgroup cols="3">
	<colspec colwidth="1*">
	<colspec colwidth="1*">
	<colspec colwidth="3*">
	<thead>
	  <row>
	    <entry>Advisory</entry>
	    <entry>Date</entry>
	    <entry>Topic</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:05.80211.asc"
		>06:05.80211</ulink></entry>
	    <entry>18&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>IEEE 802.11 buffer overflow</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:04.ipfw.asc"
		>06:04.ipfw</ulink></entry>
	    <entry>11&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>&man.ipfw.4; IP fragment denial of service</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:03.cpio.asc"
		>06:03.cpio</ulink></entry>
	    <entry>11&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>Multiple vulnerabilities in &man.cpio.1;</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:02.ee.asc"
		>06:02.eex</ulink></entry>
	    <entry>11&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>&man.ee.1; temporary file privilege escalation</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:01.texindex.asc"
		>06:01.texindex</ulink></entry>
	    <entry>11&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>Texindex temporary file privilege escalation</para></entry>
	  </row>
	</tbody>
      </tgroup>
    </informaltable>
  </sect1>

  <sect1 id="known-problems">
    <title>Known Problems and Solutions</title>

    <para>(2005/11/26)
      On 6.0-RELEASE, the following &man.ipfw.4; rule is interpreted
      in a different way from the previous releases:</para>

    <programlisting>allow ipv6 from 192.168.0.2 to me</programlisting>

    <para>When &man.ipfw.4; does not support IPv6 (see the next
      entry for the details), &man.ipfw.8; accepts this rule and
      this blocks an IPv6 packet encapsulated in an IPv4 packet
      (IPv6-over-IPv4 tunneling, protocol number 41) whose
      source address is <literal>192.168.0.2</literal>.
      When it supports IPv6, on the other hand, this means a rule
      to allow an IPv6 packet from <literal>192.168.0.2</literal>,
      and actually &man.ipfw.8; rejects this rule because the
      syntax is incorrect (<quote>an IPv6 packet from an IPv4 address</quote>
      never happens).  Unfortunately there is no simple workaround
      for this problem.</para>

    <para>The &man.ipfw.4; IPv6 support still has rough edges
      and there are other problems due to incompatibility between
      the two.  As a workaround for them, you can use a combination
      of IPv4-only &man.ipfw.4; and &man.ip6fw.8;, which is almost
      compatible with the prior releases, instead of &man.ipfw.4;
      with IPv6 support.
      To disable IPv6 support of &man.ipfw.4;, use
      the <filename>ipfw.ko</filename> kernel module and
      do not use the kernel option <literal>IPFIREWALL</literal>.</para>

    <para>(2005/11/19)
      Although the &os; 6.0-RELEASE Release Notes states that
      &man.ipfw.4; subsystem now supports IPv6,
      the combination of the <filename>GENERIC</filename> kernel
      and a kernel module <filename>ipfw.ko</filename>
      does not support the <literal>ip6</literal> protocol keyword
      for packet filtering rule.  This is because the kernel option
      <literal>INET6</literal> in the kernel configuration file
      is not recognized when the <filename>ipfw.ko</filename>
      is built.  To enable IPv6 support of &man.ipfw.4;, rebuild
      the kernel with kernel options <literal>INET6</literal>
      and <literal>IPFIREWALL</literal> instead of
      using the <filename>ipfw.ko</filename> module.</para>

    <para>(2005/11/16)
      Using &man.if.bridge.4; in combination with a packet filter
      such as &man.ipfw.4; and &man.pf.4; can prevent the network
      stack from working and/or lead to a system panic after
      a certain period of time.
      This is because it allocates &man.mbuf.9; buffers for network
      packets and never releases a part of them, so eventually
      all of the buffer memory will be exhausted.
      This problem has been fixed in the HEAD and the RELENG_6
      branch after 10:17:15 2005/11/16 UTC.</para>

    <para>(2005/11/16, updated on 2005/11/19)
      When an &man.ipfw.4; <literal>divert</literal> rule
      is specified with the protocol keyword <literal>ip</literal>
      or <literal>all</literal>,
      IPv6 packets are silently discarded at that rule
      since the &man.divert.4; socket does not support IPv6.
      This can be a problem especially for an IPv4 and IPv6 dual-stack host
      with &man.natd.8; enabled.  <emphasis role="bold">Note that
	the kernel module <filename>ipfw.ko</filename> does not
	have this problem because it does not support IPv6.</emphasis>
      To avoid this problem, use an IPv4 specific divert rule such
      as <literal>divert natd ipv4</literal>
      instead of <literal>divert natd all</literal>.</para>

    <para>(2005/11/6)
      The &os; 6.0-RELEASE Release Notes wrongly states
      a kernel option related to &man.ipfw.8; as
      <literal>IPFIRWALL_FORWARD</literal>.
      The correct option keyword is <literal>IPFIREWALL_FORWARD</literal>.</para>

    <para>(2005/11/5)
      The &os; 6.0-RELEASE Release Notes wrongly states the version number
      of OpenSSH and IPFilter integrated into &os; as 4.1p1 and 4.1.18.
      The correct versions are 4.2p1 and 4.1.8 respectively.</para>

    <para>(2005/11/5)
      Distribution of 6.0-RELEASE contains <filename>CHECKSUM.MD5</filename>
      and <filename>CHECKSUM.SHA256</filename> files for protecting
      the integrity of data.  However, these files in 6.0-RELEASE erroneously
      include checksums for the checksum files themselves.
      Although the checksums look like wrong, they can be safely ignored
      because a checksum for the checksum file never corresponds
      to one in the file.  This problem will be fixed in the next
      releases.</para>

    <para>(2005/11/5, &os;/amd64 specific)
      The &man.pmcstat.8; utility cannot yet handle 32-bit
      executables when converting &man.hwpmc.4; log
      files to &man.gprof.1; format.</para>

    <para>(2005/11/5, &os;/powerpc specific)
      The following panic may occur at boot-time on some older
      PowerMac G4 systems:</para>

<screen>...
KDB: current backend: ddb
panic: Assertion curthread != NULL failed at
/usr/src/sys/kern/kern_mutex.c:268
KDB: enter panic</screen>

    <para>This is a known problem with no workaround, and will be fixed in the
      next release.</para>

    <para>(2005/11/5)
      Changes of on-disk format of <filename>/usr/share/locale/*/LC_*</filename>
      files in 6.0-RELEASE prevent third-party software which uses
      &man.setlocale.3; for its localization from working after
      a 5.x system upgraded.  The software includes ones installed
      into the 5.x system by using &os; Ports Collection and so on.
      To solve this problem, perform one of the following:</para>

    <itemizedlist>
      <listitem>
	<para>Install misc/compat5x package into the upgraded 6.0 system.
	  This package installs a library <filename>lib/compat/libc.so.5</filename>
	  which makes the software complied in a 5.x system use
	  the old locale files to keep compatibility.
	  Note that you need to remove <filename>/lib/libc.so.5</filename>
	  after upgrading.</para>

	<para>This package is available only for Tier-1 platforms.</para>
      </listitem>

      <listitem>
	<para>Recompile the software on the 6.0 system.</para>
      </listitem>
    </itemizedlist>

    <para>(2005/10/3)
      At boot time the &os;/sparc64 GENERIC kernel may
      output the following messages when the machine has
      no framebuffer:</para>

    <screen>Aug 26 19:31:27 hostname getty[429]: open /dev/ttyv1: No such file or directory</screen>

    <para>This is because the machine with no supported
      graphics hardware does not recognize &man.syscons.4; and
      <filename>/dev/ttyv*</filename> device nodes are not created.
      This is not a harmful error and can be suppressed by disabling
      <filename>/dev/ttyv*</filename> entries in
      <filename>/etc/ttys</filename>.</para>

    <para>(2005/10/3)
      Kernel modules do not work on &os;/sparc64
      when the machine has more than 4GB memory.  There is no workaround
      for this issue except for compiling the modules statically into
      your custom kernel in advance.</para>

    <para>(2005/10/3)
      The &man.kgdb.1; utility does not work properly
      on &os;/sparc64 for debugging panics which include traps.
      As a workaround you can use <filename>devel/gdb53</filename>.</para>
  </sect1>

</article>
