# $FreeBSD$
# fstest configuration file

# Known operating systems: FreeBSD, SunOS, Linux
os=`uname`

case "${os}" in
FreeBSD|Darwin)
	GREP=grep
	#fs=`df -T . | tail -1 | awk '{print $2}'`
	pattern="`df . | tail -1 | awk '{printf("%s on %s \n", $1, $6)}'`"
	fs=`mount | egrep "^${pattern}" | awk -F '[(,]' '{print $2}' | tr '[:lower:]' '[:upper:]'`
	;;
Solaris|SunOS)
	GREP=ggrep
	pattern=`df -k . | tail -1 | awk '{printf("%s on %s \n", $1, $6)}'`
	fs=`mount -v | egrep "^${pattern}" | awk '{print $5}' | \
	    tr -s '[:lower:]' '[:upper:]'`
	;;
Linux)
	GREP=grep
	fs=`df -PT . | tail -1 | awk '{print $2}' | tr '[:lower:]' '[:upper:]'`
	;;
*)
	echo "Unsupported operating system ${os}." >/dev/stderr
	exit 1
	;;
esac

# If we cannot figure out file system type, define it here.
#fs="UFS"

if [ -z "${fs}" ]; then
	echo "Cannot figure out file system type, define it by hand." >/dev/stderr
	exit 1
fi
