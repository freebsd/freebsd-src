.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man 5.0102 (Pod::Simple 3.45)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "SSL_SET_INCOMING_STREAM_POLICY 3ossl"
.TH SSL_SET_INCOMING_STREAM_POLICY 3ossl 2025-07-01 3.5.1 OpenSSL
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
SSL_set_incoming_stream_policy, SSL_INCOMING_STREAM_POLICY_AUTO,
SSL_INCOMING_STREAM_POLICY_ACCEPT,
SSL_INCOMING_STREAM_POLICY_REJECT \- manage the QUIC incoming stream
policy
.SH SYNOPSIS
.IX Header "SYNOPSIS"
.Vb 1
\& #include <openssl/ssl.h>
\&
\& #define SSL_INCOMING_STREAM_POLICY_AUTO
\& #define SSL_INCOMING_STREAM_POLICY_ACCEPT
\& #define SSL_INCOMING_STREAM_POLICY_REJECT
\&
\& int SSL_set_incoming_stream_policy(SSL *conn, int policy,
\&                                           uint64_t app_error_code);
.Ve
.SH DESCRIPTION
.IX Header "DESCRIPTION"
\&\fBSSL_set_incoming_stream_policy()\fR policy changes the incoming stream policy for a
QUIC connection. Depending on the policy configured, OpenSSL QUIC may
automatically reject incoming streams initiated by the peer. This is intended to
ensure that legacy applications using single-stream operation with a default
stream on a QUIC connection SSL object are not passed remotely-initiated streams
by a peer which those applications are not prepared to handle.
.PP
\&\fIapp_error_code\fR is an application error code which will be used in any QUIC
\&\fBSTOP_SENDING\fR or \fBRESET_STREAM\fR frames generated to implement the policy. The
default application error code is 0.
.PP
The valid values for \fIpolicy\fR are:
.IP SSL_INCOMING_STREAM_POLICY_AUTO 4
.IX Item "SSL_INCOMING_STREAM_POLICY_AUTO"
This is the default setting. Incoming streams are accepted according to the
following rules:
.RS 4
.IP \(bu 4
If the default stream mode (configured using \fBSSL_set_default_stream_mode\fR\|(3))
is set to \fBSSL_DEFAULT_STREAM_MODE_AUTO_BIDI\fR (the default) or
\&\fBSSL_DEFAULT_STREAM_MODE_AUTO_UNI\fR, the incoming stream is rejected.
.IP \(bu 4
Otherwise (where the default stream mode is \fBSSL_DEFAULT_STREAM_MODE_NONE\fR),
the application is assumed to be stream aware, and the incoming stream is
accepted.
.RE
.RS 4
.RE
.IP SSL_INCOMING_STREAM_POLICY_ACCEPT 4
.IX Item "SSL_INCOMING_STREAM_POLICY_ACCEPT"
Always accept incoming streams, allowing them to be dequeued using
\&\fBSSL_accept_stream\fR\|(3).
.IP SSL_INCOMING_STREAM_POLICY_REJECT 4
.IX Item "SSL_INCOMING_STREAM_POLICY_REJECT"
Always reject incoming streams.
.PP
Where an incoming stream is rejected, it is rejected immediately and it is not
possible to gain access to the stream using \fBSSL_accept_stream\fR\|(3). The stream
is rejected using QUIC \fBSTOP_SENDING\fR and \fBRESET_STREAM\fR frames as
appropriate.
.SH "RETURN VALUES"
.IX Header "RETURN VALUES"
Returns 1 on success and 0 on failure.
.PP
This function fails if called on a QUIC stream SSL object, or on a non-QUIC SSL
object.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fBSSL_set_default_stream_mode\fR\|(3), \fBSSL_accept_stream\fR\|(3)
.SH HISTORY
.IX Header "HISTORY"
\&\fBSSL_set_incoming_stream_policy()\fR was added in OpenSSL 3.2.
.SH COPYRIGHT
.IX Header "COPYRIGHT"
Copyright 2002\-2023 The OpenSSL Project Authors. All Rights Reserved.
.PP
Licensed under the Apache License 2.0 (the "License").  You may not use
this file except in compliance with the License.  You can obtain a copy
in the file LICENSE in the source distribution or at
<https://www.openssl.org/source/license.html>.
