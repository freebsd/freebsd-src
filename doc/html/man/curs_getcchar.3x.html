<!--
  ****************************************************************************
  * Copyright 2019-2024,2025 Thomas E. Dickey                                *
  * Copyright 2001-2015,2017 Free Software Foundation, Inc.                  *
  *                                                                          *
  * Permission is hereby granted, free of charge, to any person obtaining a  *
  * copy of this software and associated documentation files (the            *
  * "Software"), to deal in the Software without restriction, including      *
  * without limitation the rights to use, copy, modify, merge, publish,      *
  * distribute, distribute with modifications, sublicense, and/or sell       *
  * copies of the Software, and to permit persons to whom the Software is    *
  * furnished to do so, subject to the following conditions:                 *
  *                                                                          *
  * The above copyright notice and this permission notice shall be included  *
  * in all copies or substantial portions of the Software.                   *
  *                                                                          *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *
  * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *
  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *
  * IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *
  * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *
  * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *
  * THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *
  *                                                                          *
  * Except as contained in this notice, the name(s) of the above copyright   *
  * holders shall not be used in advertising or otherwise to promote the     *
  * sale, use or other dealings in this Software without prior written       *
  * authorization.                                                           *
  ****************************************************************************
  * @Id: curs_getcchar.3x,v 1.57 2025/02/23 13:48:31 tom Exp @
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta name="generator" content="Manpage converted by man2html - see https://invisible-island.net/scripts/readme.html#others_scripts">
<TITLE>curs_getcchar 3x 2025-02-23 ncurses 6.6 Library calls</TITLE>
<link rel="author" href="mailto:bug-ncurses@gnu.org">

</HEAD>
<BODY>
<H1 class="no-header">curs_getcchar 3x 2025-02-23 ncurses 6.6 Library calls</H1>
<PRE>
<STRONG><A HREF="curs_getcchar.3x.html">curs_getcchar(3x)</A></STRONG>                Library calls               <STRONG><A HREF="curs_getcchar.3x.html">curs_getcchar(3x)</A></STRONG>


</PRE><H2><a name="h2-NAME">NAME</a></H2><PRE>
       <STRONG>getcchar</STRONG>,  <STRONG>setcchar</STRONG>  -  convert  between  a wide-character string and a
       <EM>curses</EM> complex character


</PRE><H2><a name="h2-SYNOPSIS">SYNOPSIS</a></H2><PRE>
       <STRONG>#include</STRONG> <STRONG>&lt;curses.h&gt;</STRONG>

       <STRONG>int</STRONG> <STRONG>getcchar(const</STRONG> <STRONG>cchar_t</STRONG> <STRONG>*</STRONG> <EM>wch</EM><STRONG>,</STRONG> <STRONG>wchar_t</STRONG> <STRONG>*</STRONG> <EM>wc</EM><STRONG>,</STRONG>
             <STRONG>attr_t</STRONG> <STRONG>*</STRONG> <EM>attrs</EM><STRONG>,</STRONG> <STRONG>short</STRONG> <STRONG>*</STRONG> <EM>pair</EM><STRONG>,</STRONG> <STRONG>void</STRONG> <STRONG>*</STRONG> <EM>opts</EM><STRONG>);</STRONG>
       <STRONG>int</STRONG> <STRONG>setcchar(cchar_t</STRONG> <STRONG>*</STRONG> <EM>wch</EM><STRONG>,</STRONG> <STRONG>const</STRONG> <STRONG>wchar_t</STRONG> <STRONG>*</STRONG> <EM>wc</EM><STRONG>,</STRONG>
             <STRONG>const</STRONG> <STRONG>attr_t</STRONG> <EM>attrs</EM><STRONG>,</STRONG> <STRONG>short</STRONG> <EM>pair</EM><STRONG>,</STRONG> <STRONG>const</STRONG> <STRONG>void</STRONG> <STRONG>*</STRONG> <EM>opts</EM><STRONG>);</STRONG>


</PRE><H2><a name="h2-DESCRIPTION">DESCRIPTION</a></H2><PRE>
       The <EM>curses</EM> complex character data type  <EM>cchar</EM><STRONG>_</STRONG><EM>t</EM>  is  a  structure  type
       comprising  a  wide-character  string, a set of attributes, and a color
       pair identifier.  The <EM>cchar</EM><STRONG>_</STRONG><EM>t</EM> structure is opaque; do  not  attempt  to
       access  its  members  directly.   The  library  provides  functions  to
       manipulate this type.


</PRE><H3><a name="h3-getcchar">getcchar</a></H3><PRE>
       <STRONG>getcchar</STRONG> destructures a <EM>cchar</EM><STRONG>_</STRONG><EM>t</EM> into its components.

       If <EM>wc</EM> is not a null pointer, <STRONG>getcchar</STRONG>:

       <STRONG>o</STRONG>   stores the wide-character string in the  <EM>curses</EM>  complex  character
           <EM>wch</EM> into <EM>wc</EM>;

       <STRONG>o</STRONG>   stores the attributes in <EM>attrs</EM>; and

       <STRONG>o</STRONG>   stores the color pair identifier in <EM>pair</EM>.

       If <EM>wc</EM> is a null pointer, <STRONG>getcchar</STRONG> counts the <EM>wchar</EM><STRONG>_</STRONG><EM>t</EM> wide characters in
       <EM>wch</EM>, returns that value, and leaves <EM>attrs</EM> and <EM>pair</EM> unchanged.


</PRE><H3><a name="h3-setcchar">setcchar</a></H3><PRE>
       <STRONG>setcchar</STRONG>  constructs a <EM>curses</EM> complex character <EM>wch</EM> from the components
       <EM>wc</EM>, <EM>attrs</EM>, and <EM>pair</EM>.  The wide-character string <EM>wch</EM> must be  terminated
       with  a  null wide character <STRONG>L'\0'</STRONG> and must contain at most one spacing
       character, which, if present, must be the first wide character  in  the
       string.

       Up   to   <STRONG>CCHARW_MAX</STRONG> - 1   non-spacing   characters   may  follow  (see
       <STRONG><A HREF="curs_variables.3x.html">curs_variables(3x)</A></STRONG>).   <EM>ncurses</EM>  ignores  any   additional   non-spacing
       characters.

       The  string  may  contain  a single control character instead.  In that
       case, no non-spacing characters are allowed.


</PRE><H2><a name="h2-RETURN-VALUE">RETURN VALUE</a></H2><PRE>
       If <STRONG>getcchar</STRONG> is passed a null pointer as its <EM>wc</EM> argument, it returns the
       number of wide characters for a given <EM>wch</EM> that it would  store  in  <EM>wc</EM>,
       counting  a  trailing null wide character.  If <STRONG>getcchar</STRONG> is not passed a
       null pointer as its <EM>wc</EM> argument, it returns <STRONG>OK</STRONG> on success  and  <STRONG>ERR</STRONG>  on
       failure.

       In  <EM>ncurses</EM>,  <STRONG>getcchar</STRONG>  returns  <STRONG>ERR</STRONG>  if either <EM>attrs</EM> or <EM>pair</EM> is a null
       pointer and <EM>wc</EM> is not.

       <STRONG>setcchar</STRONG> returns <STRONG>OK</STRONG> on success and <STRONG>ERR</STRONG> on failure.

       In <EM>ncurses</EM>, <STRONG>setcchar</STRONG> returns <STRONG>ERR</STRONG> if

       <STRONG>o</STRONG>   <EM>wch</EM> is a null pointer,

       <STRONG>o</STRONG>   <EM>wc</EM> starts with a (wide) control character and  contains  any  other
           wide characters, or

       <STRONG>o</STRONG>   <EM>pair</EM> has a negative value.


</PRE><H2><a name="h2-NOTES">NOTES</a></H2><PRE>
       <EM>wch</EM> may be a value stored by <STRONG>setcchar</STRONG> or another <EM>curses</EM> function with a
       writable  <EM>cchar</EM><STRONG>_</STRONG><EM>t</EM>  argument.  If <EM>wch</EM> is constructed by any other means,
       the library's behavior is unspecified.


</PRE><H2><a name="h2-EXTENSIONS">EXTENSIONS</a></H2><PRE>
       X/Open Curses documents the <EM>opts</EM> argument as reserved for  future  use,
       saying  that it must be a null pointer.  The <EM>ncurses</EM> 6 ABI uses it with
       functions that have a color pair parameter to  support  extended  color
       pairs.

       <STRONG>o</STRONG>   In functions that assign colors, such as <STRONG>setcchar</STRONG>, if <EM>opts</EM> is not a
           null pointer, <EM>ncurses</EM> treats it as a pointer to <EM>int</EM>, and interprets
           it instead of the <EM>short</EM> <EM>pair</EM> parameter as a color pair identifier.

       <STRONG>o</STRONG>   In functions that retrieve colors, such as <STRONG>getcchar</STRONG>, if <EM>opts</EM> is not
           a  null  pointer, <EM>ncurses</EM> treats it as a pointer to <EM>int</EM>, and stores
           the retrieved color pair identifier there as well as in  the  <EM>short</EM>
           <EM>pair</EM>   parameter   (which   may   therefore   undergo  a  narrowing
           conversion).


</PRE><H2><a name="h2-PORTABILITY">PORTABILITY</a></H2><PRE>
       Applications employing <EM>ncurses</EM> extensions should condition their use on
       the visibility of the <STRONG>NCURSES_VERSION</STRONG> preprocessor macro.

       These functions are described in X/Open Curses Issue 4.   It  specifies
       no error conditions for them.

       X/Open  Curses  does  not  detail  the layout of the <EM>cchar</EM><STRONG>_</STRONG><EM>t</EM> structure,
       describing only its minimal required contents:

       <STRONG>o</STRONG>   a spacing wide character (<EM>wchar</EM><STRONG>_</STRONG><EM>t</EM>),

       <STRONG>o</STRONG>   at least five non-spacing wide characters (<EM>wchar</EM><STRONG>_</STRONG><EM>t</EM>; see below),

       <STRONG>o</STRONG>   attributes (at least 15 bits' worth, inferred  from  the  count  of
           specified <EM>WA</EM><STRONG>_</STRONG> constants),

       <STRONG>o</STRONG>   a  color pair identifier (at least 16 bits, inferred from the <EM>short</EM>
           type used to encode it).

       Non-spacing characters are optional, in the sense that zero or more may
       be stored in a <EM>cchar</EM><STRONG>_</STRONG><EM>t</EM>.  XOpen/Curses specifies a limit:

           Implementations may limit the number of non-spacing characters that
           can be associated with a spacing character, provided any  limit  is
           at least 5.

       Then-contemporary Unix implementations adhered to that limit.

       <STRONG>o</STRONG>   AIX 4  and  OSF/1 4 used the same declaration with a single spacing
           wide character <EM>c</EM> and an array of 5 non-spacing wide characters <EM>z</EM>.

       <STRONG>o</STRONG>   HP-UX 10 used an opaque structure of 28 bytes, large enough  for  6
           <EM>wchar</EM><STRONG>_</STRONG><EM>t</EM> values.

       <STRONG>o</STRONG>   Solaris <EM>xcurses</EM> uses a single array of 6 <EM>wchar</EM><STRONG>_</STRONG><EM>t</EM> values.

       <EM>ncurses</EM> defined its <EM>cchar</EM><STRONG>_</STRONG><EM>t</EM> in 1995 using 5 as the <EM>total</EM> of spacing and
       non-spacing  characters  (<STRONG>CCHARW_MAX</STRONG>).   That  was  probably  due  to a
       misreading of  the  AIX 4  header  files,  because  the  X/Open  Curses
       document  was  not  generally available at that time.  Later (in 2002),
       this detail was overlooked when work began to implement  the  functions
       using the structure.

       In  practice,  a  mere  four  non-spacing characters may seem adequate.
       X/Open  Curses   documents   possible   applications   of   non-spacing
       characters,  including their use as ligatures (a feature apparently not
       supported by any <EM>curses</EM> implementation).  Unicode does  not  limit  the
       (analogous)  number of combining characters in a grapheme cluster; some
       applications may be affected.  <EM>ncurses</EM> can be compiled with a different
       <STRONG>CCHARW_MAX</STRONG> value; doing so alters the library's ABI.


</PRE><H2><a name="h2-HISTORY">HISTORY</a></H2><PRE>
       X/Open Curses Issue 4 (1995) initially specified these functions.


</PRE><H2><a name="h2-SEE-ALSO">SEE ALSO</a></H2><PRE>
       <STRONG><A HREF="ncurses.3x.html">curses(3x)</A></STRONG>, <STRONG><A HREF="curs_attr.3x.html">curs_attr(3x)</A></STRONG>, <STRONG><A HREF="curs_color.3x.html">curs_color(3x)</A></STRONG>, <STRONG>wcwidth(3)</STRONG>

ncurses 6.6                       2025-02-23                 <STRONG><A HREF="curs_getcchar.3x.html">curs_getcchar(3x)</A></STRONG>
</PRE>
<div class="nav">
<ul>
<li><a href="#h2-NAME">NAME</a></li>
<li><a href="#h2-SYNOPSIS">SYNOPSIS</a></li>
<li><a href="#h2-DESCRIPTION">DESCRIPTION</a>
<ul>
<li><a href="#h3-getcchar">getcchar</a></li>
<li><a href="#h3-setcchar">setcchar</a></li>
</ul>
</li>
<li><a href="#h2-RETURN-VALUE">RETURN VALUE</a></li>
<li><a href="#h2-NOTES">NOTES</a></li>
<li><a href="#h2-EXTENSIONS">EXTENSIONS</a></li>
<li><a href="#h2-PORTABILITY">PORTABILITY</a></li>
<li><a href="#h2-HISTORY">HISTORY</a></li>
<li><a href="#h2-SEE-ALSO">SEE ALSO</a></li>
</ul>
</div>
</BODY>
</HTML>
