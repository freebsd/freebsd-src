Updating Information for FreeBSD current users

This file is maintained by imp@village.org.  Please send new entries
directly to him.  See end of file for further details.

19991113:
	Gcc 2.95.2 is now the default compiler.

19991015:
	PCCARD has been updated to attach pcic to the isa bus.  Therefore
	you will need to modify kernel config files that have pcic/card
	in them as follows:
		controller	pcic0	at isa?
		controller	pcic1	at isa?
		controller	card0

19990929:
	The sigset_t datatype has been changed from an integral type
	to a compound type and can hold 128 signals. Syscalls directly
	or indirectly using the new sigset_t have been added as to
	maintain compatibility with existing binaries. A new kernel must
	be made and installed and booted with before a make world can
	be done.

19990919:
	New jail syscall format requires recompilation of jail(8) with
	fresh headers installed (or a make world will do it for you).

19990914:
	Matt Dillon checked in many vm related things and sent a heads up
	to -current urging caution and to report vm problems to him.
	As of the 19th, no killer problems have been reported, but you
	have been warned.

19990908:
	The new miibus has been added to the system.  If you are using
	the dm, rl, sf, sis, ste, tl, wb or xl drivers, you need to
	add "controller miibus0" to your config file.

19990905:
	/var/cron/log has been moved to /var/log/cron to get all the
	log files in one place.

19990831:
	tn3270 has been removed from the based system and added as a port.

19990830:
	User-visible TCP timers are now expressed in units of 1ms, instead
	of 500ms, so if you've customized any timer values under
	``net.inet.tcp'', multiply them by 500 to preserve TCP's behavior.

19990828:
	RCS Id tags changed to FreeBSD.  This will cause huge cvsup
	updates.

19990821:
	On 28-May-1999 libreadline was upgraded from readline-2.2 to
	readline-4.0.  At that time the shared library major version
	number was bumped from "3" to "4".  It has been deemed that
	the interface change between readline-2.2 and readline-4.0 was
	not sufficient to warrant the version number bump.

	Thus I have reverted it back to "3".  You will need to perform
	the below immediately before your next ``make world'':
	    cd /usr/lib
	    ls -l libreadline.so.4
	        (if you have /usr/lib/libreadline.so.4)
	    mv libreadline.so.4 libreadline.so.3
	    rm -f libreadline.so
	    ln -s libreadline.so.3 libreadline.so

19990801:
	Changes to the pccardd kernel interface require that you recompile
	pccardd for new kernel.

19980725:
	The ipfw interface to the kernel has changed.  You will need to
	recompile ipfw programs for the new kernel.

19990715:
	The bpfilter device has been renamed to bpf.  You will need to 
	change your config files in order to enable this in newer kernels.

19990704:
	src/contrib/sys/softupdates is moving to
	src/sys/contrib/softupdates.  Update your symbolic links/etc.

19990702:
	Major changes have been made to vinum and its interface.  See
	the man page (vinum(8)) for details.  Look at the concat,
	mirror and stripe commands, as well as the SIMPLIFIED
	CONFIGURATION section.

19990628:
	Newsyslog.conf has had a minor, but potentially dangerous,
	change to its username/group syntax.  The old syntax was
	user.group, while the new syntax is user:group.

19990627:
	Inetd wrapping default has changed.  Please see the updated
	man page for details.

19990623:
	Compaq Smart Raid driver committed as ida.

19990622:
	The second phase of syscons cleanup has happened.  Some
	functionality has been made optional.  For details, see
        http://www.freebsd.org/~yokota/sc_update-June.txt
	Everyone will need to re-config(8) their kernels, but old
	binaries will work with the new kernel.

19990620:
	IPFW uid/gid-based filtering support has been committed. This
	breaks binary compatibility with previous copies of
	ipfw(8). Any utilities using the ioctl()s of ipfw (especially
	ipfw(8)) need to be recompiled with the newest headers
	installed.

19990618:
	Inetd now wraps all stream-based services, including internals.
	Syslog "severity" options are honoured. Installed syslog.conf
	and hosts.allow should be checked.

19990509:
	Most of the problems with newbus have been corrected, but
	it is still current and evolving.

	libcam's ABI has changed.  You must recompile the world and
	any ports that use it.

19990427:
	Massive changes to SMP went into the tree that should speed
	things up.  However, if you experience problems with SMP 
	machines, you can back off to the PRE_SMP_VMSHARE tag in the
	CVS repository (or run an MP kernel).

19990420:
	Pccardd and the pccard bus in general seem to be broken or
	most people.  Soren has patches to make it better for some,
	but not all people.  Work is underway to make it better for
	all people.

19990416:
	new bus changes integrated into -current.  Many problems were
	initially reported, but most have been fixed.  You'll need a
	new config and to tweak your kernel config file the way that
	GENERIC was tweaked.  Keep a copy of your old kernel when
	upgrading in case your new kernel doesn't work (and report the
	breakage to current@freebsd.org).

	As of 19990421 the remaining problems/quirks are

	o sio no longer supports pnp nor pccard.  This will be corrected,
	  but the new pccard code needs to be completed.
	o Some of the sound drivers broke for some people.  It seems
	  inconsistant as to who/what/when/where things broke.
	o Duplicate device entries in your config do not work.  Previously
	  they were silently ignored.  psm0 seems to be the most common
	  duplicate choice, although some reports have come in from people
	  that wired their scsi disk entries.
	o You must move the keyboard and mouse attachments from the
	  isa bus to the atkbdc bus.  See GENERIC for details.
	o Machines with multiple host-pci bridges (Intel 450NX) will not
	  probe the second pci bus.
	o Some probe ordering may have changed, so device naming may change
	  with the new kernel.  If you have multiple devices, please double
	  check to make sure they didn't move.  This is especially true
	  for cards on different buses.
	o The bus attachment for vga0 is always isa0 and never pci0 when
	  it is in fact a pci card.  It is safe to ignore this.
	o The format of the boot messages has changed (and is not
	  guaranteed to be constant for a while) so you may see this
	  in some shell scripts that diff dmesg from day to day as well
	  as scripts that parse dmesg output.

19990414:
	cc -aout sometimes has problems compiling with -g, remove -g
	from those compilation units affected until this is corrected.

	cc -aout has problems with producing some threaded libraries,
	so make world -DWANT_AOUT is not functional at this time.

	Since make world for a.out isn't functional, you cannot do
	make aout-to-elf from a pre-egcs a.out system.  To work around
	this problem, make aout-to-elf using 3.1-stable first (or a
	pre egcs -current) and then a simple make world will take you
	the rest of the way with a -current source base.

19990413:
	Make -j works again for make world.  As always, use it with
	care, and be sure to try a make world w/o -j before reporting
	problems (that is, know if the problem exists w/o -j before
	reporting the problem with -j).

19990413:
	Note cc -aout, which had been broken since the conversion to
	egcs, now supposedly works.  If you have rebuilt things like
	XFree86 a.out libraries, you should rebuild them again or
	progams that use them, including netscape, will fail to work.

19990409:
	NOTE: New c++ compiler cannot be used with c++ binaries from
	the old compiler and vice versa.

19990408:
	In recent days egcs has been imported into the tree.  A number
	of problems have been discussed in -current.  Here is a highlight
	of a few of the more common ones.  With the exception of make
	-j n, they have been claimed to have been fixed.

	c++ is broken after make world: This is correct.  Because we
	changed compilers two make worlds are necessary to get C++
	working again.  The code generated by the old compiler and new
	compiler are not compatible, so things wind up being
	undefined.

	cpp is broken in make world:  There was a window where cpp
	would be built incorrectly.  The fix for this is
		cd src/gnu/usr.bin/cc
		make clean
		make all
		make install
	and this should correct your problems.  See the -current
	archives for a version of this that does moer cleaning.

	Make -j n doesn't work.  Work contiunes to make this work,
	I've seen no reports of success as of April 7th.

19990329:
	Previously, one would define "NOAOUT" to keep from building
	the legacy a.out bits.  Now one would define "WANT_AOUT" to
	build them.

19990316:
	The name of the old wd.c and atapi.c based CDROM driver has
	been changed back to wcd. So update your config file to use
	"device wcd" instead of "device acd".

19990314:
	For those of you using the VN device as a loadable module,
	please be aware that the new VN device has been committed to
	-4.x and cannot yet be used as a loadable module.  This will
	be fixed in the future.
	
19990309:
	New loader.rc mechanism.  Please see src/sys/boot/README for
	details.

19990225:
	struct proc size changed.  Recompile kernel and the
	usual suspects.  Make world if in doubt.

19990214:
	The nlpt driver has changed names back to be the lpt driver.
	See ppbus(4) or http://www.freebsd.org/~nsouch/ppbus.html
	for proper configuration details.

19990210:
	The 'lpt' driver is now obsolete.  Replace it with the 'nlpt'
	driver and 'ppbus' controller combination.

19990209:
	New devstat API requires recompilation of libdevstat, systat,
	iostat, vmstat and rpc.rstatd.  A new kernel is also required.
	make world + building a kernel should do all of this.  Any
	ports that use devstat need to be recompiled as well.

19990125:
	Linux threads options has gone away (they are now standard in
	the FreeBSD kernel).  A recompile of all libkvm using programs
	is in order (or better yet a make world).

19990122:
	On or about this date there was a small window when the boot
	blocks had some minor problems which seemed to force one to
	edit /etc/fstab.  This has been corrected, if you are seeing this
	problem, please rebuild and reinstall your boot blocks.

19990121:
	Vinum has changed.  The "vinum read" command has changed.  For
	updates, please see

http://www.freebsd.org/cgi/getmsg.cgi?fetch=800363+0+current/freebsd-current

	for details.  

	Matt Dillon committed a boatload of VM changes, for
	information please see

http://www.freebsd.org/cgi/getmsg.cgi?fetch=886676+0+current/freebsd-current
	or
http://www.freebsd.org/cgi/getmsg.cgi?fetch=827400+0+current/freebsd-current

	for details.  These changes will likely not impact anybody,
	but large chagnes to the VM need at least a heads up.

19990120:
	Stable branch created.  You might want to consider using this
	branch.  It is tagged with RELENG_3.

19990119:
	More work on the syscons driver has been committed.  Since
	files moved around, you will need to reconfigure your kernel,
	and make clean; make depend before rebuilding the kernel.  No
	config file changes are needed.

19990111:
	New keyboard and video card drivers are introduced as the first
	stage of console driver reorganization.  You are required to
	update the kernel configuration file and rebuild the kernel.
	kbdcontrol, vidcontrol, and screen savers also need recompilation.
	The instruction can be found in

		http://www.freebsd.org/~yokota/sc_update.txt

	It has notes on splash screen too.

19990106:
	Robert Nordier was kind enough to make this page to enable people to
	install the new bootblocks:

		http://www.freebsd.org/~rnordier/boot.txt

	When updating to ELF, make sure that you have updated your
	/etc/rc files which have different ldconfig invocations for
	elf and aout.  Otherwise things like X will stop working with
	messages about being unable to find library files.  The
	mergemaster utility in ports/sysutils/mergemaster helps to
	keep critical files like this in sync, and its use is
	recommended.

19990104:
	Information about ELF day (see 19981230) can be found in

		http://www.freebsd.org/~peter/elfday.html

	about the upcoming change, its motivations and instructions
	for doing the upgrade.

19981230:
	You should install new bootblocks now.  The ELF kernel will
	become default soon.  In addition, you'll need to upgrade
	your userland programs to ELF before then as well.  Use
	make aout-to-elf to upgrade your userland programs (old
	a.out programs in, for example, /usr/local/bin will
	continue to work, even after the upgrade).  See src/Makefile
	for more details.

19981224:
	The old wcd driver has been deleted from the kernel.  The
	driver that replaces it is named acd.  You'll need to change
	this in your configuration files.

	Failure to do this will result in "ATAPI CD-ROMs not
	configured" at boot time.

	The floppy tape driver (ft) has been removed from the kernel,
	with no replacement driver.

19981202:
	New groups from 19981201 commented out of mtree, so they
	aren't strictly needed, but still a good idea to have.

19981201:
	New user/group added: bind.  From src/etc/master.passwd and
	src/etc/group:
		% grep <newstuff> /usr/src/etc/group 
		bind:*:53:
		% grep <newstuff> /usr/src/etc/master.passwd 
		tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
		kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
		bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin

19981118:
	PAM integrated into the tree.   Requires new /etc/pam.conf file
	to silence warnings from authentication programs (login, etc).
	See src/etc/pam.conf for a sample.

This file contains a list, in reverse chronologocal order, of major
breakages in tracking -current.  Not all things will be listed here,
and it only starts on November 18, 1998.  If you have an earlier
version of FreeBSD, you are on your own to get to November 18, 1998.

Please filter your entries through Warner (imp@village.org) so that
the style, formatting, etc of this file can be maintained.

$FreeBSD$
